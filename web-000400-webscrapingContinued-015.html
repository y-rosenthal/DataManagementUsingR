<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.5.57">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">


<title>34&nbsp; Web Scraping with R – Data Management With R</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for syntax highlighting */
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { display: inline-block; text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
  }
pre.numberSource { margin-left: 3em;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
</style>


<script src="site_libs/quarto-nav/quarto-nav.js"></script>
<script src="site_libs/quarto-nav/headroom.min.js"></script>
<script src="site_libs/clipboard/clipboard.min.js"></script>
<script src="site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="site_libs/quarto-search/fuse.min.js"></script>
<script src="site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="./">
<link href="./web-000130-WebscrapingJavascriptSites-v003.html" rel="next">
<link href="./web-000300-internetArchitecture-v001.html" rel="prev">
<script src="site_libs/quarto-html/quarto.js"></script>
<script src="site_libs/quarto-html/popper.min.js"></script>
<script src="site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="site_libs/quarto-html/anchor.min.js"></script>
<link href="site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="site_libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="site_libs/bootstrap/bootstrap.min.js"></script>
<link href="site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="site_libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">
<script id="quarto-search-options" type="application/json">{
  "location": "sidebar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "start",
  "type": "textbox",
  "limit": 50,
  "keyboard-shortcut": [
    "f",
    "/",
    "s"
  ],
  "show-item-context": false,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-text-placeholder": "",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit",
    "search-label": "Search"
  }
}</script>
<meta http-equiv="Cache-Control" content="no-cache, no-store, must-revalidate">

<meta http-equiv="Pragma" content="no-cache">

<meta http-equiv="Expires" content="0">


</head>

<body class="nav-sidebar floating">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
  <nav class="quarto-secondary-nav">
    <div class="container-fluid d-flex">
      <button type="button" class="quarto-btn-toggle btn" data-bs-toggle="collapse" role="button" data-bs-target=".quarto-sidebar-collapse-item" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
        <i class="bi bi-layout-text-sidebar-reverse"></i>
      </button>
        <nav class="quarto-page-breadcrumbs" aria-label="breadcrumb"><ol class="breadcrumb"><li class="breadcrumb-item"><a href="./web-000300-internetArchitecture-v001.html">Web Scraping</a></li><li class="breadcrumb-item"><a href="./web-000400-webscrapingContinued-015.html"><span class="chapter-number">34</span>&nbsp; <span class="chapter-title">Web Scraping with R</span></a></li></ol></nav>
        <a class="flex-grow-1" role="navigation" data-bs-toggle="collapse" data-bs-target=".quarto-sidebar-collapse-item" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">      
        </a>
      <button type="button" class="btn quarto-search-button" aria-label="Search" onclick="window.quartoOpenSearch();">
        <i class="bi bi-search"></i>
      </button>
    </div>
  </nav>
</header>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article">
<!-- sidebar -->
  <nav id="quarto-sidebar" class="sidebar collapse collapse-horizontal quarto-sidebar-collapse-item sidebar-navigation floating overflow-auto">
    <div class="pt-lg-2 mt-2 text-left sidebar-header">
    <div class="sidebar-title mb-0 py-0">
      <a href="./">Data Management With R</a> 
    </div>
      </div>
        <div class="mt-2 flex-shrink-0 align-items-center">
        <div class="sidebar-search">
        <div id="quarto-search" class="" title="Search"></div>
        </div>
        </div>
    <div class="sidebar-menu-container"> 
    <ul class="list-unstyled mt-1">
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./index.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Intro</span></a>
  </div>
</li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-1" role="navigation" aria-expanded="true">
 <span class="menu-text">Some computer basics</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-1" role="navigation" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-1" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./intro00100-operatingSystems.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">1</span>&nbsp; <span class="chapter-title">What is an “operating system”</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./intro00120-files.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">2</span>&nbsp; <span class="chapter-title">Working with files</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./intro00130-chromeExtensions.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">3</span>&nbsp; <span class="chapter-title">Chrome Extensions</span></span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-2" role="navigation" aria-expanded="true">
 <span class="menu-text">Intro to R packages</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-2" role="navigation" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-2" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./0000022-InstallingRPackages-v003.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">4</span>&nbsp; <span class="chapter-title">Intro to R packages</span></span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-3" role="navigation" aria-expanded="true">
 <span class="menu-text">Intro to Quarto</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-3" role="navigation" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-3" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./0000017-introToQuarto-v001.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">5</span>&nbsp; <span class="chapter-title">Intro to Quarto</span></span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-4" role="navigation" aria-expanded="true">
 <span class="menu-text">Working with files</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-4" role="navigation" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-4" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./0000055-workingWithFiles.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">6</span>&nbsp; <span class="chapter-title">Working with files</span></span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-5" role="navigation" aria-expanded="true">
 <span class="menu-text">JSON data</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-5" role="navigation" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-5" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./0000075-whatIsJsonData.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">7</span>&nbsp; <span class="chapter-title">Intro to JSON data</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./0000080-editingAndValidatingJsonFiles.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">8</span>&nbsp; <span class="chapter-title">Creating, editing and validating JSON files</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./0000085-jsonDataTypes.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">9</span>&nbsp; <span class="chapter-title">DATA TYPES IN JSON</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./0000090-usingJsonInR.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">10</span>&nbsp; <span class="chapter-title">Using JSON in R</span></span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-6" role="navigation" aria-expanded="true">
 <span class="menu-text">Bash</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-6" role="navigation" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-6" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./0000011-WhatIsACli-v010.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">11</span>&nbsp; <span class="chapter-title">Intro to Command Line Interfaces (CLIs)</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./0000013-HowToRunTheBashShellCli-v011.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">12</span>&nbsp; <span class="chapter-title">How to run the Bash Shell</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./0000025-introToBash-v007.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">13</span>&nbsp; <span class="chapter-title">Working with the Bash Shell.</span></span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-7" role="navigation" aria-expanded="true">
 <span class="menu-text">Regular Expressions</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-7" role="navigation" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-7" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./0200200-introToRegularExpressions-v036.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">14</span>&nbsp; <span class="chapter-title">regular expressions (regex)</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./000260-PracticeWithRegulaExpressions-v003.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">15</span>&nbsp; <span class="chapter-title">Practice with Regular Expressions</span></span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-8" role="navigation" aria-expanded="true">
 <span class="menu-text">Intro to tidyverse</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-8" role="navigation" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-8" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./0400050-whatIsTidyverse-v001.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">16</span>&nbsp; <span class="chapter-title">What is the “tidyverse”</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./0400100-usingPipes-v001.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">17</span>&nbsp; <span class="chapter-title">Using pipes, i.e. %&gt;% and |&gt;</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./0400200-stringr-tutorials-v003.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">18</span>&nbsp; <span class="chapter-title">stringr tutorial</span></span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-9" role="navigation" aria-expanded="true">
 <span class="menu-text">visualizations with ggplot2</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-9" role="navigation" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-9" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./050050-tdyvrsGgplot2-v0001.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">19</span>&nbsp; <span class="chapter-title">Intro to ggplot2</span></span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-10" role="navigation" aria-expanded="true">
 <span class="menu-text">Intro to dplyr and to SQL</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-10" role="navigation" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-10" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./0500100-tdyvrsDplyr-v005.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">20</span>&nbsp; <span class="chapter-title">Intro to dplyr</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./0500400-sqlSelectIntro-v003.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">21</span>&nbsp; <span class="chapter-title">SQL Select</span></span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-11" role="navigation" aria-expanded="true">
 <span class="menu-text">Relational databases and SQL (no dplyr knowledge needed)</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-11" role="navigation" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-11" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./sql0006-introToDatabases-v023.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">22</span>&nbsp; <span class="chapter-title">“databases” and “database management systems”</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./sql0014-theBooksDatabase-v001.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">23</span>&nbsp; <span class="chapter-title">Get the data - “books database” and other tables</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./sql0010-introToSql-v023.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">24</span>&nbsp; <span class="chapter-title">Relational Databases and SQL (using R)</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./sql0035-workingWithMultipleTables-v012.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">25</span>&nbsp; <span class="chapter-title">Inner Joins.</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./sql0030-sqlFunctions_aggregateFunctions_groupBy_having-v019.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">26</span>&nbsp; <span class="chapter-title">aggregate functions, group by, having</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./sql0040-crossJoin-leftJoin-subquery-selfJoins-v023.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">27</span>&nbsp; <span class="chapter-title">more joins (cross/left/right/full), subqueries, set operations, case, self joins</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./sql0050-commonTableExpressions-v001.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">28</span>&nbsp; <span class="chapter-title">Common Table Expressions (CTE)</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./sql0200-otherSqlCommands-v002.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">29</span>&nbsp; <span class="chapter-title">other commands: update/delete, create/drop/insert</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./sql0900-sqlWindowFunctions-v002.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">30</span>&nbsp; <span class="chapter-title">SQL “window” functions</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./sql0950-workingWithDatabasesInR-v010.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">31</span>&nbsp; <span class="chapter-title">Working directly with databases in R</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./0600100-introToDb-v001.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">32</span>&nbsp; <span class="chapter-title">What is a Database?</span></span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-12" role="navigation" aria-expanded="true">
 <span class="menu-text">Web Scraping</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-12" role="navigation" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-12" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./web-000300-internetArchitecture-v001.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">33</span>&nbsp; <span class="chapter-title">How a webpage gets to your browser</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./web-000400-webscrapingContinued-015.html" class="sidebar-item-text sidebar-link active">
 <span class="menu-text"><span class="chapter-number">34</span>&nbsp; <span class="chapter-title">Web Scraping with R</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./web-000130-WebscrapingJavascriptSites-v003.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">35</span>&nbsp; <span class="chapter-title">Scraping Dynamic (JavaScript) Websites</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./web-000420-practiceWithWebScraping-v001-ANSWERS-v002.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">36</span>&nbsp; <span class="chapter-title">CSS Selector questions and answers</span></span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-13" role="navigation" aria-expanded="true">
 <span class="menu-text">Questions</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-13" role="navigation" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-13" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./0990100-cleaningData-v001.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">37</span>&nbsp; <span class="chapter-title">“Cleaning” data</span></span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-14" role="navigation" aria-expanded="true">
 <span class="menu-text">Appendices</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-14" role="navigation" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-14" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./0000100-topics-v001.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">38</span>&nbsp; <span class="chapter-title">Topics</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./0000200-bibliography-v001.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">39</span>&nbsp; <span class="chapter-title">Bibliography</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./0000300-whereToFindDatasets-v001.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">40</span>&nbsp; <span class="chapter-title">Where to find datasets</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./0000310-whereToFindApis-v001.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">41</span>&nbsp; <span class="chapter-title">Where to find APIs</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./0999000-toDo-v001.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">42</span>&nbsp; <span class="chapter-title">Additional topics</span></span></a>
  </div>
</li>
      </ul>
  </li>
    </ul>
    </div>
</nav>
<div id="quarto-sidebar-glass" class="quarto-sidebar-collapse-item" data-bs-toggle="collapse" data-bs-target=".quarto-sidebar-collapse-item"></div>
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc" class="toc-active" data-toc-expanded="99">
    <h2 id="toc-title">Table of contents</h2>
   
  <ul>
  <li><a href="#ethics-of-webscraping" id="toc-ethics-of-webscraping" class="nav-link active" data-scroll-target="#ethics-of-webscraping"><span class="header-section-number">34.1</span> Ethics of webscraping</a></li>
  <li><a href="#how-to-webscrape-with-r" id="toc-how-to-webscrape-with-r" class="nav-link" data-scroll-target="#how-to-webscrape-with-r"><span class="header-section-number">34.2</span> How to webscrape with R</a></li>
  <li><a href="#download-weather-data" id="toc-download-weather-data" class="nav-link" data-scroll-target="#download-weather-data"><span class="header-section-number">34.3</span> Download weather data</a></li>
  <li><a href="#scraping-a-piece-of-data" id="toc-scraping-a-piece-of-data" class="nav-link" data-scroll-target="#scraping-a-piece-of-data"><span class="header-section-number">34.4</span> Scraping a piece of data</a></li>
  <li><a href="#choosing-better-css-selectors" id="toc-choosing-better-css-selectors" class="nav-link" data-scroll-target="#choosing-better-css-selectors"><span class="header-section-number">34.5</span> Choosing better CSS Selectors</a></li>
  <li><a href="#scraping-country-names" id="toc-scraping-country-names" class="nav-link" data-scroll-target="#scraping-country-names"><span class="header-section-number">34.6</span> Scraping country names</a></li>
  <li><a href="#same-thing-without-pipes" id="toc-same-thing-without-pipes" class="nav-link" data-scroll-target="#same-thing-without-pipes"><span class="header-section-number">34.7</span> Same thing without pipes</a></li>
  <li><a href="#working-with-the-data-you-scraped" id="toc-working-with-the-data-you-scraped" class="nav-link" data-scroll-target="#working-with-the-data-you-scraped"><span class="header-section-number">34.8</span> Working with the data you scraped</a></li>
  <li><a href="#get-all-data-into-a-dataframe" id="toc-get-all-data-into-a-dataframe" class="nav-link" data-scroll-target="#get-all-data-into-a-dataframe"><span class="header-section-number">34.9</span> Get all data into a dataframe</a></li>
  <li><a href="#html_text2-removes-leadingtrailing-whitespace" id="toc-html_text2-removes-leadingtrailing-whitespace" class="nav-link" data-scroll-target="#html_text2-removes-leadingtrailing-whitespace"><span class="header-section-number">34.10</span> html_text2() removes leading/trailing whitespace</a></li>
  <li><a href="#create-a-function-to-do-the-scraping" id="toc-create-a-function-to-do-the-scraping" class="nav-link" data-scroll-target="#create-a-function-to-do-the-scraping"><span class="header-section-number">34.11</span> Create a function to do the scraping</a></li>
  <li><a href="#scraping-multiple-webpages-in-a-loop" id="toc-scraping-multiple-webpages-in-a-loop" class="nav-link" data-scroll-target="#scraping-multiple-webpages-in-a-loop"><span class="header-section-number">34.12</span> Scraping multiple webpages in a loop</a>
  <ul class="collapse">
  <li><a href="#figure-out-the-code" id="toc-figure-out-the-code" class="nav-link" data-scroll-target="#figure-out-the-code"><span class="header-section-number">34.12.1</span> Figure out the code</a></li>
  </ul></li>
  <li><a href="#put-it-into-a-function" id="toc-put-it-into-a-function" class="nav-link" data-scroll-target="#put-it-into-a-function"><span class="header-section-number">34.13</span> Put it into a function</a></li>
  <li><a href="#some-urls-includes-info-about-the-page-number" id="toc-some-urls-includes-info-about-the-page-number" class="nav-link" data-scroll-target="#some-urls-includes-info-about-the-page-number"><span class="header-section-number">34.14</span> Some URLs includes info about the page number</a></li>
  <li><a href="#function-to-get-multiple-pages" id="toc-function-to-get-multiple-pages" class="nav-link" data-scroll-target="#function-to-get-multiple-pages"><span class="header-section-number">34.15</span> Function to get multiple pages</a></li>
  <li><a href="#scrape-the-number-of-pages-to-get" id="toc-scrape-the-number-of-pages-to-get" class="nav-link" data-scroll-target="#scrape-the-number-of-pages-to-get"><span class="header-section-number">34.16</span> Scrape the number of pages to get</a></li>
  <li><a href="#robots.txt-file" id="toc-robots.txt-file" class="nav-link" data-scroll-target="#robots.txt-file"><span class="header-section-number">34.17</span> robots.txt file</a></li>
  <li><a href="#techniques-for-finding-css-selectors" id="toc-techniques-for-finding-css-selectors" class="nav-link" data-scroll-target="#techniques-for-finding-css-selectors"><span class="header-section-number">34.18</span> Techniques for finding CSS selectors</a></li>
  <li><a href="#scrape-the-total-number-of-pages." id="toc-scrape-the-total-number-of-pages." class="nav-link" data-scroll-target="#scrape-the-total-number-of-pages."><span class="header-section-number">34.19</span> “scrape” the total number of pages.</a></li>
  <li><a href="#timing-r-code-with-sys.time" id="toc-timing-r-code-with-sys.time" class="nav-link" data-scroll-target="#timing-r-code-with-sys.time"><span class="header-section-number">34.20</span> Timing R code with Sys.time()</a>
  <ul class="collapse">
  <li><a href="#finding-a-css-selector-that-isnt-fragile" id="toc-finding-a-css-selector-that-isnt-fragile" class="nav-link" data-scroll-target="#finding-a-css-selector-that-isnt-fragile"><span class="header-section-number">34.20.1</span> Finding a css selector that isn’t “fragile”</a></li>
  </ul></li>
  </ul>
</nav>
    </div>
<!-- main -->
<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default"><nav class="quarto-page-breadcrumbs quarto-title-breadcrumbs d-none d-lg-block" aria-label="breadcrumb"><ol class="breadcrumb"><li class="breadcrumb-item"><a href="./web-000300-internetArchitecture-v001.html">Web Scraping</a></li><li class="breadcrumb-item"><a href="./web-000400-webscrapingContinued-015.html"><span class="chapter-number">34</span>&nbsp; <span class="chapter-title">Web Scraping with R</span></a></li></ol></nav>
<div class="quarto-title">
<h1 class="title"><span class="chapter-number">34</span>&nbsp; <span class="chapter-title">Web Scraping with R</span></h1>
</div>



<div class="quarto-title-meta">

    
  
    
  </div>
  


</header>


<p>Web scraping is the process of capturing data from a website using a program. The following introduces the topic of webscraping by using R.</p>
<section id="ethics-of-webscraping" class="level2" data-number="34.1">
<h2 data-number="34.1" class="anchored" data-anchor-id="ethics-of-webscraping"><span class="header-section-number">34.1</span> Ethics of webscraping</h2>
<p>See the first section of this page for a discussion of the ethics and legal issues related to webscraping:</p>
<p><a href="https://r4ds.hadley.nz/webscraping" class="uri">https://r4ds.hadley.nz/webscraping</a></p>
</section>
<section id="how-to-webscrape-with-r" class="level2" data-number="34.2">
<h2 data-number="34.2" class="anchored" data-anchor-id="how-to-webscrape-with-r"><span class="header-section-number">34.2</span> How to webscrape with R</h2>
<div class="cell">
<div class="sourceCode cell-code" id="cb1"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="do">##################################################################.</span></span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a><span class="do">##################################################################.</span></span>
<span id="cb1-3"><a href="#cb1-3" aria-hidden="true" tabindex="-1"></a><span class="do">##</span></span>
<span id="cb1-4"><a href="#cb1-4" aria-hidden="true" tabindex="-1"></a><span class="do">## In this file:</span></span>
<span id="cb1-5"><a href="#cb1-5" aria-hidden="true" tabindex="-1"></a><span class="do">##</span></span>
<span id="cb1-6"><a href="#cb1-6" aria-hidden="true" tabindex="-1"></a><span class="do">## - Using the rvest package to scrape information from a</span></span>
<span id="cb1-7"><a href="#cb1-7" aria-hidden="true" tabindex="-1"></a><span class="do">##   basic HTML website</span></span>
<span id="cb1-8"><a href="#cb1-8" aria-hidden="true" tabindex="-1"></a><span class="do">##</span></span>
<span id="cb1-9"><a href="#cb1-9" aria-hidden="true" tabindex="-1"></a><span class="do">## - Packaging up the code to scrape a page into a function</span></span>
<span id="cb1-10"><a href="#cb1-10" aria-hidden="true" tabindex="-1"></a><span class="do">##</span></span>
<span id="cb1-11"><a href="#cb1-11" aria-hidden="true" tabindex="-1"></a><span class="do">## - Using a loop to scrape several pages of information</span></span>
<span id="cb1-12"><a href="#cb1-12" aria-hidden="true" tabindex="-1"></a><span class="do">##   whose URLs differ in a predictable way.</span></span>
<span id="cb1-13"><a href="#cb1-13" aria-hidden="true" tabindex="-1"></a><span class="do">##</span></span>
<span id="cb1-14"><a href="#cb1-14" aria-hidden="true" tabindex="-1"></a><span class="do">## - Fixing fragile CSS selectors</span></span>
<span id="cb1-15"><a href="#cb1-15" aria-hidden="true" tabindex="-1"></a><span class="do">## </span></span>
<span id="cb1-16"><a href="#cb1-16" aria-hidden="true" tabindex="-1"></a><span class="do">## - Intro to regular expressions (regex)</span></span>
<span id="cb1-17"><a href="#cb1-17" aria-hidden="true" tabindex="-1"></a><span class="do">#################################################################.</span></span>
<span id="cb1-18"><a href="#cb1-18" aria-hidden="true" tabindex="-1"></a><span class="do">#################################################################.</span></span>
<span id="cb1-19"><a href="#cb1-19" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-20"><a href="#cb1-20" aria-hidden="true" tabindex="-1"></a><span class="co">#-------------------------------------------------------------------------------</span></span>
<span id="cb1-21"><a href="#cb1-21" aria-hidden="true" tabindex="-1"></a><span class="co"># Some online resources</span></span>
<span id="cb1-22"><a href="#cb1-22" aria-hidden="true" tabindex="-1"></a><span class="co">#</span></span>
<span id="cb1-23"><a href="#cb1-23" aria-hidden="true" tabindex="-1"></a><span class="co"># video demonstrating basics of web scraping in R</span></span>
<span id="cb1-24"><a href="#cb1-24" aria-hidden="true" tabindex="-1"></a><span class="co"># - https://www.youtube.com/watch?v=v8Yh_4oE-Fs&amp;t=275s</span></span>
<span id="cb1-25"><a href="#cb1-25" aria-hidden="true" tabindex="-1"></a><span class="co">#</span></span>
<span id="cb1-26"><a href="#cb1-26" aria-hidden="true" tabindex="-1"></a><span class="co"># Tips for editing HTML in VSCode</span></span>
<span id="cb1-27"><a href="#cb1-27" aria-hidden="true" tabindex="-1"></a><span class="co"># - https://code.visualstudio.com/docs/languages/html</span></span>
<span id="cb1-28"><a href="#cb1-28" aria-hidden="true" tabindex="-1"></a><span class="co">#</span></span>
<span id="cb1-29"><a href="#cb1-29" aria-hidden="true" tabindex="-1"></a><span class="co"># Tips on how to use VSCode in general:</span></span>
<span id="cb1-30"><a href="#cb1-30" aria-hidden="true" tabindex="-1"></a><span class="co">#   https://code.visualstudio.com/docs/getstarted/tips-and-tricks</span></span>
<span id="cb1-31"><a href="#cb1-31" aria-hidden="true" tabindex="-1"></a><span class="co">#</span></span>
<span id="cb1-32"><a href="#cb1-32" aria-hidden="true" tabindex="-1"></a><span class="co"># timing R code</span></span>
<span id="cb1-33"><a href="#cb1-33" aria-hidden="true" tabindex="-1"></a><span class="co"># - https://www.r-bloggers.com/2017/05/5-ways-to-measure-running-time-of-r-code/</span></span>
<span id="cb1-34"><a href="#cb1-34" aria-hidden="true" tabindex="-1"></a><span class="co">#</span></span>
<span id="cb1-35"><a href="#cb1-35" aria-hidden="true" tabindex="-1"></a><span class="co"># video - using RSelenium to scrape dynamic (ie. javascript) webpage</span></span>
<span id="cb1-36"><a href="#cb1-36" aria-hidden="true" tabindex="-1"></a><span class="co"># - https://www.youtube.com/watch?v=CN989KER4pA</span></span>
<span id="cb1-37"><a href="#cb1-37" aria-hidden="true" tabindex="-1"></a><span class="co">#</span></span>
<span id="cb1-38"><a href="#cb1-38" aria-hidden="true" tabindex="-1"></a><span class="co"># CSS selector rules</span></span>
<span id="cb1-39"><a href="#cb1-39" aria-hidden="true" tabindex="-1"></a><span class="co"># - https://flukeout.github.io/ </span></span>
<span id="cb1-40"><a href="#cb1-40" aria-hidden="true" tabindex="-1"></a><span class="co"># - answers to the "game": https://gist.github.com/humbertodias/b878772e823fd9863a1e4c2415a3f7b6</span></span>
<span id="cb1-41"><a href="#cb1-41" aria-hidden="true" tabindex="-1"></a><span class="co">#</span></span>
<span id="cb1-42"><a href="#cb1-42" aria-hidden="true" tabindex="-1"></a><span class="co"># Intro to regular expressions</span></span>
<span id="cb1-43"><a href="#cb1-43" aria-hidden="true" tabindex="-1"></a><span class="co"># - https://ryanstutorials.net/regular-expressions-tutorial/</span></span>
<span id="cb1-44"><a href="#cb1-44" aria-hidden="true" tabindex="-1"></a><span class="co">#-------------------------------------------------------------------------------</span></span>
<span id="cb1-45"><a href="#cb1-45" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-46"><a href="#cb1-46" aria-hidden="true" tabindex="-1"></a><span class="co"># Install (if necessary) and load the rvest package</span></span>
<span id="cb1-47"><a href="#cb1-47" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-48"><a href="#cb1-48" aria-hidden="true" tabindex="-1"></a><span class="co"># The following two lines will install and load the rvest package.</span></span>
<span id="cb1-49"><a href="#cb1-49" aria-hidden="true" tabindex="-1"></a><span class="co"># I commented out these lines in favor of the one line below</span></span>
<span id="cb1-50"><a href="#cb1-50" aria-hidden="true" tabindex="-1"></a><span class="co">#</span></span>
<span id="cb1-51"><a href="#cb1-51" aria-hidden="true" tabindex="-1"></a><span class="co">#install.packages("rvest")    # installs it on your machine (only need to do this once on your machine)</span></span>
<span id="cb1-52"><a href="#cb1-52" aria-hidden="true" tabindex="-1"></a><span class="co">#library(rvest)              # do this everytime your start RStudio  (also require(rvest) works)</span></span>
<span id="cb1-53"><a href="#cb1-53" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-54"><a href="#cb1-54" aria-hidden="true" tabindex="-1"></a><span class="co"># This one line will accomplish what the two lines above do. However,</span></span>
<span id="cb1-55"><a href="#cb1-55" aria-hidden="true" tabindex="-1"></a><span class="co"># this one line will not install the package if it's not necessary.</span></span>
<span id="cb1-56"><a href="#cb1-56" aria-hidden="true" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(rvest)) <span class="fu">install.packages</span>(<span class="st">"rvest"</span>)   <span class="co"># this automatically also loads the "xml2" package</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>Loading required package: rvest</code></pre>
</div>
<div class="sourceCode cell-code" id="cb3"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true" tabindex="-1"></a><span class="fu">help</span>(<span class="at">package=</span><span class="st">"rvest"</span>)</span>
<span id="cb3-2"><a href="#cb3-2" aria-hidden="true" tabindex="-1"></a><span class="fu">help</span>(<span class="at">package=</span><span class="st">"xml2"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="download-weather-data" class="level2" data-number="34.3">
<h2 data-number="34.3" class="anchored" data-anchor-id="download-weather-data"><span class="header-section-number">34.3</span> Download weather data</h2>
<p>We’ll be working with the following webpage</p>
<p><a href="https://forecast.weather.gov/MapClick.php?lat=37.7771&amp;lon=-122.4196#.Xl0j6BNKhTY" class="uri">https://forecast.weather.gov/MapClick.php?lat=37.7771&amp;lon=-122.4196#.Xl0j6BNKhTY</a></p>
<p><img src="images/webPage-weather-002-rightClick.PNG" class="img-fluid"></p>
</section>
<section id="scraping-a-piece-of-data" class="level2" data-number="34.4">
<h2 data-number="34.4" class="anchored" data-anchor-id="scraping-a-piece-of-data"><span class="header-section-number">34.4</span> Scraping a piece of data</h2>
<div class="cell">
<div class="sourceCode cell-code" id="cb4"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb4-1"><a href="#cb4-1" aria-hidden="true" tabindex="-1"></a><span class="do">###########################################################################</span></span>
<span id="cb4-2"><a href="#cb4-2" aria-hidden="true" tabindex="-1"></a><span class="co">#</span></span>
<span id="cb4-3"><a href="#cb4-3" aria-hidden="true" tabindex="-1"></a><span class="co"># Code to download high/low temperature data from the following website</span></span>
<span id="cb4-4"><a href="#cb4-4" aria-hidden="true" tabindex="-1"></a><span class="co">#</span></span>
<span id="cb4-5"><a href="#cb4-5" aria-hidden="true" tabindex="-1"></a><span class="do">###########################################################################</span></span>
<span id="cb4-6"><a href="#cb4-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb4-7"><a href="#cb4-7" aria-hidden="true" tabindex="-1"></a>url <span class="ot">=</span> <span class="st">"https://forecast.weather.gov/MapClick.php?lat=37.7771&amp;lon=-122.4196#.Xl0j6BNKhTY"</span></span>
<span id="cb4-8"><a href="#cb4-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb4-9"><a href="#cb4-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb4-10"><a href="#cb4-10" aria-hidden="true" tabindex="-1"></a><span class="co"># You can get a very sepecific CSS selector for a particular </span></span>
<span id="cb4-11"><a href="#cb4-11" aria-hidden="true" tabindex="-1"></a><span class="co"># part of a webpage by using the "copy css selector" feature of</span></span>
<span id="cb4-12"><a href="#cb4-12" aria-hidden="true" tabindex="-1"></a><span class="co"># your browser. Every browser has a slightly different way of doing this</span></span>
<span id="cb4-13"><a href="#cb4-13" aria-hidden="true" tabindex="-1"></a><span class="co"># but they are all similar. In Chrome do the following:</span></span>
<span id="cb4-14"><a href="#cb4-14" aria-hidden="true" tabindex="-1"></a><span class="co">#</span></span>
<span id="cb4-15"><a href="#cb4-15" aria-hidden="true" tabindex="-1"></a><span class="co"># (1) right click on the portion of the page you want to scrape</span></span>
<span id="cb4-16"><a href="#cb4-16" aria-hidden="true" tabindex="-1"></a><span class="co">#     and choose "inspect"</span></span>
<span id="cb4-17"><a href="#cb4-17" aria-hidden="true" tabindex="-1"></a><span class="co"># (2) right click on the portion of the HTML that contains what</span></span>
<span id="cb4-18"><a href="#cb4-18" aria-hidden="true" tabindex="-1"></a><span class="co">#     you want and choose "Copy" and then "Copy Selector"</span></span>
<span id="cb4-19"><a href="#cb4-19" aria-hidden="true" tabindex="-1"></a><span class="co"># </span></span>
<span id="cb4-20"><a href="#cb4-20" aria-hidden="true" tabindex="-1"></a><span class="co"># This gives you a very, very specific selector to get this info.</span></span>
<span id="cb4-21"><a href="#cb4-21" aria-hidden="true" tabindex="-1"></a><span class="co"># </span></span>
<span id="cb4-22"><a href="#cb4-22" aria-hidden="true" tabindex="-1"></a><span class="co"># For exmaple, we followed this process for the first high temperature </span></span>
<span id="cb4-23"><a href="#cb4-23" aria-hidden="true" tabindex="-1"></a><span class="co"># for this webpage and got the following selector. </span></span>
<span id="cb4-24"><a href="#cb4-24" aria-hidden="true" tabindex="-1"></a><span class="co">#</span></span>
<span id="cb4-25"><a href="#cb4-25" aria-hidden="true" tabindex="-1"></a><span class="co"># CSS SELECTOR: (note the leading # on the line below is part of the selector)</span></span>
<span id="cb4-26"><a href="#cb4-26" aria-hidden="true" tabindex="-1"></a><span class="co">#    #seven-day-forecast-list &gt; li:nth-child(1) &gt; div &gt; p.temp.temp-high</span></span>
<span id="cb4-27"><a href="#cb4-27" aria-hidden="true" tabindex="-1"></a><span class="co">#</span></span>
<span id="cb4-28"><a href="#cb4-28" aria-hidden="true" tabindex="-1"></a><span class="co"># </span><span class="al">WARNING</span><span class="co"> - this is a VERY specific selector! You will often need</span></span>
<span id="cb4-29"><a href="#cb4-29" aria-hidden="true" tabindex="-1"></a><span class="co"># to modify this selector so that it is LESS specific and gets </span></span>
<span id="cb4-30"><a href="#cb4-30" aria-hidden="true" tabindex="-1"></a><span class="co"># more than just the one piece of info you clicked on.</span></span>
<span id="cb4-31"><a href="#cb4-31" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb4-32"><a href="#cb4-32" aria-hidden="true" tabindex="-1"></a>weatherPage <span class="ot">=</span> <span class="fu">read_html</span>(url)</span>
<span id="cb4-33"><a href="#cb4-33" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb4-34"><a href="#cb4-34" aria-hidden="true" tabindex="-1"></a>cssSelector <span class="ot">=</span> <span class="st">"#seven-day-forecast-list &gt; li:nth-child(1) &gt; div &gt; p.temp.temp-high"</span></span>
<span id="cb4-35"><a href="#cb4-35" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb4-36"><a href="#cb4-36" aria-hidden="true" tabindex="-1"></a>temperature <span class="ot">=</span> weatherPage <span class="sc">%&gt;%</span></span>
<span id="cb4-37"><a href="#cb4-37" aria-hidden="true" tabindex="-1"></a>  <span class="fu">html_elements</span>( cssSelector ) <span class="sc">%&gt;%</span></span>
<span id="cb4-38"><a href="#cb4-38" aria-hidden="true" tabindex="-1"></a>  <span class="fu">html_text2</span>()</span>
<span id="cb4-39"><a href="#cb4-39" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb4-40"><a href="#cb4-40" aria-hidden="true" tabindex="-1"></a>temperature</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "High: 67 °F"</code></pre>
</div>
<div class="sourceCode cell-code" id="cb6"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb6-1"><a href="#cb6-1" aria-hidden="true" tabindex="-1"></a>x <span class="ot">=</span> <span class="fu">read_html</span>(url)</span>
<span id="cb6-2"><a href="#cb6-2" aria-hidden="true" tabindex="-1"></a>x</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>{html_document}
&lt;html class="no-js"&gt;
[1] &lt;head&gt;\n&lt;meta http-equiv="Content-Type" content="text/html; charset=UTF-8 ...
[2] &lt;body&gt;\n        &lt;main class="container"&gt;&lt;header class="row clearfix" id=" ...</code></pre>
</div>
<div class="sourceCode cell-code" id="cb8"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb8-1"><a href="#cb8-1" aria-hidden="true" tabindex="-1"></a>y <span class="ot">=</span> <span class="fu">html_elements</span>(x, cssSelector )</span>
<span id="cb8-2"><a href="#cb8-2" aria-hidden="true" tabindex="-1"></a>y</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>{xml_nodeset (1)}
[1] &lt;p class="temp temp-high"&gt;High: 67 °F&lt;/p&gt;\n</code></pre>
</div>
<div class="sourceCode cell-code" id="cb10"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb10-1"><a href="#cb10-1" aria-hidden="true" tabindex="-1"></a>z <span class="ot">=</span> <span class="fu">html_text</span>(y)</span>
<span id="cb10-2"><a href="#cb10-2" aria-hidden="true" tabindex="-1"></a>z</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "High: 67 °F"</code></pre>
</div>
<div class="sourceCode cell-code" id="cb12"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb12-1"><a href="#cb12-1" aria-hidden="true" tabindex="-1"></a><span class="co"># What is the structure of x?</span></span>
<span id="cb12-2"><a href="#cb12-2" aria-hidden="true" tabindex="-1"></a><span class="fu">str</span>(x)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>List of 2
 $ node:&lt;externalptr&gt; 
 $ doc :&lt;externalptr&gt; 
 - attr(*, "class")= chr [1:2] "xml_document" "xml_node"</code></pre>
</div>
</div>
</section>
<section id="choosing-better-css-selectors" class="level2" data-number="34.5">
<h2 data-number="34.5" class="anchored" data-anchor-id="choosing-better-css-selectors"><span class="header-section-number">34.5</span> Choosing better CSS Selectors</h2>
<div class="cell">
<div class="sourceCode cell-code" id="cb14"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb14-1"><a href="#cb14-1" aria-hidden="true" tabindex="-1"></a><span class="do">####################################################################.</span></span>
<span id="cb14-2"><a href="#cb14-2" aria-hidden="true" tabindex="-1"></a><span class="co"># If we analyze the HTML code, a MUCH BETTER selector is .temp</span></span>
<span id="cb14-3"><a href="#cb14-3" aria-hidden="true" tabindex="-1"></a><span class="co"># This selects all html elements that have class="temp"</span></span>
<span id="cb14-4"><a href="#cb14-4" aria-hidden="true" tabindex="-1"></a><span class="do">####################################################################.</span></span>
<span id="cb14-5"><a href="#cb14-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb14-6"><a href="#cb14-6" aria-hidden="true" tabindex="-1"></a><span class="co">#------------------------------------------------------------------.</span></span>
<span id="cb14-7"><a href="#cb14-7" aria-hidden="true" tabindex="-1"></a><span class="co"># </span><span class="al">NOTE</span><span class="co">: </span></span>
<span id="cb14-8"><a href="#cb14-8" aria-hidden="true" tabindex="-1"></a><span class="co">#</span></span>
<span id="cb14-9"><a href="#cb14-9" aria-hidden="true" tabindex="-1"></a><span class="co"># When webscraping you should "play nicely" with the website.</span></span>
<span id="cb14-10"><a href="#cb14-10" aria-hidden="true" tabindex="-1"></a><span class="co"># We already read the page above using the following line of code:</span></span>
<span id="cb14-11"><a href="#cb14-11" aria-hidden="true" tabindex="-1"></a><span class="co">#</span></span>
<span id="cb14-12"><a href="#cb14-12" aria-hidden="true" tabindex="-1"></a><span class="co">#    weatherPage = read_html(url)</span></span>
<span id="cb14-13"><a href="#cb14-13" aria-hidden="true" tabindex="-1"></a><span class="co">#</span></span>
<span id="cb14-14"><a href="#cb14-14" aria-hidden="true" tabindex="-1"></a><span class="co"># Don't do this again. Every time you read the page you are causing</span></span>
<span id="cb14-15"><a href="#cb14-15" aria-hidden="true" tabindex="-1"></a><span class="co"># the website to do some work to generate the page. You also use</span></span>
<span id="cb14-16"><a href="#cb14-16" aria-hidden="true" tabindex="-1"></a><span class="co"># network "bandwidth". </span></span>
<span id="cb14-17"><a href="#cb14-17" aria-hidden="true" tabindex="-1"></a><span class="co">#------------------------------------------------------------------.</span></span>
<span id="cb14-18"><a href="#cb14-18" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb14-19"><a href="#cb14-19" aria-hidden="true" tabindex="-1"></a><span class="co"># Don't do this again - we already did it. Read comment above for more info.</span></span>
<span id="cb14-20"><a href="#cb14-20" aria-hidden="true" tabindex="-1"></a><span class="co">#</span></span>
<span id="cb14-21"><a href="#cb14-21" aria-hidden="true" tabindex="-1"></a><span class="co"># weatherPage = read_html(url)</span></span>
<span id="cb14-22"><a href="#cb14-22" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb14-23"><a href="#cb14-23" aria-hidden="true" tabindex="-1"></a>cssSelector <span class="ot">=</span> <span class="st">".temp"</span></span>
<span id="cb14-24"><a href="#cb14-24" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb14-25"><a href="#cb14-25" aria-hidden="true" tabindex="-1"></a>forecasts <span class="ot">&lt;-</span> weatherPage <span class="sc">%&gt;%</span></span>
<span id="cb14-26"><a href="#cb14-26" aria-hidden="true" tabindex="-1"></a>  <span class="fu">html_elements</span>( cssSelector ) <span class="sc">%&gt;%</span></span>
<span id="cb14-27"><a href="#cb14-27" aria-hidden="true" tabindex="-1"></a>  <span class="fu">html_text</span>()</span>
<span id="cb14-28"><a href="#cb14-28" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb14-29"><a href="#cb14-29" aria-hidden="true" tabindex="-1"></a>forecasts</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "High: 67 °F" "Low: 45 °F"  "High: 65 °F" "Low: 46 °F"  "High: 61 °F"
[6] "Low: 44 °F"  "High: 59 °F" "Low: 43 °F"  "High: 60 °F"</code></pre>
</div>
<div class="sourceCode cell-code" id="cb16"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb16-1"><a href="#cb16-1" aria-hidden="true" tabindex="-1"></a>x <span class="ot">=</span> <span class="fu">read_html</span>(url)</span>
<span id="cb16-2"><a href="#cb16-2" aria-hidden="true" tabindex="-1"></a>x</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>{html_document}
&lt;html class="no-js"&gt;
[1] &lt;head&gt;\n&lt;meta http-equiv="Content-Type" content="text/html; charset=UTF-8 ...
[2] &lt;body&gt;\n        &lt;main class="container"&gt;&lt;header class="row clearfix" id=" ...</code></pre>
</div>
<div class="sourceCode cell-code" id="cb18"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb18-1"><a href="#cb18-1" aria-hidden="true" tabindex="-1"></a>y <span class="ot">=</span> <span class="fu">html_elements</span>(x, cssSelector )</span>
<span id="cb18-2"><a href="#cb18-2" aria-hidden="true" tabindex="-1"></a>y</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>{xml_nodeset (9)}
[1] &lt;p class="temp temp-high"&gt;High: 67 °F&lt;/p&gt;\n
[2] &lt;p class="temp temp-low"&gt;Low: 45 °F&lt;/p&gt;\n
[3] &lt;p class="temp temp-high"&gt;High: 65 °F&lt;/p&gt;\n
[4] &lt;p class="temp temp-low"&gt;Low: 46 °F&lt;/p&gt;\n
[5] &lt;p class="temp temp-high"&gt;High: 61 °F&lt;/p&gt;\n
[6] &lt;p class="temp temp-low"&gt;Low: 44 °F&lt;/p&gt;\n
[7] &lt;p class="temp temp-high"&gt;High: 59 °F&lt;/p&gt;\n
[8] &lt;p class="temp temp-low"&gt;Low: 43 °F&lt;/p&gt;\n
[9] &lt;p class="temp temp-high"&gt;High: 60 °F&lt;/p&gt;\n</code></pre>
</div>
<div class="sourceCode cell-code" id="cb20"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb20-1"><a href="#cb20-1" aria-hidden="true" tabindex="-1"></a>z <span class="ot">=</span> <span class="fu">html_text</span>(y)</span>
<span id="cb20-2"><a href="#cb20-2" aria-hidden="true" tabindex="-1"></a>z</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "High: 67 °F" "Low: 45 °F"  "High: 65 °F" "Low: 46 °F"  "High: 61 °F"
[6] "Low: 44 °F"  "High: 59 °F" "Low: 43 °F"  "High: 60 °F"</code></pre>
</div>
<div class="sourceCode cell-code" id="cb22"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb22-1"><a href="#cb22-1" aria-hidden="true" tabindex="-1"></a><span class="co"># What is the structure of x?</span></span>
<span id="cb22-2"><a href="#cb22-2" aria-hidden="true" tabindex="-1"></a><span class="fu">str</span>(x)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>List of 2
 $ node:&lt;externalptr&gt; 
 $ doc :&lt;externalptr&gt; 
 - attr(*, "class")= chr [1:2] "xml_document" "xml_node"</code></pre>
</div>
</div>
</section>
<section id="scraping-country-names" class="level2" data-number="34.6">
<h2 data-number="34.6" class="anchored" data-anchor-id="scraping-country-names"><span class="header-section-number">34.6</span> Scraping country names</h2>
<div class="cell">
<div class="sourceCode cell-code" id="cb24"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb24-1"><a href="#cb24-1" aria-hidden="true" tabindex="-1"></a><span class="do">###########################################################################</span></span>
<span id="cb24-2"><a href="#cb24-2" aria-hidden="true" tabindex="-1"></a><span class="co">#</span></span>
<span id="cb24-3"><a href="#cb24-3" aria-hidden="true" tabindex="-1"></a><span class="co"># Get the country names off the following website</span></span>
<span id="cb24-4"><a href="#cb24-4" aria-hidden="true" tabindex="-1"></a><span class="co">#</span></span>
<span id="cb24-5"><a href="#cb24-5" aria-hidden="true" tabindex="-1"></a><span class="do">###########################################################################</span></span>
<span id="cb24-6"><a href="#cb24-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb24-7"><a href="#cb24-7" aria-hidden="true" tabindex="-1"></a>url <span class="ot">=</span> <span class="st">"https://scrapethissite.com/pages/simple/"</span></span>
<span id="cb24-8"><a href="#cb24-8" aria-hidden="true" tabindex="-1"></a>cssSelector <span class="ot">=</span> <span class="st">".country-name"</span></span>
<span id="cb24-9"><a href="#cb24-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb24-10"><a href="#cb24-10" aria-hidden="true" tabindex="-1"></a>countries <span class="ot">&lt;-</span> <span class="fu">read_html</span>(url) <span class="sc">%&gt;%</span></span>
<span id="cb24-11"><a href="#cb24-11" aria-hidden="true" tabindex="-1"></a>  <span class="fu">html_elements</span>( cssSelector ) <span class="sc">%&gt;%</span></span>
<span id="cb24-12"><a href="#cb24-12" aria-hidden="true" tabindex="-1"></a>  <span class="fu">html_text</span>()</span>
<span id="cb24-13"><a href="#cb24-13" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb24-14"><a href="#cb24-14" aria-hidden="true" tabindex="-1"></a>x <span class="ot">=</span> <span class="fu">read_html</span>(url)</span>
<span id="cb24-15"><a href="#cb24-15" aria-hidden="true" tabindex="-1"></a>x</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>{html_document}
&lt;html lang="en"&gt;
 [1] &lt;head&gt;\n&lt;meta http-equiv="Content-Type" content="text/html; charset=UTF- ...
 [2] &lt;body&gt;\n    &lt;nav id="site-nav"&gt;&lt;div class="container"&gt;\n                 ...
 [3] &lt;script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.3/jquery. ...
 [4] &lt;script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.5/js/bootstra ...
 [5] &lt;script src="https://cdnjs.cloudflare.com/ajax/libs/pnotify/2.1.0/pnotif ...
 [6] &lt;link href="https://cdnjs.cloudflare.com/ajax/libs/pnotify/2.1.0/pnotify ...
 [7] &lt;script type="text/javascript"&gt;\n    \n    PNotify.prototype.options.sty ...
 [8] &lt;script type="text/javascript"&gt;\n    $("video").hover(function() {\n     ...
 [9] &lt;script&gt;\n    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r] ...
[10] &lt;script&gt;\n  !function(f,b,e,v,n,t,s){if(f.fbq)return;n=f.fbq=function(){ ...
[11] &lt;noscript&gt;&lt;img height="1" width="1" style="display:none" src="https://ww ...
[12] &lt;script type="text/javascript"&gt;\n    /* &lt;![CDATA[ */\n    var google_con ...
[13] &lt;script type="text/javascript" src="//www.googleadservices.com/pagead/co ...
[14] &lt;noscript&gt;\n    &lt;div style="display:inline;"&gt;\n    &lt;img height="1" width ...
[15] &lt;script async src="https://www.googletagmanager.com/gtag/js?id=AW-950945 ...
[16] &lt;script&gt;\n   window.dataLayer = window.dataLayer || [];\n   function gta ...</code></pre>
</div>
<div class="sourceCode cell-code" id="cb26"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb26-1"><a href="#cb26-1" aria-hidden="true" tabindex="-1"></a>y <span class="ot">=</span> <span class="fu">html_elements</span>(x, cssSelector)</span>
<span id="cb26-2"><a href="#cb26-2" aria-hidden="true" tabindex="-1"></a>y</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>{xml_nodeset (250)}
 [1] &lt;h3 class="country-name"&gt;\n                            &lt;i class="flag-ic ...
 [2] &lt;h3 class="country-name"&gt;\n                            &lt;i class="flag-ic ...
 [3] &lt;h3 class="country-name"&gt;\n                            &lt;i class="flag-ic ...
 [4] &lt;h3 class="country-name"&gt;\n                            &lt;i class="flag-ic ...
 [5] &lt;h3 class="country-name"&gt;\n                            &lt;i class="flag-ic ...
 [6] &lt;h3 class="country-name"&gt;\n                            &lt;i class="flag-ic ...
 [7] &lt;h3 class="country-name"&gt;\n                            &lt;i class="flag-ic ...
 [8] &lt;h3 class="country-name"&gt;\n                            &lt;i class="flag-ic ...
 [9] &lt;h3 class="country-name"&gt;\n                            &lt;i class="flag-ic ...
[10] &lt;h3 class="country-name"&gt;\n                            &lt;i class="flag-ic ...
[11] &lt;h3 class="country-name"&gt;\n                            &lt;i class="flag-ic ...
[12] &lt;h3 class="country-name"&gt;\n                            &lt;i class="flag-ic ...
[13] &lt;h3 class="country-name"&gt;\n                            &lt;i class="flag-ic ...
[14] &lt;h3 class="country-name"&gt;\n                            &lt;i class="flag-ic ...
[15] &lt;h3 class="country-name"&gt;\n                            &lt;i class="flag-ic ...
[16] &lt;h3 class="country-name"&gt;\n                            &lt;i class="flag-ic ...
[17] &lt;h3 class="country-name"&gt;\n                            &lt;i class="flag-ic ...
[18] &lt;h3 class="country-name"&gt;\n                            &lt;i class="flag-ic ...
[19] &lt;h3 class="country-name"&gt;\n                            &lt;i class="flag-ic ...
[20] &lt;h3 class="country-name"&gt;\n                            &lt;i class="flag-ic ...
...</code></pre>
</div>
<div class="sourceCode cell-code" id="cb28"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb28-1"><a href="#cb28-1" aria-hidden="true" tabindex="-1"></a>z <span class="ot">=</span> <span class="fu">html_text</span>(y)</span>
<span id="cb28-2"><a href="#cb28-2" aria-hidden="true" tabindex="-1"></a>z</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>  [1] "\n                            \n                            Andorra\n                        "                                     
  [2] "\n                            \n                            United Arab Emirates\n                        "                        
  [3] "\n                            \n                            Afghanistan\n                        "                                 
  [4] "\n                            \n                            Antigua and Barbuda\n                        "                         
  [5] "\n                            \n                            Anguilla\n                        "                                    
  [6] "\n                            \n                            Albania\n                        "                                     
  [7] "\n                            \n                            Armenia\n                        "                                     
  [8] "\n                            \n                            Angola\n                        "                                      
  [9] "\n                            \n                            Antarctica\n                        "                                  
 [10] "\n                            \n                            Argentina\n                        "                                   
 [11] "\n                            \n                            American Samoa\n                        "                              
 [12] "\n                            \n                            Austria\n                        "                                     
 [13] "\n                            \n                            Australia\n                        "                                   
 [14] "\n                            \n                            Aruba\n                        "                                       
 [15] "\n                            \n                            Åland\n                        "                                       
 [16] "\n                            \n                            Azerbaijan\n                        "                                  
 [17] "\n                            \n                            Bosnia and Herzegovina\n                        "                      
 [18] "\n                            \n                            Barbados\n                        "                                    
 [19] "\n                            \n                            Bangladesh\n                        "                                  
 [20] "\n                            \n                            Belgium\n                        "                                     
 [21] "\n                            \n                            Burkina Faso\n                        "                                
 [22] "\n                            \n                            Bulgaria\n                        "                                    
 [23] "\n                            \n                            Bahrain\n                        "                                     
 [24] "\n                            \n                            Burundi\n                        "                                     
 [25] "\n                            \n                            Benin\n                        "                                       
 [26] "\n                            \n                            Saint Barthélemy\n                        "                            
 [27] "\n                            \n                            Bermuda\n                        "                                     
 [28] "\n                            \n                            Brunei\n                        "                                      
 [29] "\n                            \n                            Bolivia\n                        "                                     
 [30] "\n                            \n                            Bonaire\n                        "                                     
 [31] "\n                            \n                            Brazil\n                        "                                      
 [32] "\n                            \n                            Bahamas\n                        "                                     
 [33] "\n                            \n                            Bhutan\n                        "                                      
 [34] "\n                            \n                            Bouvet Island\n                        "                               
 [35] "\n                            \n                            Botswana\n                        "                                    
 [36] "\n                            \n                            Belarus\n                        "                                     
 [37] "\n                            \n                            Belize\n                        "                                      
 [38] "\n                            \n                            Canada\n                        "                                      
 [39] "\n                            \n                            Cocos [Keeling] Islands\n                        "                     
 [40] "\n                            \n                            Democratic Republic of the Congo\n                        "            
 [41] "\n                            \n                            Central African Republic\n                        "                    
 [42] "\n                            \n                            Republic of the Congo\n                        "                       
 [43] "\n                            \n                            Switzerland\n                        "                                 
 [44] "\n                            \n                            Ivory Coast\n                        "                                 
 [45] "\n                            \n                            Cook Islands\n                        "                                
 [46] "\n                            \n                            Chile\n                        "                                       
 [47] "\n                            \n                            Cameroon\n                        "                                    
 [48] "\n                            \n                            China\n                        "                                       
 [49] "\n                            \n                            Colombia\n                        "                                    
 [50] "\n                            \n                            Costa Rica\n                        "                                  
 [51] "\n                            \n                            Cuba\n                        "                                        
 [52] "\n                            \n                            Cape Verde\n                        "                                  
 [53] "\n                            \n                            Curacao\n                        "                                     
 [54] "\n                            \n                            Christmas Island\n                        "                            
 [55] "\n                            \n                            Cyprus\n                        "                                      
 [56] "\n                            \n                            Czech Republic\n                        "                              
 [57] "\n                            \n                            Germany\n                        "                                     
 [58] "\n                            \n                            Djibouti\n                        "                                    
 [59] "\n                            \n                            Denmark\n                        "                                     
 [60] "\n                            \n                            Dominica\n                        "                                    
 [61] "\n                            \n                            Dominican Republic\n                        "                          
 [62] "\n                            \n                            Algeria\n                        "                                     
 [63] "\n                            \n                            Ecuador\n                        "                                     
 [64] "\n                            \n                            Estonia\n                        "                                     
 [65] "\n                            \n                            Egypt\n                        "                                       
 [66] "\n                            \n                            Western Sahara\n                        "                              
 [67] "\n                            \n                            Eritrea\n                        "                                     
 [68] "\n                            \n                            Spain\n                        "                                       
 [69] "\n                            \n                            Ethiopia\n                        "                                    
 [70] "\n                            \n                            Finland\n                        "                                     
 [71] "\n                            \n                            Fiji\n                        "                                        
 [72] "\n                            \n                            Falkland Islands\n                        "                            
 [73] "\n                            \n                            Micronesia\n                        "                                  
 [74] "\n                            \n                            Faroe Islands\n                        "                               
 [75] "\n                            \n                            France\n                        "                                      
 [76] "\n                            \n                            Gabon\n                        "                                       
 [77] "\n                            \n                            United Kingdom\n                        "                              
 [78] "\n                            \n                            Grenada\n                        "                                     
 [79] "\n                            \n                            Georgia\n                        "                                     
 [80] "\n                            \n                            French Guiana\n                        "                               
 [81] "\n                            \n                            Guernsey\n                        "                                    
 [82] "\n                            \n                            Ghana\n                        "                                       
 [83] "\n                            \n                            Gibraltar\n                        "                                   
 [84] "\n                            \n                            Greenland\n                        "                                   
 [85] "\n                            \n                            Gambia\n                        "                                      
 [86] "\n                            \n                            Guinea\n                        "                                      
 [87] "\n                            \n                            Guadeloupe\n                        "                                  
 [88] "\n                            \n                            Equatorial Guinea\n                        "                           
 [89] "\n                            \n                            Greece\n                        "                                      
 [90] "\n                            \n                            South Georgia and the South Sandwich Islands\n                        "
 [91] "\n                            \n                            Guatemala\n                        "                                   
 [92] "\n                            \n                            Guam\n                        "                                        
 [93] "\n                            \n                            Guinea-Bissau\n                        "                               
 [94] "\n                            \n                            Guyana\n                        "                                      
 [95] "\n                            \n                            Hong Kong\n                        "                                   
 [96] "\n                            \n                            Heard Island and McDonald Islands\n                        "           
 [97] "\n                            \n                            Honduras\n                        "                                    
 [98] "\n                            \n                            Croatia\n                        "                                     
 [99] "\n                            \n                            Haiti\n                        "                                       
[100] "\n                            \n                            Hungary\n                        "                                     
[101] "\n                            \n                            Indonesia\n                        "                                   
[102] "\n                            \n                            Ireland\n                        "                                     
[103] "\n                            \n                            Israel\n                        "                                      
[104] "\n                            \n                            Isle of Man\n                        "                                 
[105] "\n                            \n                            India\n                        "                                       
[106] "\n                            \n                            British Indian Ocean Territory\n                        "              
[107] "\n                            \n                            Iraq\n                        "                                        
[108] "\n                            \n                            Iran\n                        "                                        
[109] "\n                            \n                            Iceland\n                        "                                     
[110] "\n                            \n                            Italy\n                        "                                       
[111] "\n                            \n                            Jersey\n                        "                                      
[112] "\n                            \n                            Jamaica\n                        "                                     
[113] "\n                            \n                            Jordan\n                        "                                      
[114] "\n                            \n                            Japan\n                        "                                       
[115] "\n                            \n                            Kenya\n                        "                                       
[116] "\n                            \n                            Kyrgyzstan\n                        "                                  
[117] "\n                            \n                            Cambodia\n                        "                                    
[118] "\n                            \n                            Kiribati\n                        "                                    
[119] "\n                            \n                            Comoros\n                        "                                     
[120] "\n                            \n                            Saint Kitts and Nevis\n                        "                       
[121] "\n                            \n                            North Korea\n                        "                                 
[122] "\n                            \n                            South Korea\n                        "                                 
[123] "\n                            \n                            Kuwait\n                        "                                      
[124] "\n                            \n                            Cayman Islands\n                        "                              
[125] "\n                            \n                            Kazakhstan\n                        "                                  
[126] "\n                            \n                            Laos\n                        "                                        
[127] "\n                            \n                            Lebanon\n                        "                                     
[128] "\n                            \n                            Saint Lucia\n                        "                                 
[129] "\n                            \n                            Liechtenstein\n                        "                               
[130] "\n                            \n                            Sri Lanka\n                        "                                   
[131] "\n                            \n                            Liberia\n                        "                                     
[132] "\n                            \n                            Lesotho\n                        "                                     
[133] "\n                            \n                            Lithuania\n                        "                                   
[134] "\n                            \n                            Luxembourg\n                        "                                  
[135] "\n                            \n                            Latvia\n                        "                                      
[136] "\n                            \n                            Libya\n                        "                                       
[137] "\n                            \n                            Morocco\n                        "                                     
[138] "\n                            \n                            Monaco\n                        "                                      
[139] "\n                            \n                            Moldova\n                        "                                     
[140] "\n                            \n                            Montenegro\n                        "                                  
[141] "\n                            \n                            Saint Martin\n                        "                                
[142] "\n                            \n                            Madagascar\n                        "                                  
[143] "\n                            \n                            Marshall Islands\n                        "                            
[144] "\n                            \n                            Macedonia\n                        "                                   
[145] "\n                            \n                            Mali\n                        "                                        
[146] "\n                            \n                            Myanmar [Burma]\n                        "                             
[147] "\n                            \n                            Mongolia\n                        "                                    
[148] "\n                            \n                            Macao\n                        "                                       
[149] "\n                            \n                            Northern Mariana Islands\n                        "                    
[150] "\n                            \n                            Martinique\n                        "                                  
[151] "\n                            \n                            Mauritania\n                        "                                  
[152] "\n                            \n                            Montserrat\n                        "                                  
[153] "\n                            \n                            Malta\n                        "                                       
[154] "\n                            \n                            Mauritius\n                        "                                   
[155] "\n                            \n                            Maldives\n                        "                                    
[156] "\n                            \n                            Malawi\n                        "                                      
[157] "\n                            \n                            Mexico\n                        "                                      
[158] "\n                            \n                            Malaysia\n                        "                                    
[159] "\n                            \n                            Mozambique\n                        "                                  
[160] "\n                            \n                            Namibia\n                        "                                     
[161] "\n                            \n                            New Caledonia\n                        "                               
[162] "\n                            \n                            Niger\n                        "                                       
[163] "\n                            \n                            Norfolk Island\n                        "                              
[164] "\n                            \n                            Nigeria\n                        "                                     
[165] "\n                            \n                            Nicaragua\n                        "                                   
[166] "\n                            \n                            Netherlands\n                        "                                 
[167] "\n                            \n                            Norway\n                        "                                      
[168] "\n                            \n                            Nepal\n                        "                                       
[169] "\n                            \n                            Nauru\n                        "                                       
[170] "\n                            \n                            Niue\n                        "                                        
[171] "\n                            \n                            New Zealand\n                        "                                 
[172] "\n                            \n                            Oman\n                        "                                        
[173] "\n                            \n                            Panama\n                        "                                      
[174] "\n                            \n                            Peru\n                        "                                        
[175] "\n                            \n                            French Polynesia\n                        "                            
[176] "\n                            \n                            Papua New Guinea\n                        "                            
[177] "\n                            \n                            Philippines\n                        "                                 
[178] "\n                            \n                            Pakistan\n                        "                                    
[179] "\n                            \n                            Poland\n                        "                                      
[180] "\n                            \n                            Saint Pierre and Miquelon\n                        "                   
[181] "\n                            \n                            Pitcairn Islands\n                        "                            
[182] "\n                            \n                            Puerto Rico\n                        "                                 
[183] "\n                            \n                            Palestine\n                        "                                   
[184] "\n                            \n                            Portugal\n                        "                                    
[185] "\n                            \n                            Palau\n                        "                                       
[186] "\n                            \n                            Paraguay\n                        "                                    
[187] "\n                            \n                            Qatar\n                        "                                       
[188] "\n                            \n                            Réunion\n                        "                                     
[189] "\n                            \n                            Romania\n                        "                                     
[190] "\n                            \n                            Serbia\n                        "                                      
[191] "\n                            \n                            Russia\n                        "                                      
[192] "\n                            \n                            Rwanda\n                        "                                      
[193] "\n                            \n                            Saudi Arabia\n                        "                                
[194] "\n                            \n                            Solomon Islands\n                        "                             
[195] "\n                            \n                            Seychelles\n                        "                                  
[196] "\n                            \n                            Sudan\n                        "                                       
[197] "\n                            \n                            Sweden\n                        "                                      
[198] "\n                            \n                            Singapore\n                        "                                   
[199] "\n                            \n                            Saint Helena\n                        "                                
[200] "\n                            \n                            Slovenia\n                        "                                    
[201] "\n                            \n                            Svalbard and Jan Mayen\n                        "                      
[202] "\n                            \n                            Slovakia\n                        "                                    
[203] "\n                            \n                            Sierra Leone\n                        "                                
[204] "\n                            \n                            San Marino\n                        "                                  
[205] "\n                            \n                            Senegal\n                        "                                     
[206] "\n                            \n                            Somalia\n                        "                                     
[207] "\n                            \n                            Suriname\n                        "                                    
[208] "\n                            \n                            South Sudan\n                        "                                 
[209] "\n                            \n                            São Tomé and Príncipe\n                        "                       
[210] "\n                            \n                            El Salvador\n                        "                                 
[211] "\n                            \n                            Sint Maarten\n                        "                                
[212] "\n                            \n                            Syria\n                        "                                       
[213] "\n                            \n                            Swaziland\n                        "                                   
[214] "\n                            \n                            Turks and Caicos Islands\n                        "                    
[215] "\n                            \n                            Chad\n                        "                                        
[216] "\n                            \n                            French Southern Territories\n                        "                 
[217] "\n                            \n                            Togo\n                        "                                        
[218] "\n                            \n                            Thailand\n                        "                                    
[219] "\n                            \n                            Tajikistan\n                        "                                  
[220] "\n                            \n                            Tokelau\n                        "                                     
[221] "\n                            \n                            East Timor\n                        "                                  
[222] "\n                            \n                            Turkmenistan\n                        "                                
[223] "\n                            \n                            Tunisia\n                        "                                     
[224] "\n                            \n                            Tonga\n                        "                                       
[225] "\n                            \n                            Turkey\n                        "                                      
[226] "\n                            \n                            Trinidad and Tobago\n                        "                         
[227] "\n                            \n                            Tuvalu\n                        "                                      
[228] "\n                            \n                            Taiwan\n                        "                                      
[229] "\n                            \n                            Tanzania\n                        "                                    
[230] "\n                            \n                            Ukraine\n                        "                                     
[231] "\n                            \n                            Uganda\n                        "                                      
[232] "\n                            \n                            U.S. Minor Outlying Islands\n                        "                 
[233] "\n                            \n                            United States\n                        "                               
[234] "\n                            \n                            Uruguay\n                        "                                     
[235] "\n                            \n                            Uzbekistan\n                        "                                  
[236] "\n                            \n                            Vatican City\n                        "                                
[237] "\n                            \n                            Saint Vincent and the Grenadines\n                        "            
[238] "\n                            \n                            Venezuela\n                        "                                   
[239] "\n                            \n                            British Virgin Islands\n                        "                      
[240] "\n                            \n                            U.S. Virgin Islands\n                        "                         
[241] "\n                            \n                            Vietnam\n                        "                                     
[242] "\n                            \n                            Vanuatu\n                        "                                     
[243] "\n                            \n                            Wallis and Futuna\n                        "                           
[244] "\n                            \n                            Samoa\n                        "                                       
[245] "\n                            \n                            Kosovo\n                        "                                      
[246] "\n                            \n                            Yemen\n                        "                                       
[247] "\n                            \n                            Mayotte\n                        "                                     
[248] "\n                            \n                            South Africa\n                        "                                
[249] "\n                            \n                            Zambia\n                        "                                      
[250] "\n                            \n                            Zimbabwe\n                        "                                    </code></pre>
</div>
<div class="sourceCode cell-code" id="cb30"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb30-1"><a href="#cb30-1" aria-hidden="true" tabindex="-1"></a><span class="co">#..............................................................................</span></span>
<span id="cb30-2"><a href="#cb30-2" aria-hidden="true" tabindex="-1"></a><span class="co"># Let's examine the results.</span></span>
<span id="cb30-3"><a href="#cb30-3" aria-hidden="true" tabindex="-1"></a><span class="co"># </span></span>
<span id="cb30-4"><a href="#cb30-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Notice that the results includes the newlines (\n) and blanks from the .html</span></span>
<span id="cb30-5"><a href="#cb30-5" aria-hidden="true" tabindex="-1"></a><span class="co"># file. This is because we picked up EVERYTHING that appears between the</span></span>
<span id="cb30-6"><a href="#cb30-6" aria-hidden="true" tabindex="-1"></a><span class="co"># start tag and end tag in the HTML.</span></span>
<span id="cb30-7"><a href="#cb30-7" aria-hidden="true" tabindex="-1"></a><span class="co">#</span></span>
<span id="cb30-8"><a href="#cb30-8" aria-hidden="true" tabindex="-1"></a><span class="co"># Below, we will see how to fix up the results below by using the gsub function.</span></span>
<span id="cb30-9"><a href="#cb30-9" aria-hidden="true" tabindex="-1"></a><span class="co">#..............................................................................</span></span>
<span id="cb30-10"><a href="#cb30-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb30-11"><a href="#cb30-11" aria-hidden="true" tabindex="-1"></a>countries  </span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>  [1] "\n                            \n                            Andorra\n                        "                                     
  [2] "\n                            \n                            United Arab Emirates\n                        "                        
  [3] "\n                            \n                            Afghanistan\n                        "                                 
  [4] "\n                            \n                            Antigua and Barbuda\n                        "                         
  [5] "\n                            \n                            Anguilla\n                        "                                    
  [6] "\n                            \n                            Albania\n                        "                                     
  [7] "\n                            \n                            Armenia\n                        "                                     
  [8] "\n                            \n                            Angola\n                        "                                      
  [9] "\n                            \n                            Antarctica\n                        "                                  
 [10] "\n                            \n                            Argentina\n                        "                                   
 [11] "\n                            \n                            American Samoa\n                        "                              
 [12] "\n                            \n                            Austria\n                        "                                     
 [13] "\n                            \n                            Australia\n                        "                                   
 [14] "\n                            \n                            Aruba\n                        "                                       
 [15] "\n                            \n                            Åland\n                        "                                       
 [16] "\n                            \n                            Azerbaijan\n                        "                                  
 [17] "\n                            \n                            Bosnia and Herzegovina\n                        "                      
 [18] "\n                            \n                            Barbados\n                        "                                    
 [19] "\n                            \n                            Bangladesh\n                        "                                  
 [20] "\n                            \n                            Belgium\n                        "                                     
 [21] "\n                            \n                            Burkina Faso\n                        "                                
 [22] "\n                            \n                            Bulgaria\n                        "                                    
 [23] "\n                            \n                            Bahrain\n                        "                                     
 [24] "\n                            \n                            Burundi\n                        "                                     
 [25] "\n                            \n                            Benin\n                        "                                       
 [26] "\n                            \n                            Saint Barthélemy\n                        "                            
 [27] "\n                            \n                            Bermuda\n                        "                                     
 [28] "\n                            \n                            Brunei\n                        "                                      
 [29] "\n                            \n                            Bolivia\n                        "                                     
 [30] "\n                            \n                            Bonaire\n                        "                                     
 [31] "\n                            \n                            Brazil\n                        "                                      
 [32] "\n                            \n                            Bahamas\n                        "                                     
 [33] "\n                            \n                            Bhutan\n                        "                                      
 [34] "\n                            \n                            Bouvet Island\n                        "                               
 [35] "\n                            \n                            Botswana\n                        "                                    
 [36] "\n                            \n                            Belarus\n                        "                                     
 [37] "\n                            \n                            Belize\n                        "                                      
 [38] "\n                            \n                            Canada\n                        "                                      
 [39] "\n                            \n                            Cocos [Keeling] Islands\n                        "                     
 [40] "\n                            \n                            Democratic Republic of the Congo\n                        "            
 [41] "\n                            \n                            Central African Republic\n                        "                    
 [42] "\n                            \n                            Republic of the Congo\n                        "                       
 [43] "\n                            \n                            Switzerland\n                        "                                 
 [44] "\n                            \n                            Ivory Coast\n                        "                                 
 [45] "\n                            \n                            Cook Islands\n                        "                                
 [46] "\n                            \n                            Chile\n                        "                                       
 [47] "\n                            \n                            Cameroon\n                        "                                    
 [48] "\n                            \n                            China\n                        "                                       
 [49] "\n                            \n                            Colombia\n                        "                                    
 [50] "\n                            \n                            Costa Rica\n                        "                                  
 [51] "\n                            \n                            Cuba\n                        "                                        
 [52] "\n                            \n                            Cape Verde\n                        "                                  
 [53] "\n                            \n                            Curacao\n                        "                                     
 [54] "\n                            \n                            Christmas Island\n                        "                            
 [55] "\n                            \n                            Cyprus\n                        "                                      
 [56] "\n                            \n                            Czech Republic\n                        "                              
 [57] "\n                            \n                            Germany\n                        "                                     
 [58] "\n                            \n                            Djibouti\n                        "                                    
 [59] "\n                            \n                            Denmark\n                        "                                     
 [60] "\n                            \n                            Dominica\n                        "                                    
 [61] "\n                            \n                            Dominican Republic\n                        "                          
 [62] "\n                            \n                            Algeria\n                        "                                     
 [63] "\n                            \n                            Ecuador\n                        "                                     
 [64] "\n                            \n                            Estonia\n                        "                                     
 [65] "\n                            \n                            Egypt\n                        "                                       
 [66] "\n                            \n                            Western Sahara\n                        "                              
 [67] "\n                            \n                            Eritrea\n                        "                                     
 [68] "\n                            \n                            Spain\n                        "                                       
 [69] "\n                            \n                            Ethiopia\n                        "                                    
 [70] "\n                            \n                            Finland\n                        "                                     
 [71] "\n                            \n                            Fiji\n                        "                                        
 [72] "\n                            \n                            Falkland Islands\n                        "                            
 [73] "\n                            \n                            Micronesia\n                        "                                  
 [74] "\n                            \n                            Faroe Islands\n                        "                               
 [75] "\n                            \n                            France\n                        "                                      
 [76] "\n                            \n                            Gabon\n                        "                                       
 [77] "\n                            \n                            United Kingdom\n                        "                              
 [78] "\n                            \n                            Grenada\n                        "                                     
 [79] "\n                            \n                            Georgia\n                        "                                     
 [80] "\n                            \n                            French Guiana\n                        "                               
 [81] "\n                            \n                            Guernsey\n                        "                                    
 [82] "\n                            \n                            Ghana\n                        "                                       
 [83] "\n                            \n                            Gibraltar\n                        "                                   
 [84] "\n                            \n                            Greenland\n                        "                                   
 [85] "\n                            \n                            Gambia\n                        "                                      
 [86] "\n                            \n                            Guinea\n                        "                                      
 [87] "\n                            \n                            Guadeloupe\n                        "                                  
 [88] "\n                            \n                            Equatorial Guinea\n                        "                           
 [89] "\n                            \n                            Greece\n                        "                                      
 [90] "\n                            \n                            South Georgia and the South Sandwich Islands\n                        "
 [91] "\n                            \n                            Guatemala\n                        "                                   
 [92] "\n                            \n                            Guam\n                        "                                        
 [93] "\n                            \n                            Guinea-Bissau\n                        "                               
 [94] "\n                            \n                            Guyana\n                        "                                      
 [95] "\n                            \n                            Hong Kong\n                        "                                   
 [96] "\n                            \n                            Heard Island and McDonald Islands\n                        "           
 [97] "\n                            \n                            Honduras\n                        "                                    
 [98] "\n                            \n                            Croatia\n                        "                                     
 [99] "\n                            \n                            Haiti\n                        "                                       
[100] "\n                            \n                            Hungary\n                        "                                     
[101] "\n                            \n                            Indonesia\n                        "                                   
[102] "\n                            \n                            Ireland\n                        "                                     
[103] "\n                            \n                            Israel\n                        "                                      
[104] "\n                            \n                            Isle of Man\n                        "                                 
[105] "\n                            \n                            India\n                        "                                       
[106] "\n                            \n                            British Indian Ocean Territory\n                        "              
[107] "\n                            \n                            Iraq\n                        "                                        
[108] "\n                            \n                            Iran\n                        "                                        
[109] "\n                            \n                            Iceland\n                        "                                     
[110] "\n                            \n                            Italy\n                        "                                       
[111] "\n                            \n                            Jersey\n                        "                                      
[112] "\n                            \n                            Jamaica\n                        "                                     
[113] "\n                            \n                            Jordan\n                        "                                      
[114] "\n                            \n                            Japan\n                        "                                       
[115] "\n                            \n                            Kenya\n                        "                                       
[116] "\n                            \n                            Kyrgyzstan\n                        "                                  
[117] "\n                            \n                            Cambodia\n                        "                                    
[118] "\n                            \n                            Kiribati\n                        "                                    
[119] "\n                            \n                            Comoros\n                        "                                     
[120] "\n                            \n                            Saint Kitts and Nevis\n                        "                       
[121] "\n                            \n                            North Korea\n                        "                                 
[122] "\n                            \n                            South Korea\n                        "                                 
[123] "\n                            \n                            Kuwait\n                        "                                      
[124] "\n                            \n                            Cayman Islands\n                        "                              
[125] "\n                            \n                            Kazakhstan\n                        "                                  
[126] "\n                            \n                            Laos\n                        "                                        
[127] "\n                            \n                            Lebanon\n                        "                                     
[128] "\n                            \n                            Saint Lucia\n                        "                                 
[129] "\n                            \n                            Liechtenstein\n                        "                               
[130] "\n                            \n                            Sri Lanka\n                        "                                   
[131] "\n                            \n                            Liberia\n                        "                                     
[132] "\n                            \n                            Lesotho\n                        "                                     
[133] "\n                            \n                            Lithuania\n                        "                                   
[134] "\n                            \n                            Luxembourg\n                        "                                  
[135] "\n                            \n                            Latvia\n                        "                                      
[136] "\n                            \n                            Libya\n                        "                                       
[137] "\n                            \n                            Morocco\n                        "                                     
[138] "\n                            \n                            Monaco\n                        "                                      
[139] "\n                            \n                            Moldova\n                        "                                     
[140] "\n                            \n                            Montenegro\n                        "                                  
[141] "\n                            \n                            Saint Martin\n                        "                                
[142] "\n                            \n                            Madagascar\n                        "                                  
[143] "\n                            \n                            Marshall Islands\n                        "                            
[144] "\n                            \n                            Macedonia\n                        "                                   
[145] "\n                            \n                            Mali\n                        "                                        
[146] "\n                            \n                            Myanmar [Burma]\n                        "                             
[147] "\n                            \n                            Mongolia\n                        "                                    
[148] "\n                            \n                            Macao\n                        "                                       
[149] "\n                            \n                            Northern Mariana Islands\n                        "                    
[150] "\n                            \n                            Martinique\n                        "                                  
[151] "\n                            \n                            Mauritania\n                        "                                  
[152] "\n                            \n                            Montserrat\n                        "                                  
[153] "\n                            \n                            Malta\n                        "                                       
[154] "\n                            \n                            Mauritius\n                        "                                   
[155] "\n                            \n                            Maldives\n                        "                                    
[156] "\n                            \n                            Malawi\n                        "                                      
[157] "\n                            \n                            Mexico\n                        "                                      
[158] "\n                            \n                            Malaysia\n                        "                                    
[159] "\n                            \n                            Mozambique\n                        "                                  
[160] "\n                            \n                            Namibia\n                        "                                     
[161] "\n                            \n                            New Caledonia\n                        "                               
[162] "\n                            \n                            Niger\n                        "                                       
[163] "\n                            \n                            Norfolk Island\n                        "                              
[164] "\n                            \n                            Nigeria\n                        "                                     
[165] "\n                            \n                            Nicaragua\n                        "                                   
[166] "\n                            \n                            Netherlands\n                        "                                 
[167] "\n                            \n                            Norway\n                        "                                      
[168] "\n                            \n                            Nepal\n                        "                                       
[169] "\n                            \n                            Nauru\n                        "                                       
[170] "\n                            \n                            Niue\n                        "                                        
[171] "\n                            \n                            New Zealand\n                        "                                 
[172] "\n                            \n                            Oman\n                        "                                        
[173] "\n                            \n                            Panama\n                        "                                      
[174] "\n                            \n                            Peru\n                        "                                        
[175] "\n                            \n                            French Polynesia\n                        "                            
[176] "\n                            \n                            Papua New Guinea\n                        "                            
[177] "\n                            \n                            Philippines\n                        "                                 
[178] "\n                            \n                            Pakistan\n                        "                                    
[179] "\n                            \n                            Poland\n                        "                                      
[180] "\n                            \n                            Saint Pierre and Miquelon\n                        "                   
[181] "\n                            \n                            Pitcairn Islands\n                        "                            
[182] "\n                            \n                            Puerto Rico\n                        "                                 
[183] "\n                            \n                            Palestine\n                        "                                   
[184] "\n                            \n                            Portugal\n                        "                                    
[185] "\n                            \n                            Palau\n                        "                                       
[186] "\n                            \n                            Paraguay\n                        "                                    
[187] "\n                            \n                            Qatar\n                        "                                       
[188] "\n                            \n                            Réunion\n                        "                                     
[189] "\n                            \n                            Romania\n                        "                                     
[190] "\n                            \n                            Serbia\n                        "                                      
[191] "\n                            \n                            Russia\n                        "                                      
[192] "\n                            \n                            Rwanda\n                        "                                      
[193] "\n                            \n                            Saudi Arabia\n                        "                                
[194] "\n                            \n                            Solomon Islands\n                        "                             
[195] "\n                            \n                            Seychelles\n                        "                                  
[196] "\n                            \n                            Sudan\n                        "                                       
[197] "\n                            \n                            Sweden\n                        "                                      
[198] "\n                            \n                            Singapore\n                        "                                   
[199] "\n                            \n                            Saint Helena\n                        "                                
[200] "\n                            \n                            Slovenia\n                        "                                    
[201] "\n                            \n                            Svalbard and Jan Mayen\n                        "                      
[202] "\n                            \n                            Slovakia\n                        "                                    
[203] "\n                            \n                            Sierra Leone\n                        "                                
[204] "\n                            \n                            San Marino\n                        "                                  
[205] "\n                            \n                            Senegal\n                        "                                     
[206] "\n                            \n                            Somalia\n                        "                                     
[207] "\n                            \n                            Suriname\n                        "                                    
[208] "\n                            \n                            South Sudan\n                        "                                 
[209] "\n                            \n                            São Tomé and Príncipe\n                        "                       
[210] "\n                            \n                            El Salvador\n                        "                                 
[211] "\n                            \n                            Sint Maarten\n                        "                                
[212] "\n                            \n                            Syria\n                        "                                       
[213] "\n                            \n                            Swaziland\n                        "                                   
[214] "\n                            \n                            Turks and Caicos Islands\n                        "                    
[215] "\n                            \n                            Chad\n                        "                                        
[216] "\n                            \n                            French Southern Territories\n                        "                 
[217] "\n                            \n                            Togo\n                        "                                        
[218] "\n                            \n                            Thailand\n                        "                                    
[219] "\n                            \n                            Tajikistan\n                        "                                  
[220] "\n                            \n                            Tokelau\n                        "                                     
[221] "\n                            \n                            East Timor\n                        "                                  
[222] "\n                            \n                            Turkmenistan\n                        "                                
[223] "\n                            \n                            Tunisia\n                        "                                     
[224] "\n                            \n                            Tonga\n                        "                                       
[225] "\n                            \n                            Turkey\n                        "                                      
[226] "\n                            \n                            Trinidad and Tobago\n                        "                         
[227] "\n                            \n                            Tuvalu\n                        "                                      
[228] "\n                            \n                            Taiwan\n                        "                                      
[229] "\n                            \n                            Tanzania\n                        "                                    
[230] "\n                            \n                            Ukraine\n                        "                                     
[231] "\n                            \n                            Uganda\n                        "                                      
[232] "\n                            \n                            U.S. Minor Outlying Islands\n                        "                 
[233] "\n                            \n                            United States\n                        "                               
[234] "\n                            \n                            Uruguay\n                        "                                     
[235] "\n                            \n                            Uzbekistan\n                        "                                  
[236] "\n                            \n                            Vatican City\n                        "                                
[237] "\n                            \n                            Saint Vincent and the Grenadines\n                        "            
[238] "\n                            \n                            Venezuela\n                        "                                   
[239] "\n                            \n                            British Virgin Islands\n                        "                      
[240] "\n                            \n                            U.S. Virgin Islands\n                        "                         
[241] "\n                            \n                            Vietnam\n                        "                                     
[242] "\n                            \n                            Vanuatu\n                        "                                     
[243] "\n                            \n                            Wallis and Futuna\n                        "                           
[244] "\n                            \n                            Samoa\n                        "                                       
[245] "\n                            \n                            Kosovo\n                        "                                      
[246] "\n                            \n                            Yemen\n                        "                                       
[247] "\n                            \n                            Mayotte\n                        "                                     
[248] "\n                            \n                            South Africa\n                        "                                
[249] "\n                            \n                            Zambia\n                        "                                      
[250] "\n                            \n                            Zimbabwe\n                        "                                    </code></pre>
</div>
</div>
</section>
<section id="same-thing-without-pipes" class="level2" data-number="34.7">
<h2 data-number="34.7" class="anchored" data-anchor-id="same-thing-without-pipes"><span class="header-section-number">34.7</span> Same thing without pipes</h2>
<div class="cell">
<div class="sourceCode cell-code" id="cb32"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb32-1"><a href="#cb32-1" aria-hidden="true" tabindex="-1"></a><span class="do">###########################################################################</span></span>
<span id="cb32-2"><a href="#cb32-2" aria-hidden="true" tabindex="-1"></a><span class="co">#</span></span>
<span id="cb32-3"><a href="#cb32-3" aria-hidden="true" tabindex="-1"></a><span class="co"># same thing a slightly different way (without magrittr pipes)</span></span>
<span id="cb32-4"><a href="#cb32-4" aria-hidden="true" tabindex="-1"></a><span class="co">#</span></span>
<span id="cb32-5"><a href="#cb32-5" aria-hidden="true" tabindex="-1"></a><span class="do">###########################################################################</span></span>
<span id="cb32-6"><a href="#cb32-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb32-7"><a href="#cb32-7" aria-hidden="true" tabindex="-1"></a>url <span class="ot">=</span> <span class="st">"https://scrapethissite.com/pages/simple/"</span></span>
<span id="cb32-8"><a href="#cb32-8" aria-hidden="true" tabindex="-1"></a>cssSelector <span class="ot">=</span> <span class="st">".country-name"</span></span>
<span id="cb32-9"><a href="#cb32-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb32-10"><a href="#cb32-10" aria-hidden="true" tabindex="-1"></a>whole_html_page <span class="ot">=</span> <span class="fu">read_html</span>(url)</span>
<span id="cb32-11"><a href="#cb32-11" aria-hidden="true" tabindex="-1"></a>country_name_html <span class="ot">=</span>  <span class="fu">html_elements</span>( whole_html_page, cssSelector )</span>
<span id="cb32-12"><a href="#cb32-12" aria-hidden="true" tabindex="-1"></a>just_the_text <span class="ot">=</span>   <span class="fu">html_text</span>(country_name_html)</span>
<span id="cb32-13"><a href="#cb32-13" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb32-14"><a href="#cb32-14" aria-hidden="true" tabindex="-1"></a><span class="co">#...........................</span></span>
<span id="cb32-15"><a href="#cb32-15" aria-hidden="true" tabindex="-1"></a><span class="co"># Let's examine each part </span></span>
<span id="cb32-16"><a href="#cb32-16" aria-hidden="true" tabindex="-1"></a><span class="co">#...........................</span></span>
<span id="cb32-17"><a href="#cb32-17" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb32-18"><a href="#cb32-18" aria-hidden="true" tabindex="-1"></a><span class="co"># the contents of the entire HTML page</span></span>
<span id="cb32-19"><a href="#cb32-19" aria-hidden="true" tabindex="-1"></a>whole_html_page      </span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>{html_document}
&lt;html lang="en"&gt;
 [1] &lt;head&gt;\n&lt;meta http-equiv="Content-Type" content="text/html; charset=UTF- ...
 [2] &lt;body&gt;\n    &lt;nav id="site-nav"&gt;&lt;div class="container"&gt;\n                 ...
 [3] &lt;script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.3/jquery. ...
 [4] &lt;script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.5/js/bootstra ...
 [5] &lt;script src="https://cdnjs.cloudflare.com/ajax/libs/pnotify/2.1.0/pnotif ...
 [6] &lt;link href="https://cdnjs.cloudflare.com/ajax/libs/pnotify/2.1.0/pnotify ...
 [7] &lt;script type="text/javascript"&gt;\n    \n    PNotify.prototype.options.sty ...
 [8] &lt;script type="text/javascript"&gt;\n    $("video").hover(function() {\n     ...
 [9] &lt;script&gt;\n    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r] ...
[10] &lt;script&gt;\n  !function(f,b,e,v,n,t,s){if(f.fbq)return;n=f.fbq=function(){ ...
[11] &lt;noscript&gt;&lt;img height="1" width="1" style="display:none" src="https://ww ...
[12] &lt;script type="text/javascript"&gt;\n    /* &lt;![CDATA[ */\n    var google_con ...
[13] &lt;script type="text/javascript" src="//www.googleadservices.com/pagead/co ...
[14] &lt;noscript&gt;\n    &lt;div style="display:inline;"&gt;\n    &lt;img height="1" width ...
[15] &lt;script async src="https://www.googletagmanager.com/gtag/js?id=AW-950945 ...
[16] &lt;script&gt;\n   window.dataLayer = window.dataLayer || [];\n   function gta ...</code></pre>
</div>
<div class="sourceCode cell-code" id="cb34"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb34-1"><a href="#cb34-1" aria-hidden="true" tabindex="-1"></a><span class="co"># just the HTML tags that we targeted with the cssSelector</span></span>
<span id="cb34-2"><a href="#cb34-2" aria-hidden="true" tabindex="-1"></a>country_name_html    </span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>{xml_nodeset (250)}
 [1] &lt;h3 class="country-name"&gt;\n                            &lt;i class="flag-ic ...
 [2] &lt;h3 class="country-name"&gt;\n                            &lt;i class="flag-ic ...
 [3] &lt;h3 class="country-name"&gt;\n                            &lt;i class="flag-ic ...
 [4] &lt;h3 class="country-name"&gt;\n                            &lt;i class="flag-ic ...
 [5] &lt;h3 class="country-name"&gt;\n                            &lt;i class="flag-ic ...
 [6] &lt;h3 class="country-name"&gt;\n                            &lt;i class="flag-ic ...
 [7] &lt;h3 class="country-name"&gt;\n                            &lt;i class="flag-ic ...
 [8] &lt;h3 class="country-name"&gt;\n                            &lt;i class="flag-ic ...
 [9] &lt;h3 class="country-name"&gt;\n                            &lt;i class="flag-ic ...
[10] &lt;h3 class="country-name"&gt;\n                            &lt;i class="flag-ic ...
[11] &lt;h3 class="country-name"&gt;\n                            &lt;i class="flag-ic ...
[12] &lt;h3 class="country-name"&gt;\n                            &lt;i class="flag-ic ...
[13] &lt;h3 class="country-name"&gt;\n                            &lt;i class="flag-ic ...
[14] &lt;h3 class="country-name"&gt;\n                            &lt;i class="flag-ic ...
[15] &lt;h3 class="country-name"&gt;\n                            &lt;i class="flag-ic ...
[16] &lt;h3 class="country-name"&gt;\n                            &lt;i class="flag-ic ...
[17] &lt;h3 class="country-name"&gt;\n                            &lt;i class="flag-ic ...
[18] &lt;h3 class="country-name"&gt;\n                            &lt;i class="flag-ic ...
[19] &lt;h3 class="country-name"&gt;\n                            &lt;i class="flag-ic ...
[20] &lt;h3 class="country-name"&gt;\n                            &lt;i class="flag-ic ...
...</code></pre>
</div>
<div class="sourceCode cell-code" id="cb36"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb36-1"><a href="#cb36-1" aria-hidden="true" tabindex="-1"></a><span class="co"># remove the actual start and end tags ... leaving just the text.</span></span>
<span id="cb36-2"><a href="#cb36-2" aria-hidden="true" tabindex="-1"></a><span class="co"># again ... notice that this picked up the newlines (\n) and blanks from the .html file</span></span>
<span id="cb36-3"><a href="#cb36-3" aria-hidden="true" tabindex="-1"></a>just_the_text  </span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>  [1] "\n                            \n                            Andorra\n                        "                                     
  [2] "\n                            \n                            United Arab Emirates\n                        "                        
  [3] "\n                            \n                            Afghanistan\n                        "                                 
  [4] "\n                            \n                            Antigua and Barbuda\n                        "                         
  [5] "\n                            \n                            Anguilla\n                        "                                    
  [6] "\n                            \n                            Albania\n                        "                                     
  [7] "\n                            \n                            Armenia\n                        "                                     
  [8] "\n                            \n                            Angola\n                        "                                      
  [9] "\n                            \n                            Antarctica\n                        "                                  
 [10] "\n                            \n                            Argentina\n                        "                                   
 [11] "\n                            \n                            American Samoa\n                        "                              
 [12] "\n                            \n                            Austria\n                        "                                     
 [13] "\n                            \n                            Australia\n                        "                                   
 [14] "\n                            \n                            Aruba\n                        "                                       
 [15] "\n                            \n                            Åland\n                        "                                       
 [16] "\n                            \n                            Azerbaijan\n                        "                                  
 [17] "\n                            \n                            Bosnia and Herzegovina\n                        "                      
 [18] "\n                            \n                            Barbados\n                        "                                    
 [19] "\n                            \n                            Bangladesh\n                        "                                  
 [20] "\n                            \n                            Belgium\n                        "                                     
 [21] "\n                            \n                            Burkina Faso\n                        "                                
 [22] "\n                            \n                            Bulgaria\n                        "                                    
 [23] "\n                            \n                            Bahrain\n                        "                                     
 [24] "\n                            \n                            Burundi\n                        "                                     
 [25] "\n                            \n                            Benin\n                        "                                       
 [26] "\n                            \n                            Saint Barthélemy\n                        "                            
 [27] "\n                            \n                            Bermuda\n                        "                                     
 [28] "\n                            \n                            Brunei\n                        "                                      
 [29] "\n                            \n                            Bolivia\n                        "                                     
 [30] "\n                            \n                            Bonaire\n                        "                                     
 [31] "\n                            \n                            Brazil\n                        "                                      
 [32] "\n                            \n                            Bahamas\n                        "                                     
 [33] "\n                            \n                            Bhutan\n                        "                                      
 [34] "\n                            \n                            Bouvet Island\n                        "                               
 [35] "\n                            \n                            Botswana\n                        "                                    
 [36] "\n                            \n                            Belarus\n                        "                                     
 [37] "\n                            \n                            Belize\n                        "                                      
 [38] "\n                            \n                            Canada\n                        "                                      
 [39] "\n                            \n                            Cocos [Keeling] Islands\n                        "                     
 [40] "\n                            \n                            Democratic Republic of the Congo\n                        "            
 [41] "\n                            \n                            Central African Republic\n                        "                    
 [42] "\n                            \n                            Republic of the Congo\n                        "                       
 [43] "\n                            \n                            Switzerland\n                        "                                 
 [44] "\n                            \n                            Ivory Coast\n                        "                                 
 [45] "\n                            \n                            Cook Islands\n                        "                                
 [46] "\n                            \n                            Chile\n                        "                                       
 [47] "\n                            \n                            Cameroon\n                        "                                    
 [48] "\n                            \n                            China\n                        "                                       
 [49] "\n                            \n                            Colombia\n                        "                                    
 [50] "\n                            \n                            Costa Rica\n                        "                                  
 [51] "\n                            \n                            Cuba\n                        "                                        
 [52] "\n                            \n                            Cape Verde\n                        "                                  
 [53] "\n                            \n                            Curacao\n                        "                                     
 [54] "\n                            \n                            Christmas Island\n                        "                            
 [55] "\n                            \n                            Cyprus\n                        "                                      
 [56] "\n                            \n                            Czech Republic\n                        "                              
 [57] "\n                            \n                            Germany\n                        "                                     
 [58] "\n                            \n                            Djibouti\n                        "                                    
 [59] "\n                            \n                            Denmark\n                        "                                     
 [60] "\n                            \n                            Dominica\n                        "                                    
 [61] "\n                            \n                            Dominican Republic\n                        "                          
 [62] "\n                            \n                            Algeria\n                        "                                     
 [63] "\n                            \n                            Ecuador\n                        "                                     
 [64] "\n                            \n                            Estonia\n                        "                                     
 [65] "\n                            \n                            Egypt\n                        "                                       
 [66] "\n                            \n                            Western Sahara\n                        "                              
 [67] "\n                            \n                            Eritrea\n                        "                                     
 [68] "\n                            \n                            Spain\n                        "                                       
 [69] "\n                            \n                            Ethiopia\n                        "                                    
 [70] "\n                            \n                            Finland\n                        "                                     
 [71] "\n                            \n                            Fiji\n                        "                                        
 [72] "\n                            \n                            Falkland Islands\n                        "                            
 [73] "\n                            \n                            Micronesia\n                        "                                  
 [74] "\n                            \n                            Faroe Islands\n                        "                               
 [75] "\n                            \n                            France\n                        "                                      
 [76] "\n                            \n                            Gabon\n                        "                                       
 [77] "\n                            \n                            United Kingdom\n                        "                              
 [78] "\n                            \n                            Grenada\n                        "                                     
 [79] "\n                            \n                            Georgia\n                        "                                     
 [80] "\n                            \n                            French Guiana\n                        "                               
 [81] "\n                            \n                            Guernsey\n                        "                                    
 [82] "\n                            \n                            Ghana\n                        "                                       
 [83] "\n                            \n                            Gibraltar\n                        "                                   
 [84] "\n                            \n                            Greenland\n                        "                                   
 [85] "\n                            \n                            Gambia\n                        "                                      
 [86] "\n                            \n                            Guinea\n                        "                                      
 [87] "\n                            \n                            Guadeloupe\n                        "                                  
 [88] "\n                            \n                            Equatorial Guinea\n                        "                           
 [89] "\n                            \n                            Greece\n                        "                                      
 [90] "\n                            \n                            South Georgia and the South Sandwich Islands\n                        "
 [91] "\n                            \n                            Guatemala\n                        "                                   
 [92] "\n                            \n                            Guam\n                        "                                        
 [93] "\n                            \n                            Guinea-Bissau\n                        "                               
 [94] "\n                            \n                            Guyana\n                        "                                      
 [95] "\n                            \n                            Hong Kong\n                        "                                   
 [96] "\n                            \n                            Heard Island and McDonald Islands\n                        "           
 [97] "\n                            \n                            Honduras\n                        "                                    
 [98] "\n                            \n                            Croatia\n                        "                                     
 [99] "\n                            \n                            Haiti\n                        "                                       
[100] "\n                            \n                            Hungary\n                        "                                     
[101] "\n                            \n                            Indonesia\n                        "                                   
[102] "\n                            \n                            Ireland\n                        "                                     
[103] "\n                            \n                            Israel\n                        "                                      
[104] "\n                            \n                            Isle of Man\n                        "                                 
[105] "\n                            \n                            India\n                        "                                       
[106] "\n                            \n                            British Indian Ocean Territory\n                        "              
[107] "\n                            \n                            Iraq\n                        "                                        
[108] "\n                            \n                            Iran\n                        "                                        
[109] "\n                            \n                            Iceland\n                        "                                     
[110] "\n                            \n                            Italy\n                        "                                       
[111] "\n                            \n                            Jersey\n                        "                                      
[112] "\n                            \n                            Jamaica\n                        "                                     
[113] "\n                            \n                            Jordan\n                        "                                      
[114] "\n                            \n                            Japan\n                        "                                       
[115] "\n                            \n                            Kenya\n                        "                                       
[116] "\n                            \n                            Kyrgyzstan\n                        "                                  
[117] "\n                            \n                            Cambodia\n                        "                                    
[118] "\n                            \n                            Kiribati\n                        "                                    
[119] "\n                            \n                            Comoros\n                        "                                     
[120] "\n                            \n                            Saint Kitts and Nevis\n                        "                       
[121] "\n                            \n                            North Korea\n                        "                                 
[122] "\n                            \n                            South Korea\n                        "                                 
[123] "\n                            \n                            Kuwait\n                        "                                      
[124] "\n                            \n                            Cayman Islands\n                        "                              
[125] "\n                            \n                            Kazakhstan\n                        "                                  
[126] "\n                            \n                            Laos\n                        "                                        
[127] "\n                            \n                            Lebanon\n                        "                                     
[128] "\n                            \n                            Saint Lucia\n                        "                                 
[129] "\n                            \n                            Liechtenstein\n                        "                               
[130] "\n                            \n                            Sri Lanka\n                        "                                   
[131] "\n                            \n                            Liberia\n                        "                                     
[132] "\n                            \n                            Lesotho\n                        "                                     
[133] "\n                            \n                            Lithuania\n                        "                                   
[134] "\n                            \n                            Luxembourg\n                        "                                  
[135] "\n                            \n                            Latvia\n                        "                                      
[136] "\n                            \n                            Libya\n                        "                                       
[137] "\n                            \n                            Morocco\n                        "                                     
[138] "\n                            \n                            Monaco\n                        "                                      
[139] "\n                            \n                            Moldova\n                        "                                     
[140] "\n                            \n                            Montenegro\n                        "                                  
[141] "\n                            \n                            Saint Martin\n                        "                                
[142] "\n                            \n                            Madagascar\n                        "                                  
[143] "\n                            \n                            Marshall Islands\n                        "                            
[144] "\n                            \n                            Macedonia\n                        "                                   
[145] "\n                            \n                            Mali\n                        "                                        
[146] "\n                            \n                            Myanmar [Burma]\n                        "                             
[147] "\n                            \n                            Mongolia\n                        "                                    
[148] "\n                            \n                            Macao\n                        "                                       
[149] "\n                            \n                            Northern Mariana Islands\n                        "                    
[150] "\n                            \n                            Martinique\n                        "                                  
[151] "\n                            \n                            Mauritania\n                        "                                  
[152] "\n                            \n                            Montserrat\n                        "                                  
[153] "\n                            \n                            Malta\n                        "                                       
[154] "\n                            \n                            Mauritius\n                        "                                   
[155] "\n                            \n                            Maldives\n                        "                                    
[156] "\n                            \n                            Malawi\n                        "                                      
[157] "\n                            \n                            Mexico\n                        "                                      
[158] "\n                            \n                            Malaysia\n                        "                                    
[159] "\n                            \n                            Mozambique\n                        "                                  
[160] "\n                            \n                            Namibia\n                        "                                     
[161] "\n                            \n                            New Caledonia\n                        "                               
[162] "\n                            \n                            Niger\n                        "                                       
[163] "\n                            \n                            Norfolk Island\n                        "                              
[164] "\n                            \n                            Nigeria\n                        "                                     
[165] "\n                            \n                            Nicaragua\n                        "                                   
[166] "\n                            \n                            Netherlands\n                        "                                 
[167] "\n                            \n                            Norway\n                        "                                      
[168] "\n                            \n                            Nepal\n                        "                                       
[169] "\n                            \n                            Nauru\n                        "                                       
[170] "\n                            \n                            Niue\n                        "                                        
[171] "\n                            \n                            New Zealand\n                        "                                 
[172] "\n                            \n                            Oman\n                        "                                        
[173] "\n                            \n                            Panama\n                        "                                      
[174] "\n                            \n                            Peru\n                        "                                        
[175] "\n                            \n                            French Polynesia\n                        "                            
[176] "\n                            \n                            Papua New Guinea\n                        "                            
[177] "\n                            \n                            Philippines\n                        "                                 
[178] "\n                            \n                            Pakistan\n                        "                                    
[179] "\n                            \n                            Poland\n                        "                                      
[180] "\n                            \n                            Saint Pierre and Miquelon\n                        "                   
[181] "\n                            \n                            Pitcairn Islands\n                        "                            
[182] "\n                            \n                            Puerto Rico\n                        "                                 
[183] "\n                            \n                            Palestine\n                        "                                   
[184] "\n                            \n                            Portugal\n                        "                                    
[185] "\n                            \n                            Palau\n                        "                                       
[186] "\n                            \n                            Paraguay\n                        "                                    
[187] "\n                            \n                            Qatar\n                        "                                       
[188] "\n                            \n                            Réunion\n                        "                                     
[189] "\n                            \n                            Romania\n                        "                                     
[190] "\n                            \n                            Serbia\n                        "                                      
[191] "\n                            \n                            Russia\n                        "                                      
[192] "\n                            \n                            Rwanda\n                        "                                      
[193] "\n                            \n                            Saudi Arabia\n                        "                                
[194] "\n                            \n                            Solomon Islands\n                        "                             
[195] "\n                            \n                            Seychelles\n                        "                                  
[196] "\n                            \n                            Sudan\n                        "                                       
[197] "\n                            \n                            Sweden\n                        "                                      
[198] "\n                            \n                            Singapore\n                        "                                   
[199] "\n                            \n                            Saint Helena\n                        "                                
[200] "\n                            \n                            Slovenia\n                        "                                    
[201] "\n                            \n                            Svalbard and Jan Mayen\n                        "                      
[202] "\n                            \n                            Slovakia\n                        "                                    
[203] "\n                            \n                            Sierra Leone\n                        "                                
[204] "\n                            \n                            San Marino\n                        "                                  
[205] "\n                            \n                            Senegal\n                        "                                     
[206] "\n                            \n                            Somalia\n                        "                                     
[207] "\n                            \n                            Suriname\n                        "                                    
[208] "\n                            \n                            South Sudan\n                        "                                 
[209] "\n                            \n                            São Tomé and Príncipe\n                        "                       
[210] "\n                            \n                            El Salvador\n                        "                                 
[211] "\n                            \n                            Sint Maarten\n                        "                                
[212] "\n                            \n                            Syria\n                        "                                       
[213] "\n                            \n                            Swaziland\n                        "                                   
[214] "\n                            \n                            Turks and Caicos Islands\n                        "                    
[215] "\n                            \n                            Chad\n                        "                                        
[216] "\n                            \n                            French Southern Territories\n                        "                 
[217] "\n                            \n                            Togo\n                        "                                        
[218] "\n                            \n                            Thailand\n                        "                                    
[219] "\n                            \n                            Tajikistan\n                        "                                  
[220] "\n                            \n                            Tokelau\n                        "                                     
[221] "\n                            \n                            East Timor\n                        "                                  
[222] "\n                            \n                            Turkmenistan\n                        "                                
[223] "\n                            \n                            Tunisia\n                        "                                     
[224] "\n                            \n                            Tonga\n                        "                                       
[225] "\n                            \n                            Turkey\n                        "                                      
[226] "\n                            \n                            Trinidad and Tobago\n                        "                         
[227] "\n                            \n                            Tuvalu\n                        "                                      
[228] "\n                            \n                            Taiwan\n                        "                                      
[229] "\n                            \n                            Tanzania\n                        "                                    
[230] "\n                            \n                            Ukraine\n                        "                                     
[231] "\n                            \n                            Uganda\n                        "                                      
[232] "\n                            \n                            U.S. Minor Outlying Islands\n                        "                 
[233] "\n                            \n                            United States\n                        "                               
[234] "\n                            \n                            Uruguay\n                        "                                     
[235] "\n                            \n                            Uzbekistan\n                        "                                  
[236] "\n                            \n                            Vatican City\n                        "                                
[237] "\n                            \n                            Saint Vincent and the Grenadines\n                        "            
[238] "\n                            \n                            Venezuela\n                        "                                   
[239] "\n                            \n                            British Virgin Islands\n                        "                      
[240] "\n                            \n                            U.S. Virgin Islands\n                        "                         
[241] "\n                            \n                            Vietnam\n                        "                                     
[242] "\n                            \n                            Vanuatu\n                        "                                     
[243] "\n                            \n                            Wallis and Futuna\n                        "                           
[244] "\n                            \n                            Samoa\n                        "                                       
[245] "\n                            \n                            Kosovo\n                        "                                      
[246] "\n                            \n                            Yemen\n                        "                                       
[247] "\n                            \n                            Mayotte\n                        "                                     
[248] "\n                            \n                            South Africa\n                        "                                
[249] "\n                            \n                            Zambia\n                        "                                      
[250] "\n                            \n                            Zimbabwe\n                        "                                    </code></pre>
</div>
<div class="sourceCode cell-code" id="cb38"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb38-1"><a href="#cb38-1" aria-hidden="true" tabindex="-1"></a><span class="co">#@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@</span></span>
<span id="cb38-2"><a href="#cb38-2" aria-hidden="true" tabindex="-1"></a><span class="co"># Let's look a little closer at the contents of what is returned by read_html</span></span>
<span id="cb38-3"><a href="#cb38-3" aria-hidden="true" tabindex="-1"></a><span class="co">#@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@</span></span>
<span id="cb38-4"><a href="#cb38-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb38-5"><a href="#cb38-5" aria-hidden="true" tabindex="-1"></a><span class="co"># We already had this above, just reviewing it again ...</span></span>
<span id="cb38-6"><a href="#cb38-6" aria-hidden="true" tabindex="-1"></a>url <span class="ot">=</span> <span class="st">"https://scrapethissite.com/pages/simple/"</span></span>
<span id="cb38-7"><a href="#cb38-7" aria-hidden="true" tabindex="-1"></a>whole_html_page <span class="ot">=</span> <span class="fu">read_html</span>(url)</span>
<span id="cb38-8"><a href="#cb38-8" aria-hidden="true" tabindex="-1"></a>country_name_html <span class="ot">=</span>  <span class="fu">html_elements</span>( whole_html_page, cssSelector )</span>
<span id="cb38-9"><a href="#cb38-9" aria-hidden="true" tabindex="-1"></a>just_the_text <span class="ot">=</span>   <span class="fu">html_text</span>(country_name_html)</span>
<span id="cb38-10"><a href="#cb38-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb38-11"><a href="#cb38-11" aria-hidden="true" tabindex="-1"></a><span class="co"># What is the structure of this data?</span></span>
<span id="cb38-12"><a href="#cb38-12" aria-hidden="true" tabindex="-1"></a><span class="fu">str</span>(whole_html_page) <span class="co"># list of 2 externalptr objects (see below)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>List of 2
 $ node:&lt;externalptr&gt; 
 $ doc :&lt;externalptr&gt; 
 - attr(*, "class")= chr [1:2] "xml_document" "xml_node"</code></pre>
</div>
<div class="sourceCode cell-code" id="cb40"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb40-1"><a href="#cb40-1" aria-hidden="true" tabindex="-1"></a><span class="co"># What is the class of this data? </span></span>
<span id="cb40-2"><a href="#cb40-2" aria-hidden="true" tabindex="-1"></a><span class="fu">class</span>(whole_html_page)   <span class="co"># "xml_document" "xml_node"</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "xml_document" "xml_node"    </code></pre>
</div>
<div class="sourceCode cell-code" id="cb42"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb42-1"><a href="#cb42-1" aria-hidden="true" tabindex="-1"></a><span class="fu">methods</span>(print)    <span class="co"># ... print.xml_document* ... print.xml_node*</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>  [1] print.acf*                                          
  [2] print.activeConcordance*                            
  [3] print.AES*                                          
  [4] print.anova*                                        
  [5] print.aov*                                          
  [6] print.aovlist*                                      
  [7] print.ar*                                           
  [8] print.Arima*                                        
  [9] print.arima0*                                       
 [10] print.AsIs                                          
 [11] print.aspell*                                       
 [12] print.aspell_inspect_context*                       
 [13] print.bibentry*                                     
 [14] print.Bibtex*                                       
 [15] print.browseVignettes*                              
 [16] print.by                                            
 [17] print.cache_info*                                   
 [18] print.changedFiles*                                 
 [19] print.check_bogus_return*                           
 [20] print.check_code_usage_in_package*                  
 [21] print.check_compiled_code*                          
 [22] print.check_demo_index*                             
 [23] print.check_depdef*                                 
 [24] print.check_details*                                
 [25] print.check_details_changes*                        
 [26] print.check_doi_db*                                 
 [27] print.check_dotInternal*                            
 [28] print.check_make_vars*                              
 [29] print.check_nonAPI_calls*                           
 [30] print.check_package_code_assign_to_globalenv*       
 [31] print.check_package_code_attach*                    
 [32] print.check_package_code_data_into_globalenv*       
 [33] print.check_package_code_startup_functions*         
 [34] print.check_package_code_syntax*                    
 [35] print.check_package_code_unload_functions*          
 [36] print.check_package_compact_datasets*               
 [37] print.check_package_CRAN_incoming*                  
 [38] print.check_package_datalist*                       
 [39] print.check_package_datasets*                       
 [40] print.check_package_depends*                        
 [41] print.check_package_description*                    
 [42] print.check_package_description_encoding*           
 [43] print.check_package_license*                        
 [44] print.check_packages_in_dir*                        
 [45] print.check_packages_used*                          
 [46] print.check_po_files*                               
 [47] print.check_pragmas*                                
 [48] print.check_Rd_line_widths*                         
 [49] print.check_Rd_metadata*                            
 [50] print.check_Rd_xrefs*                               
 [51] print.check_RegSym_calls*                           
 [52] print.check_S3_methods_needing_delayed_registration*
 [53] print.check_so_symbols*                             
 [54] print.check_T_and_F*                                
 [55] print.check_url_db*                                 
 [56] print.check_vignette_index*                         
 [57] print.checkDocFiles*                                
 [58] print.checkDocStyle*                                
 [59] print.checkFF*                                      
 [60] print.checkRd*                                      
 [61] print.checkRdContents*                              
 [62] print.checkReplaceFuns*                             
 [63] print.checkS3methods*                               
 [64] print.checkTnF*                                     
 [65] print.checkVignettes*                               
 [66] print.citation*                                     
 [67] print.cli_ansi_html_style*                          
 [68] print.cli_ansi_string*                              
 [69] print.cli_ansi_style*                               
 [70] print.cli_boxx*                                     
 [71] print.cli_diff_chr*                                 
 [72] print.cli_doc*                                      
 [73] print.cli_progress_demo*                            
 [74] print.cli_rule*                                     
 [75] print.cli_sitrep*                                   
 [76] print.cli_spark*                                    
 [77] print.cli_spinner*                                  
 [78] print.cli_tree*                                     
 [79] print.codoc*                                        
 [80] print.codocClasses*                                 
 [81] print.codocData*                                    
 [82] print.colorConverter*                               
 [83] print.compactPDF*                                   
 [84] print.condition                                     
 [85] print.connection                                    
 [86] print.CRAN_package_reverse_dependencies_and_views*  
 [87] print.curl_handle*                                  
 [88] print.curl_multi*                                   
 [89] print.data.frame                                    
 [90] print.Date                                          
 [91] print.default                                       
 [92] print.dendrogram*                                   
 [93] print.density*                                      
 [94] print.difftime                                      
 [95] print.dist*                                         
 [96] print.Dlist                                         
 [97] print.DLLInfo                                       
 [98] print.DLLInfoList                                   
 [99] print.DLLRegisteredRoutines                         
[100] print.document_context*                             
[101] print.document_position*                            
[102] print.document_range*                               
[103] print.document_selection*                           
[104] print.dummy_coef*                                   
[105] print.dummy_coef_list*                              
[106] print.ecdf*                                         
[107] print.eigen                                         
[108] print.evaluate_evaluation*                          
[109] print.factanal*                                     
[110] print.factor                                        
[111] print.family*                                       
[112] print.fileSnapshot*                                 
[113] print.findLineNumResult*                            
[114] print.form_data*                                    
[115] print.form_file*                                    
[116] print.formula*                                      
[117] print.fseq*                                         
[118] print.ftable*                                       
[119] print.function                                      
[120] print.getAnywhere*                                  
[121] print.glm*                                          
[122] print.glue*                                         
[123] print.handle*                                       
[124] print.hashtab*                                      
[125] print.hclust*                                       
[126] print.help_files_with_topic*                        
[127] print.hexmode                                       
[128] print.HoltWinters*                                  
[129] print.hsearch*                                      
[130] print.hsearch_db*                                   
[131] print.htest*                                        
[132] print.html*                                         
[133] print.html_dependency*                              
[134] print.htmltools.selector*                           
[135] print.htmltools.selector.list*                      
[136] print.infl*                                         
[137] print.integrate*                                    
[138] print.isoreg*                                       
[139] print.json*                                         
[140] print.key_missing*                                  
[141] print.kmeans*                                       
[142] print.knitr_kable*                                  
[143] print.Latex*                                        
[144] print.LaTeX*                                        
[145] print.libraryIQR                                    
[146] print.lifecycle_warnings*                           
[147] print.listof                                        
[148] print.lm*                                           
[149] print.loadings*                                     
[150] print.loess*                                        
[151] print.logLik*                                       
[152] print.ls_str*                                       
[153] print.medpolish*                                    
[154] print.MethodsFunction*                              
[155] print.mtable*                                       
[156] print.NativeRoutineList                             
[157] print.news_db*                                      
[158] print.nls*                                          
[159] print.noquote                                       
[160] print.numeric_version                               
[161] print.oauth_app*                                    
[162] print.oauth_endpoint*                               
[163] print.object_size*                                  
[164] print.octmode                                       
[165] print.opts_list*                                    
[166] print.packageDescription*                           
[167] print.packageInfo                                   
[168] print.packageIQR*                                   
[169] print.packageStatus*                                
[170] print.paged_df*                                     
[171] print.pairwise.htest*                               
[172] print.person*                                       
[173] print.POSIXct                                       
[174] print.POSIXlt                                       
[175] print.power.htest*                                  
[176] print.ppr*                                          
[177] print.prcomp*                                       
[178] print.princomp*                                     
[179] print.proc_time                                     
[180] print.quosure*                                      
[181] print.quosures*                                     
[182] print.R6*                                           
[183] print.R6ClassGenerator*                             
[184] print.raster*                                       
[185] print.Rconcordance*                                 
[186] print.Rd*                                           
[187] print.recordedplot*                                 
[188] print.request*                                      
[189] print.response*                                     
[190] print.restart                                       
[191] print.RGBcolorConverter*                            
[192] print.RGlyphFont*                                   
[193] print.rlang:::list_of_conditions*                   
[194] print.rlang_box_done*                               
[195] print.rlang_box_splice*                             
[196] print.rlang_data_pronoun*                           
[197] print.rlang_dict*                                   
[198] print.rlang_dyn_array*                              
[199] print.rlang_envs*                                   
[200] print.rlang_error*                                  
[201] print.rlang_fake_data_pronoun*                      
[202] print.rlang_lambda_function*                        
[203] print.rlang_message*                                
[204] print.rlang_trace*                                  
[205] print.rlang_warning*                                
[206] print.rlang_zap*                                    
[207] print.rle                                           
[208] print.rlib_bytes*                                   
[209] print.rlib_error_3_0*                               
[210] print.rlib_trace_3_0*                               
[211] print.roman*                                        
[212] print.rvest_field*                                  
[213] print.rvest_form*                                   
[214] print.rvest_session*                                
[215] print.SavedPlots*                                   
[216] print.scalar*                                       
[217] print.sessionInfo*                                  
[218] print.shiny.tag*                                    
[219] print.shiny.tag.env*                                
[220] print.shiny.tag.list*                               
[221] print.shiny.tag.query*                              
[222] print.simple.list                                   
[223] print.smooth.spline*                                
[224] print.socket*                                       
[225] print.srcfile                                       
[226] print.srcref                                        
[227] print.stepfun*                                      
[228] print.stl*                                          
[229] print.stringr_view*                                 
[230] print.StructTS*                                     
[231] print.subdir_tests*                                 
[232] print.summarize_CRAN_check_status*                  
[233] print.summary.aov*                                  
[234] print.summary.aovlist*                              
[235] print.summary.ecdf*                                 
[236] print.summary.glm*                                  
[237] print.summary.lm*                                   
[238] print.summary.loess*                                
[239] print.summary.manova*                               
[240] print.summary.nls*                                  
[241] print.summary.packageStatus*                        
[242] print.summary.ppr*                                  
[243] print.summary.prcomp*                               
[244] print.summary.princomp*                             
[245] print.summary.table                                 
[246] print.summary.warnings                              
[247] print.summaryDefault                                
[248] print.table                                         
[249] print.tables_aov*                                   
[250] print.terms*                                        
[251] print.ts*                                           
[252] print.tskernel*                                     
[253] print.TukeyHSD*                                     
[254] print.tukeyline*                                    
[255] print.tukeysmooth*                                  
[256] print.undoc*                                        
[257] print.vctrs_bytes*                                  
[258] print.vctrs_sclr*                                   
[259] print.vctrs_unspecified*                            
[260] print.vctrs_vctr*                                   
[261] print.vignette*                                     
[262] print.warnings                                      
[263] print.xfun_md_viewable*                             
[264] print.xfun_raw_string*                              
[265] print.xfun_record_results*                          
[266] print.xfun_rename_seq*                              
[267] print.xfun_strict_list*                             
[268] print.xgettext*                                     
[269] print.xml_document*                                 
[270] print.xml_missing*                                  
[271] print.xml_namespace*                                
[272] print.xml_node*                                     
[273] print.xml_nodeset*                                  
[274] print.xngettext*                                    
[275] print.xtabs*                                        
see '?methods' for accessing help and source code</code></pre>
</div>
<div class="sourceCode cell-code" id="cb44"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb44-1"><a href="#cb44-1" aria-hidden="true" tabindex="-1"></a><span class="fu">attributes</span>(whole_html_page)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>$names
[1] "node" "doc" 

$class
[1] "xml_document" "xml_node"    </code></pre>
</div>
<div class="sourceCode cell-code" id="cb46"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb46-1"><a href="#cb46-1" aria-hidden="true" tabindex="-1"></a><span class="co">#@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@</span></span>
<span id="cb46-2"><a href="#cb46-2" aria-hidden="true" tabindex="-1"></a><span class="co"># An externalptr cannot be accessed directly via R code. It is a "blob"</span></span>
<span id="cb46-3"><a href="#cb46-3" aria-hidden="true" tabindex="-1"></a><span class="co"># (a "binary large object") i.e. a piece of data that is only accessible</span></span>
<span id="cb46-4"><a href="#cb46-4" aria-hidden="true" tabindex="-1"></a><span class="co"># via C language (not R) code that is used to build some of the packages</span></span>
<span id="cb46-5"><a href="#cb46-5" aria-hidden="true" tabindex="-1"></a><span class="co"># that are used to extend R's functionality. You must use the built in</span></span>
<span id="cb46-6"><a href="#cb46-6" aria-hidden="true" tabindex="-1"></a><span class="co"># functions in the xml2 and the rvest packages to access this data.</span></span>
<span id="cb46-7"><a href="#cb46-7" aria-hidden="true" tabindex="-1"></a><span class="co">#@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="working-with-the-data-you-scraped" class="level2" data-number="34.8">
<h2 data-number="34.8" class="anchored" data-anchor-id="working-with-the-data-you-scraped"><span class="header-section-number">34.8</span> Working with the data you scraped</h2>
<div class="cell">
<div class="sourceCode cell-code" id="cb47"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb47-1"><a href="#cb47-1" aria-hidden="true" tabindex="-1"></a><span class="co">#.....................................................................</span></span>
<span id="cb47-2"><a href="#cb47-2" aria-hidden="true" tabindex="-1"></a><span class="co">#</span></span>
<span id="cb47-3"><a href="#cb47-3" aria-hidden="true" tabindex="-1"></a><span class="co"># we can eliminate extra newlines and the blanks with the gsub function</span></span>
<span id="cb47-4"><a href="#cb47-4" aria-hidden="true" tabindex="-1"></a><span class="co"># </span></span>
<span id="cb47-5"><a href="#cb47-5" aria-hidden="true" tabindex="-1"></a><span class="co">#.....................................................................</span></span>
<span id="cb47-6"><a href="#cb47-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb47-7"><a href="#cb47-7" aria-hidden="true" tabindex="-1"></a>?gsub   <span class="co"># see the documentation</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>starting httpd help server ... done</code></pre>
</div>
<div class="sourceCode cell-code" id="cb49"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb49-1"><a href="#cb49-1" aria-hidden="true" tabindex="-1"></a>without_backslash_n <span class="ot">=</span> <span class="fu">gsub</span>(<span class="st">"</span><span class="sc">\\</span><span class="st">n"</span>, <span class="st">""</span>, just_the_text)    </span>
<span id="cb49-2"><a href="#cb49-2" aria-hidden="true" tabindex="-1"></a>without_backslash_n</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>  [1] "                                                        Andorra                        "                                     
  [2] "                                                        United Arab Emirates                        "                        
  [3] "                                                        Afghanistan                        "                                 
  [4] "                                                        Antigua and Barbuda                        "                         
  [5] "                                                        Anguilla                        "                                    
  [6] "                                                        Albania                        "                                     
  [7] "                                                        Armenia                        "                                     
  [8] "                                                        Angola                        "                                      
  [9] "                                                        Antarctica                        "                                  
 [10] "                                                        Argentina                        "                                   
 [11] "                                                        American Samoa                        "                              
 [12] "                                                        Austria                        "                                     
 [13] "                                                        Australia                        "                                   
 [14] "                                                        Aruba                        "                                       
 [15] "                                                        Åland                        "                                       
 [16] "                                                        Azerbaijan                        "                                  
 [17] "                                                        Bosnia and Herzegovina                        "                      
 [18] "                                                        Barbados                        "                                    
 [19] "                                                        Bangladesh                        "                                  
 [20] "                                                        Belgium                        "                                     
 [21] "                                                        Burkina Faso                        "                                
 [22] "                                                        Bulgaria                        "                                    
 [23] "                                                        Bahrain                        "                                     
 [24] "                                                        Burundi                        "                                     
 [25] "                                                        Benin                        "                                       
 [26] "                                                        Saint Barthélemy                        "                            
 [27] "                                                        Bermuda                        "                                     
 [28] "                                                        Brunei                        "                                      
 [29] "                                                        Bolivia                        "                                     
 [30] "                                                        Bonaire                        "                                     
 [31] "                                                        Brazil                        "                                      
 [32] "                                                        Bahamas                        "                                     
 [33] "                                                        Bhutan                        "                                      
 [34] "                                                        Bouvet Island                        "                               
 [35] "                                                        Botswana                        "                                    
 [36] "                                                        Belarus                        "                                     
 [37] "                                                        Belize                        "                                      
 [38] "                                                        Canada                        "                                      
 [39] "                                                        Cocos [Keeling] Islands                        "                     
 [40] "                                                        Democratic Republic of the Congo                        "            
 [41] "                                                        Central African Republic                        "                    
 [42] "                                                        Republic of the Congo                        "                       
 [43] "                                                        Switzerland                        "                                 
 [44] "                                                        Ivory Coast                        "                                 
 [45] "                                                        Cook Islands                        "                                
 [46] "                                                        Chile                        "                                       
 [47] "                                                        Cameroon                        "                                    
 [48] "                                                        China                        "                                       
 [49] "                                                        Colombia                        "                                    
 [50] "                                                        Costa Rica                        "                                  
 [51] "                                                        Cuba                        "                                        
 [52] "                                                        Cape Verde                        "                                  
 [53] "                                                        Curacao                        "                                     
 [54] "                                                        Christmas Island                        "                            
 [55] "                                                        Cyprus                        "                                      
 [56] "                                                        Czech Republic                        "                              
 [57] "                                                        Germany                        "                                     
 [58] "                                                        Djibouti                        "                                    
 [59] "                                                        Denmark                        "                                     
 [60] "                                                        Dominica                        "                                    
 [61] "                                                        Dominican Republic                        "                          
 [62] "                                                        Algeria                        "                                     
 [63] "                                                        Ecuador                        "                                     
 [64] "                                                        Estonia                        "                                     
 [65] "                                                        Egypt                        "                                       
 [66] "                                                        Western Sahara                        "                              
 [67] "                                                        Eritrea                        "                                     
 [68] "                                                        Spain                        "                                       
 [69] "                                                        Ethiopia                        "                                    
 [70] "                                                        Finland                        "                                     
 [71] "                                                        Fiji                        "                                        
 [72] "                                                        Falkland Islands                        "                            
 [73] "                                                        Micronesia                        "                                  
 [74] "                                                        Faroe Islands                        "                               
 [75] "                                                        France                        "                                      
 [76] "                                                        Gabon                        "                                       
 [77] "                                                        United Kingdom                        "                              
 [78] "                                                        Grenada                        "                                     
 [79] "                                                        Georgia                        "                                     
 [80] "                                                        French Guiana                        "                               
 [81] "                                                        Guernsey                        "                                    
 [82] "                                                        Ghana                        "                                       
 [83] "                                                        Gibraltar                        "                                   
 [84] "                                                        Greenland                        "                                   
 [85] "                                                        Gambia                        "                                      
 [86] "                                                        Guinea                        "                                      
 [87] "                                                        Guadeloupe                        "                                  
 [88] "                                                        Equatorial Guinea                        "                           
 [89] "                                                        Greece                        "                                      
 [90] "                                                        South Georgia and the South Sandwich Islands                        "
 [91] "                                                        Guatemala                        "                                   
 [92] "                                                        Guam                        "                                        
 [93] "                                                        Guinea-Bissau                        "                               
 [94] "                                                        Guyana                        "                                      
 [95] "                                                        Hong Kong                        "                                   
 [96] "                                                        Heard Island and McDonald Islands                        "           
 [97] "                                                        Honduras                        "                                    
 [98] "                                                        Croatia                        "                                     
 [99] "                                                        Haiti                        "                                       
[100] "                                                        Hungary                        "                                     
[101] "                                                        Indonesia                        "                                   
[102] "                                                        Ireland                        "                                     
[103] "                                                        Israel                        "                                      
[104] "                                                        Isle of Man                        "                                 
[105] "                                                        India                        "                                       
[106] "                                                        British Indian Ocean Territory                        "              
[107] "                                                        Iraq                        "                                        
[108] "                                                        Iran                        "                                        
[109] "                                                        Iceland                        "                                     
[110] "                                                        Italy                        "                                       
[111] "                                                        Jersey                        "                                      
[112] "                                                        Jamaica                        "                                     
[113] "                                                        Jordan                        "                                      
[114] "                                                        Japan                        "                                       
[115] "                                                        Kenya                        "                                       
[116] "                                                        Kyrgyzstan                        "                                  
[117] "                                                        Cambodia                        "                                    
[118] "                                                        Kiribati                        "                                    
[119] "                                                        Comoros                        "                                     
[120] "                                                        Saint Kitts and Nevis                        "                       
[121] "                                                        North Korea                        "                                 
[122] "                                                        South Korea                        "                                 
[123] "                                                        Kuwait                        "                                      
[124] "                                                        Cayman Islands                        "                              
[125] "                                                        Kazakhstan                        "                                  
[126] "                                                        Laos                        "                                        
[127] "                                                        Lebanon                        "                                     
[128] "                                                        Saint Lucia                        "                                 
[129] "                                                        Liechtenstein                        "                               
[130] "                                                        Sri Lanka                        "                                   
[131] "                                                        Liberia                        "                                     
[132] "                                                        Lesotho                        "                                     
[133] "                                                        Lithuania                        "                                   
[134] "                                                        Luxembourg                        "                                  
[135] "                                                        Latvia                        "                                      
[136] "                                                        Libya                        "                                       
[137] "                                                        Morocco                        "                                     
[138] "                                                        Monaco                        "                                      
[139] "                                                        Moldova                        "                                     
[140] "                                                        Montenegro                        "                                  
[141] "                                                        Saint Martin                        "                                
[142] "                                                        Madagascar                        "                                  
[143] "                                                        Marshall Islands                        "                            
[144] "                                                        Macedonia                        "                                   
[145] "                                                        Mali                        "                                        
[146] "                                                        Myanmar [Burma]                        "                             
[147] "                                                        Mongolia                        "                                    
[148] "                                                        Macao                        "                                       
[149] "                                                        Northern Mariana Islands                        "                    
[150] "                                                        Martinique                        "                                  
[151] "                                                        Mauritania                        "                                  
[152] "                                                        Montserrat                        "                                  
[153] "                                                        Malta                        "                                       
[154] "                                                        Mauritius                        "                                   
[155] "                                                        Maldives                        "                                    
[156] "                                                        Malawi                        "                                      
[157] "                                                        Mexico                        "                                      
[158] "                                                        Malaysia                        "                                    
[159] "                                                        Mozambique                        "                                  
[160] "                                                        Namibia                        "                                     
[161] "                                                        New Caledonia                        "                               
[162] "                                                        Niger                        "                                       
[163] "                                                        Norfolk Island                        "                              
[164] "                                                        Nigeria                        "                                     
[165] "                                                        Nicaragua                        "                                   
[166] "                                                        Netherlands                        "                                 
[167] "                                                        Norway                        "                                      
[168] "                                                        Nepal                        "                                       
[169] "                                                        Nauru                        "                                       
[170] "                                                        Niue                        "                                        
[171] "                                                        New Zealand                        "                                 
[172] "                                                        Oman                        "                                        
[173] "                                                        Panama                        "                                      
[174] "                                                        Peru                        "                                        
[175] "                                                        French Polynesia                        "                            
[176] "                                                        Papua New Guinea                        "                            
[177] "                                                        Philippines                        "                                 
[178] "                                                        Pakistan                        "                                    
[179] "                                                        Poland                        "                                      
[180] "                                                        Saint Pierre and Miquelon                        "                   
[181] "                                                        Pitcairn Islands                        "                            
[182] "                                                        Puerto Rico                        "                                 
[183] "                                                        Palestine                        "                                   
[184] "                                                        Portugal                        "                                    
[185] "                                                        Palau                        "                                       
[186] "                                                        Paraguay                        "                                    
[187] "                                                        Qatar                        "                                       
[188] "                                                        Réunion                        "                                     
[189] "                                                        Romania                        "                                     
[190] "                                                        Serbia                        "                                      
[191] "                                                        Russia                        "                                      
[192] "                                                        Rwanda                        "                                      
[193] "                                                        Saudi Arabia                        "                                
[194] "                                                        Solomon Islands                        "                             
[195] "                                                        Seychelles                        "                                  
[196] "                                                        Sudan                        "                                       
[197] "                                                        Sweden                        "                                      
[198] "                                                        Singapore                        "                                   
[199] "                                                        Saint Helena                        "                                
[200] "                                                        Slovenia                        "                                    
[201] "                                                        Svalbard and Jan Mayen                        "                      
[202] "                                                        Slovakia                        "                                    
[203] "                                                        Sierra Leone                        "                                
[204] "                                                        San Marino                        "                                  
[205] "                                                        Senegal                        "                                     
[206] "                                                        Somalia                        "                                     
[207] "                                                        Suriname                        "                                    
[208] "                                                        South Sudan                        "                                 
[209] "                                                        São Tomé and Príncipe                        "                       
[210] "                                                        El Salvador                        "                                 
[211] "                                                        Sint Maarten                        "                                
[212] "                                                        Syria                        "                                       
[213] "                                                        Swaziland                        "                                   
[214] "                                                        Turks and Caicos Islands                        "                    
[215] "                                                        Chad                        "                                        
[216] "                                                        French Southern Territories                        "                 
[217] "                                                        Togo                        "                                        
[218] "                                                        Thailand                        "                                    
[219] "                                                        Tajikistan                        "                                  
[220] "                                                        Tokelau                        "                                     
[221] "                                                        East Timor                        "                                  
[222] "                                                        Turkmenistan                        "                                
[223] "                                                        Tunisia                        "                                     
[224] "                                                        Tonga                        "                                       
[225] "                                                        Turkey                        "                                      
[226] "                                                        Trinidad and Tobago                        "                         
[227] "                                                        Tuvalu                        "                                      
[228] "                                                        Taiwan                        "                                      
[229] "                                                        Tanzania                        "                                    
[230] "                                                        Ukraine                        "                                     
[231] "                                                        Uganda                        "                                      
[232] "                                                        U.S. Minor Outlying Islands                        "                 
[233] "                                                        United States                        "                               
[234] "                                                        Uruguay                        "                                     
[235] "                                                        Uzbekistan                        "                                  
[236] "                                                        Vatican City                        "                                
[237] "                                                        Saint Vincent and the Grenadines                        "            
[238] "                                                        Venezuela                        "                                   
[239] "                                                        British Virgin Islands                        "                      
[240] "                                                        U.S. Virgin Islands                        "                         
[241] "                                                        Vietnam                        "                                     
[242] "                                                        Vanuatu                        "                                     
[243] "                                                        Wallis and Futuna                        "                           
[244] "                                                        Samoa                        "                                       
[245] "                                                        Kosovo                        "                                      
[246] "                                                        Yemen                        "                                       
[247] "                                                        Mayotte                        "                                     
[248] "                                                        South Africa                        "                                
[249] "                                                        Zambia                        "                                      
[250] "                                                        Zimbabwe                        "                                    </code></pre>
</div>
<div class="sourceCode cell-code" id="cb51"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb51-1"><a href="#cb51-1" aria-hidden="true" tabindex="-1"></a><span class="co"># The following has a bug in that it removes ALL spaces.</span></span>
<span id="cb51-2"><a href="#cb51-2" aria-hidden="true" tabindex="-1"></a><span class="co"># countries = gsub(" " , "" , without_backslash_n)</span></span>
<span id="cb51-3"><a href="#cb51-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb51-4"><a href="#cb51-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Just remove the spaces that appear BEFORE the country name</span></span>
<span id="cb51-5"><a href="#cb51-5" aria-hidden="true" tabindex="-1"></a>countries1 <span class="ot">=</span> <span class="fu">gsub</span>(<span class="st">"^ *"</span>, <span class="st">""</span>, without_backslash_n)</span>
<span id="cb51-6"><a href="#cb51-6" aria-hidden="true" tabindex="-1"></a>countries2 <span class="ot">=</span> <span class="fu">gsub</span>(<span class="st">" *$"</span>, <span class="st">""</span>, countries1)</span>
<span id="cb51-7"><a href="#cb51-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb51-8"><a href="#cb51-8" aria-hidden="true" tabindex="-1"></a>countries <span class="ot">=</span> countries2</span>
<span id="cb51-9"><a href="#cb51-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb51-10"><a href="#cb51-10" aria-hidden="true" tabindex="-1"></a><span class="co"># alternatively, you can eliminate spaces and \n characters </span></span>
<span id="cb51-11"><a href="#cb51-11" aria-hidden="true" tabindex="-1"></a><span class="co"># before and after the text all in one shot</span></span>
<span id="cb51-12"><a href="#cb51-12" aria-hidden="true" tabindex="-1"></a>countries3 <span class="ot">=</span> <span class="fu">gsub</span>(<span class="st">"(^[ </span><span class="sc">\\</span><span class="st">n]*)|([ </span><span class="sc">\\</span><span class="st">n]*$)"</span>, <span class="st">""</span>, without_backslash_n)</span>
<span id="cb51-13"><a href="#cb51-13" aria-hidden="true" tabindex="-1"></a>countries3</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>  [1] "Andorra"                                     
  [2] "United Arab Emirates"                        
  [3] "Afghanista"                                  
  [4] "Antigua and Barbuda"                         
  [5] "Anguilla"                                    
  [6] "Albania"                                     
  [7] "Armenia"                                     
  [8] "Angola"                                      
  [9] "Antarctica"                                  
 [10] "Argentina"                                   
 [11] "American Samoa"                              
 [12] "Austria"                                     
 [13] "Australia"                                   
 [14] "Aruba"                                       
 [15] "Åland"                                       
 [16] "Azerbaija"                                   
 [17] "Bosnia and Herzegovina"                      
 [18] "Barbados"                                    
 [19] "Bangladesh"                                  
 [20] "Belgium"                                     
 [21] "Burkina Faso"                                
 [22] "Bulgaria"                                    
 [23] "Bahrai"                                      
 [24] "Burundi"                                     
 [25] "Beni"                                        
 [26] "Saint Barthélemy"                            
 [27] "Bermuda"                                     
 [28] "Brunei"                                      
 [29] "Bolivia"                                     
 [30] "Bonaire"                                     
 [31] "Brazil"                                      
 [32] "Bahamas"                                     
 [33] "Bhuta"                                       
 [34] "Bouvet Island"                               
 [35] "Botswana"                                    
 [36] "Belarus"                                     
 [37] "Belize"                                      
 [38] "Canada"                                      
 [39] "Cocos [Keeling] Islands"                     
 [40] "Democratic Republic of the Congo"            
 [41] "Central African Republic"                    
 [42] "Republic of the Congo"                       
 [43] "Switzerland"                                 
 [44] "Ivory Coast"                                 
 [45] "Cook Islands"                                
 [46] "Chile"                                       
 [47] "Cameroo"                                     
 [48] "China"                                       
 [49] "Colombia"                                    
 [50] "Costa Rica"                                  
 [51] "Cuba"                                        
 [52] "Cape Verde"                                  
 [53] "Curacao"                                     
 [54] "Christmas Island"                            
 [55] "Cyprus"                                      
 [56] "Czech Republic"                              
 [57] "Germany"                                     
 [58] "Djibouti"                                    
 [59] "Denmark"                                     
 [60] "Dominica"                                    
 [61] "Dominican Republic"                          
 [62] "Algeria"                                     
 [63] "Ecuador"                                     
 [64] "Estonia"                                     
 [65] "Egypt"                                       
 [66] "Western Sahara"                              
 [67] "Eritrea"                                     
 [68] "Spai"                                        
 [69] "Ethiopia"                                    
 [70] "Finland"                                     
 [71] "Fiji"                                        
 [72] "Falkland Islands"                            
 [73] "Micronesia"                                  
 [74] "Faroe Islands"                               
 [75] "France"                                      
 [76] "Gabo"                                        
 [77] "United Kingdom"                              
 [78] "Grenada"                                     
 [79] "Georgia"                                     
 [80] "French Guiana"                               
 [81] "Guernsey"                                    
 [82] "Ghana"                                       
 [83] "Gibraltar"                                   
 [84] "Greenland"                                   
 [85] "Gambia"                                      
 [86] "Guinea"                                      
 [87] "Guadeloupe"                                  
 [88] "Equatorial Guinea"                           
 [89] "Greece"                                      
 [90] "South Georgia and the South Sandwich Islands"
 [91] "Guatemala"                                   
 [92] "Guam"                                        
 [93] "Guinea-Bissau"                               
 [94] "Guyana"                                      
 [95] "Hong Kong"                                   
 [96] "Heard Island and McDonald Islands"           
 [97] "Honduras"                                    
 [98] "Croatia"                                     
 [99] "Haiti"                                       
[100] "Hungary"                                     
[101] "Indonesia"                                   
[102] "Ireland"                                     
[103] "Israel"                                      
[104] "Isle of Ma"                                  
[105] "India"                                       
[106] "British Indian Ocean Territory"              
[107] "Iraq"                                        
[108] "Ira"                                         
[109] "Iceland"                                     
[110] "Italy"                                       
[111] "Jersey"                                      
[112] "Jamaica"                                     
[113] "Jorda"                                       
[114] "Japa"                                        
[115] "Kenya"                                       
[116] "Kyrgyzsta"                                   
[117] "Cambodia"                                    
[118] "Kiribati"                                    
[119] "Comoros"                                     
[120] "Saint Kitts and Nevis"                       
[121] "North Korea"                                 
[122] "South Korea"                                 
[123] "Kuwait"                                      
[124] "Cayman Islands"                              
[125] "Kazakhsta"                                   
[126] "Laos"                                        
[127] "Lebano"                                      
[128] "Saint Lucia"                                 
[129] "Liechtenstei"                                
[130] "Sri Lanka"                                   
[131] "Liberia"                                     
[132] "Lesotho"                                     
[133] "Lithuania"                                   
[134] "Luxembourg"                                  
[135] "Latvia"                                      
[136] "Libya"                                       
[137] "Morocco"                                     
[138] "Monaco"                                      
[139] "Moldova"                                     
[140] "Montenegro"                                  
[141] "Saint Marti"                                 
[142] "Madagascar"                                  
[143] "Marshall Islands"                            
[144] "Macedonia"                                   
[145] "Mali"                                        
[146] "Myanmar [Burma]"                             
[147] "Mongolia"                                    
[148] "Macao"                                       
[149] "Northern Mariana Islands"                    
[150] "Martinique"                                  
[151] "Mauritania"                                  
[152] "Montserrat"                                  
[153] "Malta"                                       
[154] "Mauritius"                                   
[155] "Maldives"                                    
[156] "Malawi"                                      
[157] "Mexico"                                      
[158] "Malaysia"                                    
[159] "Mozambique"                                  
[160] "Namibia"                                     
[161] "New Caledonia"                               
[162] "Niger"                                       
[163] "Norfolk Island"                              
[164] "Nigeria"                                     
[165] "Nicaragua"                                   
[166] "Netherlands"                                 
[167] "Norway"                                      
[168] "Nepal"                                       
[169] "Nauru"                                       
[170] "Niue"                                        
[171] "New Zealand"                                 
[172] "Oma"                                         
[173] "Panama"                                      
[174] "Peru"                                        
[175] "French Polynesia"                            
[176] "Papua New Guinea"                            
[177] "Philippines"                                 
[178] "Pakista"                                     
[179] "Poland"                                      
[180] "Saint Pierre and Miquelo"                    
[181] "Pitcairn Islands"                            
[182] "Puerto Rico"                                 
[183] "Palestine"                                   
[184] "Portugal"                                    
[185] "Palau"                                       
[186] "Paraguay"                                    
[187] "Qatar"                                       
[188] "Réunio"                                      
[189] "Romania"                                     
[190] "Serbia"                                      
[191] "Russia"                                      
[192] "Rwanda"                                      
[193] "Saudi Arabia"                                
[194] "Solomon Islands"                             
[195] "Seychelles"                                  
[196] "Suda"                                        
[197] "Swede"                                       
[198] "Singapore"                                   
[199] "Saint Helena"                                
[200] "Slovenia"                                    
[201] "Svalbard and Jan Maye"                       
[202] "Slovakia"                                    
[203] "Sierra Leone"                                
[204] "San Marino"                                  
[205] "Senegal"                                     
[206] "Somalia"                                     
[207] "Suriname"                                    
[208] "South Suda"                                  
[209] "São Tomé and Príncipe"                       
[210] "El Salvador"                                 
[211] "Sint Maarte"                                 
[212] "Syria"                                       
[213] "Swaziland"                                   
[214] "Turks and Caicos Islands"                    
[215] "Chad"                                        
[216] "French Southern Territories"                 
[217] "Togo"                                        
[218] "Thailand"                                    
[219] "Tajikista"                                   
[220] "Tokelau"                                     
[221] "East Timor"                                  
[222] "Turkmenista"                                 
[223] "Tunisia"                                     
[224] "Tonga"                                       
[225] "Turkey"                                      
[226] "Trinidad and Tobago"                         
[227] "Tuvalu"                                      
[228] "Taiwa"                                       
[229] "Tanzania"                                    
[230] "Ukraine"                                     
[231] "Uganda"                                      
[232] "U.S. Minor Outlying Islands"                 
[233] "United States"                               
[234] "Uruguay"                                     
[235] "Uzbekista"                                   
[236] "Vatican City"                                
[237] "Saint Vincent and the Grenadines"            
[238] "Venezuela"                                   
[239] "British Virgin Islands"                      
[240] "U.S. Virgin Islands"                         
[241] "Vietnam"                                     
[242] "Vanuatu"                                     
[243] "Wallis and Futuna"                           
[244] "Samoa"                                       
[245] "Kosovo"                                      
[246] "Yeme"                                        
[247] "Mayotte"                                     
[248] "South Africa"                                
[249] "Zambia"                                      
[250] "Zimbabwe"                                    </code></pre>
</div>
</div>
</section>
<section id="get-all-data-into-a-dataframe" class="level2" data-number="34.9">
<h2 data-number="34.9" class="anchored" data-anchor-id="get-all-data-into-a-dataframe"><span class="header-section-number">34.9</span> Get all data into a dataframe</h2>
<div class="cell">
<div class="sourceCode cell-code" id="cb53"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb53-1"><a href="#cb53-1" aria-hidden="true" tabindex="-1"></a><span class="do">########################################################</span></span>
<span id="cb53-2"><a href="#cb53-2" aria-hidden="true" tabindex="-1"></a><span class="co">#</span></span>
<span id="cb53-3"><a href="#cb53-3" aria-hidden="true" tabindex="-1"></a><span class="co"># Now that we understand the basics we can get</span></span>
<span id="cb53-4"><a href="#cb53-4" aria-hidden="true" tabindex="-1"></a><span class="co"># all of the country data and put it in a dataframe</span></span>
<span id="cb53-5"><a href="#cb53-5" aria-hidden="true" tabindex="-1"></a><span class="co">#</span></span>
<span id="cb53-6"><a href="#cb53-6" aria-hidden="true" tabindex="-1"></a><span class="do">########################################################</span></span>
<span id="cb53-7"><a href="#cb53-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb53-8"><a href="#cb53-8" aria-hidden="true" tabindex="-1"></a>url <span class="ot">=</span> <span class="st">"https://scrapethissite.com/pages/simple/"</span></span>
<span id="cb53-9"><a href="#cb53-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb53-10"><a href="#cb53-10" aria-hidden="true" tabindex="-1"></a>the_full_html <span class="ot">=</span> <span class="fu">read_html</span>(url)</span>
<span id="cb53-11"><a href="#cb53-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb53-12"><a href="#cb53-12" aria-hidden="true" tabindex="-1"></a>countries <span class="ot">=</span> the_full_html <span class="sc">%&gt;%</span></span>
<span id="cb53-13"><a href="#cb53-13" aria-hidden="true" tabindex="-1"></a>              <span class="fu">html_elements</span>( <span class="st">".country-name"</span> ) <span class="sc">%&gt;%</span></span>
<span id="cb53-14"><a href="#cb53-14" aria-hidden="true" tabindex="-1"></a>              <span class="fu">html_text</span>()</span>
<span id="cb53-15"><a href="#cb53-15" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb53-16"><a href="#cb53-16" aria-hidden="true" tabindex="-1"></a>capitals <span class="ot">=</span> the_full_html <span class="sc">%&gt;%</span></span>
<span id="cb53-17"><a href="#cb53-17" aria-hidden="true" tabindex="-1"></a>              <span class="fu">html_elements</span>( <span class="st">".country-capital"</span> ) <span class="sc">%&gt;%</span></span>
<span id="cb53-18"><a href="#cb53-18" aria-hidden="true" tabindex="-1"></a>              <span class="fu">html_text</span>()</span>
<span id="cb53-19"><a href="#cb53-19" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb53-20"><a href="#cb53-20" aria-hidden="true" tabindex="-1"></a>population <span class="ot">=</span> the_full_html <span class="sc">%&gt;%</span></span>
<span id="cb53-21"><a href="#cb53-21" aria-hidden="true" tabindex="-1"></a>  <span class="fu">html_elements</span>( <span class="st">".country-population"</span> ) <span class="sc">%&gt;%</span></span>
<span id="cb53-22"><a href="#cb53-22" aria-hidden="true" tabindex="-1"></a>  <span class="fu">html_text</span>()</span>
<span id="cb53-23"><a href="#cb53-23" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb53-24"><a href="#cb53-24" aria-hidden="true" tabindex="-1"></a>area <span class="ot">=</span> the_full_html <span class="sc">%&gt;%</span></span>
<span id="cb53-25"><a href="#cb53-25" aria-hidden="true" tabindex="-1"></a>  <span class="fu">html_elements</span>( <span class="st">".country-area"</span> ) <span class="sc">%&gt;%</span></span>
<span id="cb53-26"><a href="#cb53-26" aria-hidden="true" tabindex="-1"></a>  <span class="fu">html_text</span>()</span>
<span id="cb53-27"><a href="#cb53-27" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb53-28"><a href="#cb53-28" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb53-29"><a href="#cb53-29" aria-hidden="true" tabindex="-1"></a>countries</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>  [1] "\n                            \n                            Andorra\n                        "                                     
  [2] "\n                            \n                            United Arab Emirates\n                        "                        
  [3] "\n                            \n                            Afghanistan\n                        "                                 
  [4] "\n                            \n                            Antigua and Barbuda\n                        "                         
  [5] "\n                            \n                            Anguilla\n                        "                                    
  [6] "\n                            \n                            Albania\n                        "                                     
  [7] "\n                            \n                            Armenia\n                        "                                     
  [8] "\n                            \n                            Angola\n                        "                                      
  [9] "\n                            \n                            Antarctica\n                        "                                  
 [10] "\n                            \n                            Argentina\n                        "                                   
 [11] "\n                            \n                            American Samoa\n                        "                              
 [12] "\n                            \n                            Austria\n                        "                                     
 [13] "\n                            \n                            Australia\n                        "                                   
 [14] "\n                            \n                            Aruba\n                        "                                       
 [15] "\n                            \n                            Åland\n                        "                                       
 [16] "\n                            \n                            Azerbaijan\n                        "                                  
 [17] "\n                            \n                            Bosnia and Herzegovina\n                        "                      
 [18] "\n                            \n                            Barbados\n                        "                                    
 [19] "\n                            \n                            Bangladesh\n                        "                                  
 [20] "\n                            \n                            Belgium\n                        "                                     
 [21] "\n                            \n                            Burkina Faso\n                        "                                
 [22] "\n                            \n                            Bulgaria\n                        "                                    
 [23] "\n                            \n                            Bahrain\n                        "                                     
 [24] "\n                            \n                            Burundi\n                        "                                     
 [25] "\n                            \n                            Benin\n                        "                                       
 [26] "\n                            \n                            Saint Barthélemy\n                        "                            
 [27] "\n                            \n                            Bermuda\n                        "                                     
 [28] "\n                            \n                            Brunei\n                        "                                      
 [29] "\n                            \n                            Bolivia\n                        "                                     
 [30] "\n                            \n                            Bonaire\n                        "                                     
 [31] "\n                            \n                            Brazil\n                        "                                      
 [32] "\n                            \n                            Bahamas\n                        "                                     
 [33] "\n                            \n                            Bhutan\n                        "                                      
 [34] "\n                            \n                            Bouvet Island\n                        "                               
 [35] "\n                            \n                            Botswana\n                        "                                    
 [36] "\n                            \n                            Belarus\n                        "                                     
 [37] "\n                            \n                            Belize\n                        "                                      
 [38] "\n                            \n                            Canada\n                        "                                      
 [39] "\n                            \n                            Cocos [Keeling] Islands\n                        "                     
 [40] "\n                            \n                            Democratic Republic of the Congo\n                        "            
 [41] "\n                            \n                            Central African Republic\n                        "                    
 [42] "\n                            \n                            Republic of the Congo\n                        "                       
 [43] "\n                            \n                            Switzerland\n                        "                                 
 [44] "\n                            \n                            Ivory Coast\n                        "                                 
 [45] "\n                            \n                            Cook Islands\n                        "                                
 [46] "\n                            \n                            Chile\n                        "                                       
 [47] "\n                            \n                            Cameroon\n                        "                                    
 [48] "\n                            \n                            China\n                        "                                       
 [49] "\n                            \n                            Colombia\n                        "                                    
 [50] "\n                            \n                            Costa Rica\n                        "                                  
 [51] "\n                            \n                            Cuba\n                        "                                        
 [52] "\n                            \n                            Cape Verde\n                        "                                  
 [53] "\n                            \n                            Curacao\n                        "                                     
 [54] "\n                            \n                            Christmas Island\n                        "                            
 [55] "\n                            \n                            Cyprus\n                        "                                      
 [56] "\n                            \n                            Czech Republic\n                        "                              
 [57] "\n                            \n                            Germany\n                        "                                     
 [58] "\n                            \n                            Djibouti\n                        "                                    
 [59] "\n                            \n                            Denmark\n                        "                                     
 [60] "\n                            \n                            Dominica\n                        "                                    
 [61] "\n                            \n                            Dominican Republic\n                        "                          
 [62] "\n                            \n                            Algeria\n                        "                                     
 [63] "\n                            \n                            Ecuador\n                        "                                     
 [64] "\n                            \n                            Estonia\n                        "                                     
 [65] "\n                            \n                            Egypt\n                        "                                       
 [66] "\n                            \n                            Western Sahara\n                        "                              
 [67] "\n                            \n                            Eritrea\n                        "                                     
 [68] "\n                            \n                            Spain\n                        "                                       
 [69] "\n                            \n                            Ethiopia\n                        "                                    
 [70] "\n                            \n                            Finland\n                        "                                     
 [71] "\n                            \n                            Fiji\n                        "                                        
 [72] "\n                            \n                            Falkland Islands\n                        "                            
 [73] "\n                            \n                            Micronesia\n                        "                                  
 [74] "\n                            \n                            Faroe Islands\n                        "                               
 [75] "\n                            \n                            France\n                        "                                      
 [76] "\n                            \n                            Gabon\n                        "                                       
 [77] "\n                            \n                            United Kingdom\n                        "                              
 [78] "\n                            \n                            Grenada\n                        "                                     
 [79] "\n                            \n                            Georgia\n                        "                                     
 [80] "\n                            \n                            French Guiana\n                        "                               
 [81] "\n                            \n                            Guernsey\n                        "                                    
 [82] "\n                            \n                            Ghana\n                        "                                       
 [83] "\n                            \n                            Gibraltar\n                        "                                   
 [84] "\n                            \n                            Greenland\n                        "                                   
 [85] "\n                            \n                            Gambia\n                        "                                      
 [86] "\n                            \n                            Guinea\n                        "                                      
 [87] "\n                            \n                            Guadeloupe\n                        "                                  
 [88] "\n                            \n                            Equatorial Guinea\n                        "                           
 [89] "\n                            \n                            Greece\n                        "                                      
 [90] "\n                            \n                            South Georgia and the South Sandwich Islands\n                        "
 [91] "\n                            \n                            Guatemala\n                        "                                   
 [92] "\n                            \n                            Guam\n                        "                                        
 [93] "\n                            \n                            Guinea-Bissau\n                        "                               
 [94] "\n                            \n                            Guyana\n                        "                                      
 [95] "\n                            \n                            Hong Kong\n                        "                                   
 [96] "\n                            \n                            Heard Island and McDonald Islands\n                        "           
 [97] "\n                            \n                            Honduras\n                        "                                    
 [98] "\n                            \n                            Croatia\n                        "                                     
 [99] "\n                            \n                            Haiti\n                        "                                       
[100] "\n                            \n                            Hungary\n                        "                                     
[101] "\n                            \n                            Indonesia\n                        "                                   
[102] "\n                            \n                            Ireland\n                        "                                     
[103] "\n                            \n                            Israel\n                        "                                      
[104] "\n                            \n                            Isle of Man\n                        "                                 
[105] "\n                            \n                            India\n                        "                                       
[106] "\n                            \n                            British Indian Ocean Territory\n                        "              
[107] "\n                            \n                            Iraq\n                        "                                        
[108] "\n                            \n                            Iran\n                        "                                        
[109] "\n                            \n                            Iceland\n                        "                                     
[110] "\n                            \n                            Italy\n                        "                                       
[111] "\n                            \n                            Jersey\n                        "                                      
[112] "\n                            \n                            Jamaica\n                        "                                     
[113] "\n                            \n                            Jordan\n                        "                                      
[114] "\n                            \n                            Japan\n                        "                                       
[115] "\n                            \n                            Kenya\n                        "                                       
[116] "\n                            \n                            Kyrgyzstan\n                        "                                  
[117] "\n                            \n                            Cambodia\n                        "                                    
[118] "\n                            \n                            Kiribati\n                        "                                    
[119] "\n                            \n                            Comoros\n                        "                                     
[120] "\n                            \n                            Saint Kitts and Nevis\n                        "                       
[121] "\n                            \n                            North Korea\n                        "                                 
[122] "\n                            \n                            South Korea\n                        "                                 
[123] "\n                            \n                            Kuwait\n                        "                                      
[124] "\n                            \n                            Cayman Islands\n                        "                              
[125] "\n                            \n                            Kazakhstan\n                        "                                  
[126] "\n                            \n                            Laos\n                        "                                        
[127] "\n                            \n                            Lebanon\n                        "                                     
[128] "\n                            \n                            Saint Lucia\n                        "                                 
[129] "\n                            \n                            Liechtenstein\n                        "                               
[130] "\n                            \n                            Sri Lanka\n                        "                                   
[131] "\n                            \n                            Liberia\n                        "                                     
[132] "\n                            \n                            Lesotho\n                        "                                     
[133] "\n                            \n                            Lithuania\n                        "                                   
[134] "\n                            \n                            Luxembourg\n                        "                                  
[135] "\n                            \n                            Latvia\n                        "                                      
[136] "\n                            \n                            Libya\n                        "                                       
[137] "\n                            \n                            Morocco\n                        "                                     
[138] "\n                            \n                            Monaco\n                        "                                      
[139] "\n                            \n                            Moldova\n                        "                                     
[140] "\n                            \n                            Montenegro\n                        "                                  
[141] "\n                            \n                            Saint Martin\n                        "                                
[142] "\n                            \n                            Madagascar\n                        "                                  
[143] "\n                            \n                            Marshall Islands\n                        "                            
[144] "\n                            \n                            Macedonia\n                        "                                   
[145] "\n                            \n                            Mali\n                        "                                        
[146] "\n                            \n                            Myanmar [Burma]\n                        "                             
[147] "\n                            \n                            Mongolia\n                        "                                    
[148] "\n                            \n                            Macao\n                        "                                       
[149] "\n                            \n                            Northern Mariana Islands\n                        "                    
[150] "\n                            \n                            Martinique\n                        "                                  
[151] "\n                            \n                            Mauritania\n                        "                                  
[152] "\n                            \n                            Montserrat\n                        "                                  
[153] "\n                            \n                            Malta\n                        "                                       
[154] "\n                            \n                            Mauritius\n                        "                                   
[155] "\n                            \n                            Maldives\n                        "                                    
[156] "\n                            \n                            Malawi\n                        "                                      
[157] "\n                            \n                            Mexico\n                        "                                      
[158] "\n                            \n                            Malaysia\n                        "                                    
[159] "\n                            \n                            Mozambique\n                        "                                  
[160] "\n                            \n                            Namibia\n                        "                                     
[161] "\n                            \n                            New Caledonia\n                        "                               
[162] "\n                            \n                            Niger\n                        "                                       
[163] "\n                            \n                            Norfolk Island\n                        "                              
[164] "\n                            \n                            Nigeria\n                        "                                     
[165] "\n                            \n                            Nicaragua\n                        "                                   
[166] "\n                            \n                            Netherlands\n                        "                                 
[167] "\n                            \n                            Norway\n                        "                                      
[168] "\n                            \n                            Nepal\n                        "                                       
[169] "\n                            \n                            Nauru\n                        "                                       
[170] "\n                            \n                            Niue\n                        "                                        
[171] "\n                            \n                            New Zealand\n                        "                                 
[172] "\n                            \n                            Oman\n                        "                                        
[173] "\n                            \n                            Panama\n                        "                                      
[174] "\n                            \n                            Peru\n                        "                                        
[175] "\n                            \n                            French Polynesia\n                        "                            
[176] "\n                            \n                            Papua New Guinea\n                        "                            
[177] "\n                            \n                            Philippines\n                        "                                 
[178] "\n                            \n                            Pakistan\n                        "                                    
[179] "\n                            \n                            Poland\n                        "                                      
[180] "\n                            \n                            Saint Pierre and Miquelon\n                        "                   
[181] "\n                            \n                            Pitcairn Islands\n                        "                            
[182] "\n                            \n                            Puerto Rico\n                        "                                 
[183] "\n                            \n                            Palestine\n                        "                                   
[184] "\n                            \n                            Portugal\n                        "                                    
[185] "\n                            \n                            Palau\n                        "                                       
[186] "\n                            \n                            Paraguay\n                        "                                    
[187] "\n                            \n                            Qatar\n                        "                                       
[188] "\n                            \n                            Réunion\n                        "                                     
[189] "\n                            \n                            Romania\n                        "                                     
[190] "\n                            \n                            Serbia\n                        "                                      
[191] "\n                            \n                            Russia\n                        "                                      
[192] "\n                            \n                            Rwanda\n                        "                                      
[193] "\n                            \n                            Saudi Arabia\n                        "                                
[194] "\n                            \n                            Solomon Islands\n                        "                             
[195] "\n                            \n                            Seychelles\n                        "                                  
[196] "\n                            \n                            Sudan\n                        "                                       
[197] "\n                            \n                            Sweden\n                        "                                      
[198] "\n                            \n                            Singapore\n                        "                                   
[199] "\n                            \n                            Saint Helena\n                        "                                
[200] "\n                            \n                            Slovenia\n                        "                                    
[201] "\n                            \n                            Svalbard and Jan Mayen\n                        "                      
[202] "\n                            \n                            Slovakia\n                        "                                    
[203] "\n                            \n                            Sierra Leone\n                        "                                
[204] "\n                            \n                            San Marino\n                        "                                  
[205] "\n                            \n                            Senegal\n                        "                                     
[206] "\n                            \n                            Somalia\n                        "                                     
[207] "\n                            \n                            Suriname\n                        "                                    
[208] "\n                            \n                            South Sudan\n                        "                                 
[209] "\n                            \n                            São Tomé and Príncipe\n                        "                       
[210] "\n                            \n                            El Salvador\n                        "                                 
[211] "\n                            \n                            Sint Maarten\n                        "                                
[212] "\n                            \n                            Syria\n                        "                                       
[213] "\n                            \n                            Swaziland\n                        "                                   
[214] "\n                            \n                            Turks and Caicos Islands\n                        "                    
[215] "\n                            \n                            Chad\n                        "                                        
[216] "\n                            \n                            French Southern Territories\n                        "                 
[217] "\n                            \n                            Togo\n                        "                                        
[218] "\n                            \n                            Thailand\n                        "                                    
[219] "\n                            \n                            Tajikistan\n                        "                                  
[220] "\n                            \n                            Tokelau\n                        "                                     
[221] "\n                            \n                            East Timor\n                        "                                  
[222] "\n                            \n                            Turkmenistan\n                        "                                
[223] "\n                            \n                            Tunisia\n                        "                                     
[224] "\n                            \n                            Tonga\n                        "                                       
[225] "\n                            \n                            Turkey\n                        "                                      
[226] "\n                            \n                            Trinidad and Tobago\n                        "                         
[227] "\n                            \n                            Tuvalu\n                        "                                      
[228] "\n                            \n                            Taiwan\n                        "                                      
[229] "\n                            \n                            Tanzania\n                        "                                    
[230] "\n                            \n                            Ukraine\n                        "                                     
[231] "\n                            \n                            Uganda\n                        "                                      
[232] "\n                            \n                            U.S. Minor Outlying Islands\n                        "                 
[233] "\n                            \n                            United States\n                        "                               
[234] "\n                            \n                            Uruguay\n                        "                                     
[235] "\n                            \n                            Uzbekistan\n                        "                                  
[236] "\n                            \n                            Vatican City\n                        "                                
[237] "\n                            \n                            Saint Vincent and the Grenadines\n                        "            
[238] "\n                            \n                            Venezuela\n                        "                                   
[239] "\n                            \n                            British Virgin Islands\n                        "                      
[240] "\n                            \n                            U.S. Virgin Islands\n                        "                         
[241] "\n                            \n                            Vietnam\n                        "                                     
[242] "\n                            \n                            Vanuatu\n                        "                                     
[243] "\n                            \n                            Wallis and Futuna\n                        "                           
[244] "\n                            \n                            Samoa\n                        "                                       
[245] "\n                            \n                            Kosovo\n                        "                                      
[246] "\n                            \n                            Yemen\n                        "                                       
[247] "\n                            \n                            Mayotte\n                        "                                     
[248] "\n                            \n                            South Africa\n                        "                                
[249] "\n                            \n                            Zambia\n                        "                                      
[250] "\n                            \n                            Zimbabwe\n                        "                                    </code></pre>
</div>
<div class="sourceCode cell-code" id="cb55"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb55-1"><a href="#cb55-1" aria-hidden="true" tabindex="-1"></a><span class="co"># remove the spaces and newline characters from countries</span></span>
<span id="cb55-2"><a href="#cb55-2" aria-hidden="true" tabindex="-1"></a>countries<span class="ot">=</span> <span class="fu">gsub</span>(<span class="st">"</span><span class="sc">\\</span><span class="st">n"</span>, <span class="st">""</span>, countries)</span>
<span id="cb55-3"><a href="#cb55-3" aria-hidden="true" tabindex="-1"></a>countries<span class="ot">=</span> <span class="fu">gsub</span>(<span class="st">"(^ *)|( *$)"</span>, <span class="st">""</span> , countries)</span>
<span id="cb55-4"><a href="#cb55-4" aria-hidden="true" tabindex="-1"></a>countries</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>  [1] "Andorra"                                     
  [2] "United Arab Emirates"                        
  [3] "Afghanistan"                                 
  [4] "Antigua and Barbuda"                         
  [5] "Anguilla"                                    
  [6] "Albania"                                     
  [7] "Armenia"                                     
  [8] "Angola"                                      
  [9] "Antarctica"                                  
 [10] "Argentina"                                   
 [11] "American Samoa"                              
 [12] "Austria"                                     
 [13] "Australia"                                   
 [14] "Aruba"                                       
 [15] "Åland"                                       
 [16] "Azerbaijan"                                  
 [17] "Bosnia and Herzegovina"                      
 [18] "Barbados"                                    
 [19] "Bangladesh"                                  
 [20] "Belgium"                                     
 [21] "Burkina Faso"                                
 [22] "Bulgaria"                                    
 [23] "Bahrain"                                     
 [24] "Burundi"                                     
 [25] "Benin"                                       
 [26] "Saint Barthélemy"                            
 [27] "Bermuda"                                     
 [28] "Brunei"                                      
 [29] "Bolivia"                                     
 [30] "Bonaire"                                     
 [31] "Brazil"                                      
 [32] "Bahamas"                                     
 [33] "Bhutan"                                      
 [34] "Bouvet Island"                               
 [35] "Botswana"                                    
 [36] "Belarus"                                     
 [37] "Belize"                                      
 [38] "Canada"                                      
 [39] "Cocos [Keeling] Islands"                     
 [40] "Democratic Republic of the Congo"            
 [41] "Central African Republic"                    
 [42] "Republic of the Congo"                       
 [43] "Switzerland"                                 
 [44] "Ivory Coast"                                 
 [45] "Cook Islands"                                
 [46] "Chile"                                       
 [47] "Cameroon"                                    
 [48] "China"                                       
 [49] "Colombia"                                    
 [50] "Costa Rica"                                  
 [51] "Cuba"                                        
 [52] "Cape Verde"                                  
 [53] "Curacao"                                     
 [54] "Christmas Island"                            
 [55] "Cyprus"                                      
 [56] "Czech Republic"                              
 [57] "Germany"                                     
 [58] "Djibouti"                                    
 [59] "Denmark"                                     
 [60] "Dominica"                                    
 [61] "Dominican Republic"                          
 [62] "Algeria"                                     
 [63] "Ecuador"                                     
 [64] "Estonia"                                     
 [65] "Egypt"                                       
 [66] "Western Sahara"                              
 [67] "Eritrea"                                     
 [68] "Spain"                                       
 [69] "Ethiopia"                                    
 [70] "Finland"                                     
 [71] "Fiji"                                        
 [72] "Falkland Islands"                            
 [73] "Micronesia"                                  
 [74] "Faroe Islands"                               
 [75] "France"                                      
 [76] "Gabon"                                       
 [77] "United Kingdom"                              
 [78] "Grenada"                                     
 [79] "Georgia"                                     
 [80] "French Guiana"                               
 [81] "Guernsey"                                    
 [82] "Ghana"                                       
 [83] "Gibraltar"                                   
 [84] "Greenland"                                   
 [85] "Gambia"                                      
 [86] "Guinea"                                      
 [87] "Guadeloupe"                                  
 [88] "Equatorial Guinea"                           
 [89] "Greece"                                      
 [90] "South Georgia and the South Sandwich Islands"
 [91] "Guatemala"                                   
 [92] "Guam"                                        
 [93] "Guinea-Bissau"                               
 [94] "Guyana"                                      
 [95] "Hong Kong"                                   
 [96] "Heard Island and McDonald Islands"           
 [97] "Honduras"                                    
 [98] "Croatia"                                     
 [99] "Haiti"                                       
[100] "Hungary"                                     
[101] "Indonesia"                                   
[102] "Ireland"                                     
[103] "Israel"                                      
[104] "Isle of Man"                                 
[105] "India"                                       
[106] "British Indian Ocean Territory"              
[107] "Iraq"                                        
[108] "Iran"                                        
[109] "Iceland"                                     
[110] "Italy"                                       
[111] "Jersey"                                      
[112] "Jamaica"                                     
[113] "Jordan"                                      
[114] "Japan"                                       
[115] "Kenya"                                       
[116] "Kyrgyzstan"                                  
[117] "Cambodia"                                    
[118] "Kiribati"                                    
[119] "Comoros"                                     
[120] "Saint Kitts and Nevis"                       
[121] "North Korea"                                 
[122] "South Korea"                                 
[123] "Kuwait"                                      
[124] "Cayman Islands"                              
[125] "Kazakhstan"                                  
[126] "Laos"                                        
[127] "Lebanon"                                     
[128] "Saint Lucia"                                 
[129] "Liechtenstein"                               
[130] "Sri Lanka"                                   
[131] "Liberia"                                     
[132] "Lesotho"                                     
[133] "Lithuania"                                   
[134] "Luxembourg"                                  
[135] "Latvia"                                      
[136] "Libya"                                       
[137] "Morocco"                                     
[138] "Monaco"                                      
[139] "Moldova"                                     
[140] "Montenegro"                                  
[141] "Saint Martin"                                
[142] "Madagascar"                                  
[143] "Marshall Islands"                            
[144] "Macedonia"                                   
[145] "Mali"                                        
[146] "Myanmar [Burma]"                             
[147] "Mongolia"                                    
[148] "Macao"                                       
[149] "Northern Mariana Islands"                    
[150] "Martinique"                                  
[151] "Mauritania"                                  
[152] "Montserrat"                                  
[153] "Malta"                                       
[154] "Mauritius"                                   
[155] "Maldives"                                    
[156] "Malawi"                                      
[157] "Mexico"                                      
[158] "Malaysia"                                    
[159] "Mozambique"                                  
[160] "Namibia"                                     
[161] "New Caledonia"                               
[162] "Niger"                                       
[163] "Norfolk Island"                              
[164] "Nigeria"                                     
[165] "Nicaragua"                                   
[166] "Netherlands"                                 
[167] "Norway"                                      
[168] "Nepal"                                       
[169] "Nauru"                                       
[170] "Niue"                                        
[171] "New Zealand"                                 
[172] "Oman"                                        
[173] "Panama"                                      
[174] "Peru"                                        
[175] "French Polynesia"                            
[176] "Papua New Guinea"                            
[177] "Philippines"                                 
[178] "Pakistan"                                    
[179] "Poland"                                      
[180] "Saint Pierre and Miquelon"                   
[181] "Pitcairn Islands"                            
[182] "Puerto Rico"                                 
[183] "Palestine"                                   
[184] "Portugal"                                    
[185] "Palau"                                       
[186] "Paraguay"                                    
[187] "Qatar"                                       
[188] "Réunion"                                     
[189] "Romania"                                     
[190] "Serbia"                                      
[191] "Russia"                                      
[192] "Rwanda"                                      
[193] "Saudi Arabia"                                
[194] "Solomon Islands"                             
[195] "Seychelles"                                  
[196] "Sudan"                                       
[197] "Sweden"                                      
[198] "Singapore"                                   
[199] "Saint Helena"                                
[200] "Slovenia"                                    
[201] "Svalbard and Jan Mayen"                      
[202] "Slovakia"                                    
[203] "Sierra Leone"                                
[204] "San Marino"                                  
[205] "Senegal"                                     
[206] "Somalia"                                     
[207] "Suriname"                                    
[208] "South Sudan"                                 
[209] "São Tomé and Príncipe"                       
[210] "El Salvador"                                 
[211] "Sint Maarten"                                
[212] "Syria"                                       
[213] "Swaziland"                                   
[214] "Turks and Caicos Islands"                    
[215] "Chad"                                        
[216] "French Southern Territories"                 
[217] "Togo"                                        
[218] "Thailand"                                    
[219] "Tajikistan"                                  
[220] "Tokelau"                                     
[221] "East Timor"                                  
[222] "Turkmenistan"                                
[223] "Tunisia"                                     
[224] "Tonga"                                       
[225] "Turkey"                                      
[226] "Trinidad and Tobago"                         
[227] "Tuvalu"                                      
[228] "Taiwan"                                      
[229] "Tanzania"                                    
[230] "Ukraine"                                     
[231] "Uganda"                                      
[232] "U.S. Minor Outlying Islands"                 
[233] "United States"                               
[234] "Uruguay"                                     
[235] "Uzbekistan"                                  
[236] "Vatican City"                                
[237] "Saint Vincent and the Grenadines"            
[238] "Venezuela"                                   
[239] "British Virgin Islands"                      
[240] "U.S. Virgin Islands"                         
[241] "Vietnam"                                     
[242] "Vanuatu"                                     
[243] "Wallis and Futuna"                           
[244] "Samoa"                                       
[245] "Kosovo"                                      
[246] "Yemen"                                       
[247] "Mayotte"                                     
[248] "South Africa"                                
[249] "Zambia"                                      
[250] "Zimbabwe"                                    </code></pre>
</div>
<div class="sourceCode cell-code" id="cb57"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb57-1"><a href="#cb57-1" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(countries,<span class="dv">5</span>)  <span class="co"># the United Arab Emirates has no spaces! Let's fix that ...</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "Andorra"              "United Arab Emirates" "Afghanistan"         
[4] "Antigua and Barbuda"  "Anguilla"            </code></pre>
</div>
<div class="sourceCode cell-code" id="cb59"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb59-1"><a href="#cb59-1" aria-hidden="true" tabindex="-1"></a>countries <span class="ot">=</span> the_full_html <span class="sc">%&gt;%</span></span>
<span id="cb59-2"><a href="#cb59-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">html_elements</span>( <span class="st">".country-name"</span> ) <span class="sc">%&gt;%</span></span>
<span id="cb59-3"><a href="#cb59-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">html_text</span>()</span>
<span id="cb59-4"><a href="#cb59-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb59-5"><a href="#cb59-5" aria-hidden="true" tabindex="-1"></a><span class="co"># remove the spaces and newline characters from countries</span></span>
<span id="cb59-6"><a href="#cb59-6" aria-hidden="true" tabindex="-1"></a><span class="co"># Do not remove spaces between words</span></span>
<span id="cb59-7"><a href="#cb59-7" aria-hidden="true" tabindex="-1"></a>countries<span class="ot">=</span> <span class="fu">gsub</span>(<span class="st">"</span><span class="sc">\\</span><span class="st">n"</span>, <span class="st">""</span>, countries)</span>
<span id="cb59-8"><a href="#cb59-8" aria-hidden="true" tabindex="-1"></a>countries<span class="ot">=</span> <span class="fu">gsub</span>(<span class="st">"^ *"</span>, <span class="st">""</span> , countries)  <span class="co"># get rid of spaces before the text</span></span>
<span id="cb59-9"><a href="#cb59-9" aria-hidden="true" tabindex="-1"></a>countries<span class="ot">=</span> <span class="fu">gsub</span>(<span class="st">" *$"</span>, <span class="st">""</span> , countries)  <span class="co"># get rid of spaces after the text</span></span>
<span id="cb59-10"><a href="#cb59-10" aria-hidden="true" tabindex="-1"></a>countries</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>  [1] "Andorra"                                     
  [2] "United Arab Emirates"                        
  [3] "Afghanistan"                                 
  [4] "Antigua and Barbuda"                         
  [5] "Anguilla"                                    
  [6] "Albania"                                     
  [7] "Armenia"                                     
  [8] "Angola"                                      
  [9] "Antarctica"                                  
 [10] "Argentina"                                   
 [11] "American Samoa"                              
 [12] "Austria"                                     
 [13] "Australia"                                   
 [14] "Aruba"                                       
 [15] "Åland"                                       
 [16] "Azerbaijan"                                  
 [17] "Bosnia and Herzegovina"                      
 [18] "Barbados"                                    
 [19] "Bangladesh"                                  
 [20] "Belgium"                                     
 [21] "Burkina Faso"                                
 [22] "Bulgaria"                                    
 [23] "Bahrain"                                     
 [24] "Burundi"                                     
 [25] "Benin"                                       
 [26] "Saint Barthélemy"                            
 [27] "Bermuda"                                     
 [28] "Brunei"                                      
 [29] "Bolivia"                                     
 [30] "Bonaire"                                     
 [31] "Brazil"                                      
 [32] "Bahamas"                                     
 [33] "Bhutan"                                      
 [34] "Bouvet Island"                               
 [35] "Botswana"                                    
 [36] "Belarus"                                     
 [37] "Belize"                                      
 [38] "Canada"                                      
 [39] "Cocos [Keeling] Islands"                     
 [40] "Democratic Republic of the Congo"            
 [41] "Central African Republic"                    
 [42] "Republic of the Congo"                       
 [43] "Switzerland"                                 
 [44] "Ivory Coast"                                 
 [45] "Cook Islands"                                
 [46] "Chile"                                       
 [47] "Cameroon"                                    
 [48] "China"                                       
 [49] "Colombia"                                    
 [50] "Costa Rica"                                  
 [51] "Cuba"                                        
 [52] "Cape Verde"                                  
 [53] "Curacao"                                     
 [54] "Christmas Island"                            
 [55] "Cyprus"                                      
 [56] "Czech Republic"                              
 [57] "Germany"                                     
 [58] "Djibouti"                                    
 [59] "Denmark"                                     
 [60] "Dominica"                                    
 [61] "Dominican Republic"                          
 [62] "Algeria"                                     
 [63] "Ecuador"                                     
 [64] "Estonia"                                     
 [65] "Egypt"                                       
 [66] "Western Sahara"                              
 [67] "Eritrea"                                     
 [68] "Spain"                                       
 [69] "Ethiopia"                                    
 [70] "Finland"                                     
 [71] "Fiji"                                        
 [72] "Falkland Islands"                            
 [73] "Micronesia"                                  
 [74] "Faroe Islands"                               
 [75] "France"                                      
 [76] "Gabon"                                       
 [77] "United Kingdom"                              
 [78] "Grenada"                                     
 [79] "Georgia"                                     
 [80] "French Guiana"                               
 [81] "Guernsey"                                    
 [82] "Ghana"                                       
 [83] "Gibraltar"                                   
 [84] "Greenland"                                   
 [85] "Gambia"                                      
 [86] "Guinea"                                      
 [87] "Guadeloupe"                                  
 [88] "Equatorial Guinea"                           
 [89] "Greece"                                      
 [90] "South Georgia and the South Sandwich Islands"
 [91] "Guatemala"                                   
 [92] "Guam"                                        
 [93] "Guinea-Bissau"                               
 [94] "Guyana"                                      
 [95] "Hong Kong"                                   
 [96] "Heard Island and McDonald Islands"           
 [97] "Honduras"                                    
 [98] "Croatia"                                     
 [99] "Haiti"                                       
[100] "Hungary"                                     
[101] "Indonesia"                                   
[102] "Ireland"                                     
[103] "Israel"                                      
[104] "Isle of Man"                                 
[105] "India"                                       
[106] "British Indian Ocean Territory"              
[107] "Iraq"                                        
[108] "Iran"                                        
[109] "Iceland"                                     
[110] "Italy"                                       
[111] "Jersey"                                      
[112] "Jamaica"                                     
[113] "Jordan"                                      
[114] "Japan"                                       
[115] "Kenya"                                       
[116] "Kyrgyzstan"                                  
[117] "Cambodia"                                    
[118] "Kiribati"                                    
[119] "Comoros"                                     
[120] "Saint Kitts and Nevis"                       
[121] "North Korea"                                 
[122] "South Korea"                                 
[123] "Kuwait"                                      
[124] "Cayman Islands"                              
[125] "Kazakhstan"                                  
[126] "Laos"                                        
[127] "Lebanon"                                     
[128] "Saint Lucia"                                 
[129] "Liechtenstein"                               
[130] "Sri Lanka"                                   
[131] "Liberia"                                     
[132] "Lesotho"                                     
[133] "Lithuania"                                   
[134] "Luxembourg"                                  
[135] "Latvia"                                      
[136] "Libya"                                       
[137] "Morocco"                                     
[138] "Monaco"                                      
[139] "Moldova"                                     
[140] "Montenegro"                                  
[141] "Saint Martin"                                
[142] "Madagascar"                                  
[143] "Marshall Islands"                            
[144] "Macedonia"                                   
[145] "Mali"                                        
[146] "Myanmar [Burma]"                             
[147] "Mongolia"                                    
[148] "Macao"                                       
[149] "Northern Mariana Islands"                    
[150] "Martinique"                                  
[151] "Mauritania"                                  
[152] "Montserrat"                                  
[153] "Malta"                                       
[154] "Mauritius"                                   
[155] "Maldives"                                    
[156] "Malawi"                                      
[157] "Mexico"                                      
[158] "Malaysia"                                    
[159] "Mozambique"                                  
[160] "Namibia"                                     
[161] "New Caledonia"                               
[162] "Niger"                                       
[163] "Norfolk Island"                              
[164] "Nigeria"                                     
[165] "Nicaragua"                                   
[166] "Netherlands"                                 
[167] "Norway"                                      
[168] "Nepal"                                       
[169] "Nauru"                                       
[170] "Niue"                                        
[171] "New Zealand"                                 
[172] "Oman"                                        
[173] "Panama"                                      
[174] "Peru"                                        
[175] "French Polynesia"                            
[176] "Papua New Guinea"                            
[177] "Philippines"                                 
[178] "Pakistan"                                    
[179] "Poland"                                      
[180] "Saint Pierre and Miquelon"                   
[181] "Pitcairn Islands"                            
[182] "Puerto Rico"                                 
[183] "Palestine"                                   
[184] "Portugal"                                    
[185] "Palau"                                       
[186] "Paraguay"                                    
[187] "Qatar"                                       
[188] "Réunion"                                     
[189] "Romania"                                     
[190] "Serbia"                                      
[191] "Russia"                                      
[192] "Rwanda"                                      
[193] "Saudi Arabia"                                
[194] "Solomon Islands"                             
[195] "Seychelles"                                  
[196] "Sudan"                                       
[197] "Sweden"                                      
[198] "Singapore"                                   
[199] "Saint Helena"                                
[200] "Slovenia"                                    
[201] "Svalbard and Jan Mayen"                      
[202] "Slovakia"                                    
[203] "Sierra Leone"                                
[204] "San Marino"                                  
[205] "Senegal"                                     
[206] "Somalia"                                     
[207] "Suriname"                                    
[208] "South Sudan"                                 
[209] "São Tomé and Príncipe"                       
[210] "El Salvador"                                 
[211] "Sint Maarten"                                
[212] "Syria"                                       
[213] "Swaziland"                                   
[214] "Turks and Caicos Islands"                    
[215] "Chad"                                        
[216] "French Southern Territories"                 
[217] "Togo"                                        
[218] "Thailand"                                    
[219] "Tajikistan"                                  
[220] "Tokelau"                                     
[221] "East Timor"                                  
[222] "Turkmenistan"                                
[223] "Tunisia"                                     
[224] "Tonga"                                       
[225] "Turkey"                                      
[226] "Trinidad and Tobago"                         
[227] "Tuvalu"                                      
[228] "Taiwan"                                      
[229] "Tanzania"                                    
[230] "Ukraine"                                     
[231] "Uganda"                                      
[232] "U.S. Minor Outlying Islands"                 
[233] "United States"                               
[234] "Uruguay"                                     
[235] "Uzbekistan"                                  
[236] "Vatican City"                                
[237] "Saint Vincent and the Grenadines"            
[238] "Venezuela"                                   
[239] "British Virgin Islands"                      
[240] "U.S. Virgin Islands"                         
[241] "Vietnam"                                     
[242] "Vanuatu"                                     
[243] "Wallis and Futuna"                           
[244] "Samoa"                                       
[245] "Kosovo"                                      
[246] "Yemen"                                       
[247] "Mayotte"                                     
[248] "South Africa"                                
[249] "Zambia"                                      
[250] "Zimbabwe"                                    </code></pre>
</div>
<div class="sourceCode cell-code" id="cb61"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb61-1"><a href="#cb61-1" aria-hidden="true" tabindex="-1"></a>capitals</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>  [1] "Andorra la Vella"    "Abu Dhabi"           "Kabul"              
  [4] "St. John's"          "The Valley"          "Tirana"             
  [7] "Yerevan"             "Luanda"              "None"               
 [10] "Buenos Aires"        "Pago Pago"           "Vienna"             
 [13] "Canberra"            "Oranjestad"          "Mariehamn"          
 [16] "Baku"                "Sarajevo"            "Bridgetown"         
 [19] "Dhaka"               "Brussels"            "Ouagadougou"        
 [22] "Sofia"               "Manama"              "Bujumbura"          
 [25] "Porto-Novo"          "Gustavia"            "Hamilton"           
 [28] "Bandar Seri Begawan" "Sucre"               "Kralendijk"         
 [31] "Brasília"            "Nassau"              "Thimphu"            
 [34] "None"                "Gaborone"            "Minsk"              
 [37] "Belmopan"            "Ottawa"              "West Island"        
 [40] "Kinshasa"            "Bangui"              "Brazzaville"        
 [43] "Bern"                "Yamoussoukro"        "Avarua"             
 [46] "Santiago"            "Yaoundé"             "Beijing"            
 [49] "Bogotá"              "San José"            "Havana"             
 [52] "Praia"               "Willemstad"          "Flying Fish Cove"   
 [55] "Nicosia"             "Prague"              "Berlin"             
 [58] "Djibouti"            "Copenhagen"          "Roseau"             
 [61] "Santo Domingo"       "Algiers"             "Quito"              
 [64] "Tallinn"             "Cairo"               "Laâyoune / El Aaiún"
 [67] "Asmara"              "Madrid"              "Addis Ababa"        
 [70] "Helsinki"            "Suva"                "Stanley"            
 [73] "Palikir"             "Tórshavn"            "Paris"              
 [76] "Libreville"          "London"              "St. George's"       
 [79] "Tbilisi"             "Cayenne"             "St Peter Port"      
 [82] "Accra"               "Gibraltar"           "Nuuk"               
 [85] "Bathurst"            "Conakry"             "Basse-Terre"        
 [88] "Malabo"              "Athens"              "Grytviken"          
 [91] "Guatemala City"      "Hagåtña"             "Bissau"             
 [94] "Georgetown"          "Hong Kong"           "None"               
 [97] "Tegucigalpa"         "Zagreb"              "Port-au-Prince"     
[100] "Budapest"            "Jakarta"             "Dublin"             
[103] "None"                "Douglas"             "New Delhi"          
[106] "None"                "Baghdad"             "Tehran"             
[109] "Reykjavik"           "Rome"                "Saint Helier"       
[112] "Kingston"            "Amman"               "Tokyo"              
[115] "Nairobi"             "Bishkek"             "Phnom Penh"         
[118] "Tarawa"              "Moroni"              "Basseterre"         
[121] "Pyongyang"           "Seoul"               "Kuwait City"        
[124] "George Town"         "Astana"              "Vientiane"          
[127] "Beirut"              "Castries"            "Vaduz"              
[130] "Colombo"             "Monrovia"            "Maseru"             
[133] "Vilnius"             "Luxembourg"          "Riga"               
[136] "Tripoli"             "Rabat"               "Monaco"             
[139] "Chişinău"            "Podgorica"           "Marigot"            
[142] "Antananarivo"        "Majuro"              "Skopje"             
[145] "Bamako"              "Naypyitaw"           "Ulan Bator"         
[148] "Macao"               "Saipan"              "Fort-de-France"     
[151] "Nouakchott"          "Plymouth"            "Valletta"           
[154] "Port Louis"          "Malé"                "Lilongwe"           
[157] "Mexico City"         "Kuala Lumpur"        "Maputo"             
[160] "Windhoek"            "Noumea"              "Niamey"             
[163] "Kingston"            "Abuja"               "Managua"            
[166] "Amsterdam"           "Oslo"                "Kathmandu"          
[169] "Yaren"               "Alofi"               "Wellington"         
[172] "Muscat"              "Panama City"         "Lima"               
[175] "Papeete"             "Port Moresby"        "Manila"             
[178] "Islamabad"           "Warsaw"              "Saint-Pierre"       
[181] "Adamstown"           "San Juan"            "None"               
[184] "Lisbon"              "Melekeok"            "Asunción"           
[187] "Doha"                "Saint-Denis"         "Bucharest"          
[190] "Belgrade"            "Moscow"              "Kigali"             
[193] "Riyadh"              "Honiara"             "Victoria"           
[196] "Khartoum"            "Stockholm"           "Singapore"          
[199] "Jamestown"           "Ljubljana"           "Longyearbyen"       
[202] "Bratislava"          "Freetown"            "San Marino"         
[205] "Dakar"               "Mogadishu"           "Paramaribo"         
[208] "Juba"                "São Tomé"            "San Salvador"       
[211] "Philipsburg"         "Damascus"            "Mbabane"            
[214] "Cockburn Town"       "N'Djamena"           "Port-aux-Français"  
[217] "Lomé"                "Bangkok"             "Dushanbe"           
[220] "None"                "Dili"                "Ashgabat"           
[223] "Tunis"               "Nuku'alofa"          "Ankara"             
[226] "Port of Spain"       "Funafuti"            "Taipei"             
[229] "Dodoma"              "Kiev"                "Kampala"            
[232] "None"                "Washington"          "Montevideo"         
[235] "Tashkent"            "Vatican City"        "Kingstown"          
[238] "Caracas"             "Road Town"           "Charlotte Amalie"   
[241] "Hanoi"               "Port Vila"           "Mata-Utu"           
[244] "Apia"                "Pristina"            "Sanaa"              
[247] "Mamoudzou"           "Pretoria"            "Lusaka"             
[250] "Harare"             </code></pre>
</div>
<div class="sourceCode cell-code" id="cb63"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb63-1"><a href="#cb63-1" aria-hidden="true" tabindex="-1"></a>population</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>  [1] "84000"      "4975593"    "29121286"   "86754"      "13254"     
  [6] "2986952"    "2968000"    "13068161"   "0"          "41343201"  
 [11] "57881"      "8205000"    "21515754"   "71566"      "26711"     
 [16] "8303512"    "4590000"    "285653"     "156118464"  "10403000"  
 [21] "16241811"   "7148785"    "738004"     "9863117"    "9056010"   
 [26] "8450"       "65365"      "395027"     "9947418"    "18012"     
 [31] "201103330"  "301790"     "699847"     "0"          "2029307"   
 [36] "9685000"    "314522"     "33679000"   "628"        "70916439"  
 [41] "4844927"    "3039126"    "7581000"    "21058798"   "21388"     
 [46] "16746491"   "19294149"   "1330044000" "47790000"   "4516220"   
 [51] "11423000"   "508659"     "141766"     "1500"       "1102677"   
 [56] "10476000"   "81802257"   "740528"     "5484000"    "72813"     
 [61] "9823821"    "34586184"   "14790608"   "1291170"    "80471869"  
 [66] "273008"     "5792984"    "46505963"   "88013491"   "5244000"   
 [71] "875983"     "2638"       "107708"     "48228"      "64768389"  
 [76] "1545255"    "62348447"   "107818"     "4630000"    "195506"    
 [81] "65228"      "24339838"   "27884"      "56375"      "1593256"   
 [86] "10324025"   "443000"     "1014999"    "11000000"   "30"        
 [91] "13550440"   "159358"     "1565126"    "748486"     "6898686"   
 [96] "0"          "7989415"    "4491000"    "9648924"    "9982000"   
[101] "242968342"  "4622917"    "7353985"    "75049"      "1173108018"
[106] "4000"       "29671605"   "76923300"   "308910"     "60340328"  
[111] "90812"      "2847232"    "6407085"    "127288000"  "40046566"  
[116] "5776500"    "14453680"   "92533"      "773407"     "51134"     
[121] "22912177"   "48422644"   "2789132"    "44270"      "15340000"  
[126] "6368162"    "4125247"    "160922"     "35000"      "21513990"  
[131] "3685076"    "1919552"    "2944459"    "497538"     "2217969"   
[136] "6461454"    "31627428"   "32965"      "4324000"    "666730"    
[141] "35925"      "21281844"   "65859"      "2062294"    "13796354"  
[146] "53414374"   "3086918"    "449198"     "53883"      "432900"    
[151] "3205060"    "9341"       "403000"     "1294104"    "395650"    
[156] "15447500"   "112468855"  "28274729"   "22061451"   "2128471"   
[161] "216494"     "15878271"   "1828"       "154000000"  "5995928"   
[166] "16645000"   "5009150"    "28951852"   "10065"      "2166"      
[171] "4252277"    "2967717"    "3410676"    "29907003"   "270485"    
[176] "6064515"    "99900177"   "184404791"  "38500000"   "7012"      
[181] "46"         "3916632"    "3800000"    "10676000"   "19907"     
[186] "6375830"    "840926"     "776948"     "21959278"   "7344847"   
[191] "140702000"  "11055976"   "25731776"   "559198"     "88340"     
[196] "35000000"   "9828655"    "4701069"    "7460"       "2007000"   
[201] "2550"       "5455000"    "5245695"    "31477"      "12323252"  
[206] "10112453"   "492829"     "8260490"    "175808"     "6052064"   
[211] "37429"      "22198110"   "1354051"    "20556"      "10543464"  
[216] "140"        "6587239"    "67089500"   "7487489"    "1466"      
[221] "1154625"    "4940916"    "10589025"   "122580"     "77804122"  
[226] "1228691"    "10472"      "22894384"   "41892895"   "45415596"  
[231] "33398682"   "0"          "310232863"  "3477000"    "27865738"  
[236] "921"        "104217"     "27223228"   "21730"      "108708"    
[241] "89571130"   "221552"     "16025"      "192001"     "1800000"   
[246] "23495361"   "159042"     "49000000"   "13460305"   "11651858"  </code></pre>
</div>
<div class="sourceCode cell-code" id="cb65"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb65-1"><a href="#cb65-1" aria-hidden="true" tabindex="-1"></a>area</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>  [1] "468.0"     "82880.0"   "647500.0"  "443.0"     "102.0"     "28748.0"  
  [7] "29800.0"   "1246700.0" "1.4E7"     "2766890.0" "199.0"     "83858.0"  
 [13] "7686850.0" "193.0"     "1580.0"    "86600.0"   "51129.0"   "431.0"    
 [19] "144000.0"  "30510.0"   "274200.0"  "110910.0"  "665.0"     "27830.0"  
 [25] "112620.0"  "21.0"      "53.0"      "5770.0"    "1098580.0" "328.0"    
 [31] "8511965.0" "13940.0"   "47000.0"   "49.0"      "600370.0"  "207600.0" 
 [37] "22966.0"   "9984670.0" "14.0"      "2345410.0" "622984.0"  "342000.0" 
 [43] "41290.0"   "322460.0"  "240.0"     "756950.0"  "475440.0"  "9596960.0"
 [49] "1138910.0" "51100.0"   "110860.0"  "4033.0"    "444.0"     "135.0"    
 [55] "9250.0"    "78866.0"   "357021.0"  "23000.0"   "43094.0"   "754.0"    
 [61] "48730.0"   "2381740.0" "283560.0"  "45226.0"   "1001450.0" "266000.0" 
 [67] "121320.0"  "504782.0"  "1127127.0" "337030.0"  "18270.0"   "12173.0"  
 [73] "702.0"     "1399.0"    "547030.0"  "267667.0"  "244820.0"  "344.0"    
 [79] "69700.0"   "91000.0"   "78.0"      "239460.0"  "6.5"       "2166086.0"
 [85] "11300.0"   "245857.0"  "1780.0"    "28051.0"   "131940.0"  "3903.0"   
 [91] "108890.0"  "549.0"     "36120.0"   "214970.0"  "1092.0"    "412.0"    
 [97] "112090.0"  "56542.0"   "27750.0"   "93030.0"   "1919440.0" "70280.0"  
[103] "20770.0"   "572.0"     "3287590.0" "60.0"      "437072.0"  "1648000.0"
[109] "103000.0"  "301230.0"  "116.0"     "10991.0"   "92300.0"   "377835.0" 
[115] "582650.0"  "198500.0"  "181040.0"  "811.0"     "2170.0"    "261.0"    
[121] "120540.0"  "98480.0"   "17820.0"   "262.0"     "2717300.0" "236800.0" 
[127] "10400.0"   "616.0"     "160.0"     "65610.0"   "111370.0"  "30355.0"  
[133] "65200.0"   "2586.0"    "64589.0"   "1759540.0" "446550.0"  "1.95"     
[139] "33843.0"   "14026.0"   "53.0"      "587040.0"  "181.3"     "25333.0"  
[145] "1240000.0" "678500.0"  "1565000.0" "254.0"     "477.0"     "1100.0"   
[151] "1030700.0" "102.0"     "316.0"     "2040.0"    "300.0"     "118480.0" 
[157] "1972550.0" "329750.0"  "801590.0"  "825418.0"  "19060.0"   "1267000.0"
[163] "34.6"      "923768.0"  "129494.0"  "41526.0"   "324220.0"  "140800.0" 
[169] "21.0"      "260.0"     "268680.0"  "212460.0"  "78200.0"   "1285220.0"
[175] "4167.0"    "462840.0"  "300000.0"  "803940.0"  "312685.0"  "242.0"    
[181] "47.0"      "9104.0"    "5970.0"    "92391.0"   "458.0"     "406750.0" 
[187] "11437.0"   "2517.0"    "237500.0"  "88361.0"   "1.71E7"    "26338.0"  
[193] "1960582.0" "28450.0"   "455.0"     "1861484.0" "449964.0"  "692.7"    
[199] "410.0"     "20273.0"   "62049.0"   "48845.0"   "71740.0"   "61.2"     
[205] "196190.0"  "637657.0"  "163270.0"  "644329.0"  "1001.0"    "21040.0"  
[211] "21.0"      "185180.0"  "17363.0"   "430.0"     "1284000.0" "7829.0"   
[217] "56785.0"   "514000.0"  "143100.0"  "10.0"      "15007.0"   "488100.0" 
[223] "163610.0"  "748.0"     "780580.0"  "5128.0"    "26.0"      "35980.0"  
[229] "945087.0"  "603700.0"  "236040.0"  "0.0"       "9629091.0" "176220.0" 
[235] "447400.0"  "0.44"      "389.0"     "912050.0"  "153.0"     "352.0"    
[241] "329560.0"  "12200.0"   "274.0"     "2944.0"    "10908.0"   "527970.0" 
[247] "374.0"     "1219912.0" "752614.0"  "390580.0" </code></pre>
</div>
<div class="sourceCode cell-code" id="cb67"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb67-1"><a href="#cb67-1" aria-hidden="true" tabindex="-1"></a>df <span class="ot">=</span> <span class="fu">data.frame</span> ( <span class="at">country=</span>countries,</span>
<span id="cb67-2"><a href="#cb67-2" aria-hidden="true" tabindex="-1"></a>                  <span class="at">capital =</span> capitals,</span>
<span id="cb67-3"><a href="#cb67-3" aria-hidden="true" tabindex="-1"></a>                  <span class="at">pop =</span> population,</span>
<span id="cb67-4"><a href="#cb67-4" aria-hidden="true" tabindex="-1"></a>                  <span class="at">area =</span> area,</span>
<span id="cb67-5"><a href="#cb67-5" aria-hidden="true" tabindex="-1"></a>                  <span class="at">stringsAsFactors =</span> <span class="cn">FALSE</span></span>
<span id="cb67-6"><a href="#cb67-6" aria-hidden="true" tabindex="-1"></a>                  )</span>
<span id="cb67-7"><a href="#cb67-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb67-8"><a href="#cb67-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb67-9"><a href="#cb67-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb67-10"><a href="#cb67-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb67-11"><a href="#cb67-11" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(df, <span class="dv">5</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>               country          capital      pop     area
1              Andorra Andorra la Vella    84000    468.0
2 United Arab Emirates        Abu Dhabi  4975593  82880.0
3          Afghanistan            Kabul 29121286 647500.0
4  Antigua and Barbuda       St. John's    86754    443.0
5             Anguilla       The Valley    13254    102.0</code></pre>
</div>
<div class="sourceCode cell-code" id="cb69"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb69-1"><a href="#cb69-1" aria-hidden="true" tabindex="-1"></a><span class="fu">nrow</span>(df)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 250</code></pre>
</div>
</div>
</section>
<section id="html_text2-removes-leadingtrailing-whitespace" class="level2" data-number="34.10">
<h2 data-number="34.10" class="anchored" data-anchor-id="html_text2-removes-leadingtrailing-whitespace"><span class="header-section-number">34.10</span> html_text2() removes leading/trailing whitespace</h2>
<div class="cell">
<div class="sourceCode cell-code" id="cb71"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb71-1"><a href="#cb71-1" aria-hidden="true" tabindex="-1"></a><span class="do">#####################################################</span></span>
<span id="cb71-2"><a href="#cb71-2" aria-hidden="true" tabindex="-1"></a><span class="co"># UPDATE:</span></span>
<span id="cb71-3"><a href="#cb71-3" aria-hidden="true" tabindex="-1"></a><span class="co">#</span></span>
<span id="cb71-4"><a href="#cb71-4" aria-hidden="true" tabindex="-1"></a><span class="co"># The latest release of the rvest package includes</span></span>
<span id="cb71-5"><a href="#cb71-5" aria-hidden="true" tabindex="-1"></a><span class="co"># a function named html_text2. This function automatically</span></span>
<span id="cb71-6"><a href="#cb71-6" aria-hidden="true" tabindex="-1"></a><span class="co"># removes leading and trailing whitespace.</span></span>
<span id="cb71-7"><a href="#cb71-7" aria-hidden="true" tabindex="-1"></a><span class="co"># It's still important to understand how to modify the </span></span>
<span id="cb71-8"><a href="#cb71-8" aria-hidden="true" tabindex="-1"></a><span class="co"># data with gsub for situations for which you want to modify</span></span>
<span id="cb71-9"><a href="#cb71-9" aria-hidden="true" tabindex="-1"></a><span class="co"># the data other than leading and trailing whitespace.</span></span>
<span id="cb71-10"><a href="#cb71-10" aria-hidden="true" tabindex="-1"></a><span class="do">#####################################################</span></span>
<span id="cb71-11"><a href="#cb71-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb71-12"><a href="#cb71-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb71-13"><a href="#cb71-13" aria-hidden="true" tabindex="-1"></a>url <span class="ot">=</span> <span class="st">"https://scrapethissite.com/pages/simple/"</span></span>
<span id="cb71-14"><a href="#cb71-14" aria-hidden="true" tabindex="-1"></a>cssSelector <span class="ot">=</span> <span class="st">".country-name"</span></span>
<span id="cb71-15"><a href="#cb71-15" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb71-16"><a href="#cb71-16" aria-hidden="true" tabindex="-1"></a>whole_html_page <span class="ot">=</span> <span class="fu">read_html</span>(url)</span>
<span id="cb71-17"><a href="#cb71-17" aria-hidden="true" tabindex="-1"></a>country_name_html <span class="ot">=</span>  <span class="fu">html_elements</span>( whole_html_page, cssSelector )</span>
<span id="cb71-18"><a href="#cb71-18" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb71-19"><a href="#cb71-19" aria-hidden="true" tabindex="-1"></a><span class="co"># Using html_text2 instead of html_text.</span></span>
<span id="cb71-20"><a href="#cb71-20" aria-hidden="true" tabindex="-1"></a><span class="co"># html_text2 automatically removes leading and trailing whitespace</span></span>
<span id="cb71-21"><a href="#cb71-21" aria-hidden="true" tabindex="-1"></a><span class="co"># from the text.</span></span>
<span id="cb71-22"><a href="#cb71-22" aria-hidden="true" tabindex="-1"></a>just_the_text <span class="ot">=</span>   <span class="fu">html_text2</span>(country_name_html)</span>
<span id="cb71-23"><a href="#cb71-23" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb71-24"><a href="#cb71-24" aria-hidden="true" tabindex="-1"></a>just_the_text  </span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>  [1] "Andorra"                                     
  [2] "United Arab Emirates"                        
  [3] "Afghanistan"                                 
  [4] "Antigua and Barbuda"                         
  [5] "Anguilla"                                    
  [6] "Albania"                                     
  [7] "Armenia"                                     
  [8] "Angola"                                      
  [9] "Antarctica"                                  
 [10] "Argentina"                                   
 [11] "American Samoa"                              
 [12] "Austria"                                     
 [13] "Australia"                                   
 [14] "Aruba"                                       
 [15] "Åland"                                       
 [16] "Azerbaijan"                                  
 [17] "Bosnia and Herzegovina"                      
 [18] "Barbados"                                    
 [19] "Bangladesh"                                  
 [20] "Belgium"                                     
 [21] "Burkina Faso"                                
 [22] "Bulgaria"                                    
 [23] "Bahrain"                                     
 [24] "Burundi"                                     
 [25] "Benin"                                       
 [26] "Saint Barthélemy"                            
 [27] "Bermuda"                                     
 [28] "Brunei"                                      
 [29] "Bolivia"                                     
 [30] "Bonaire"                                     
 [31] "Brazil"                                      
 [32] "Bahamas"                                     
 [33] "Bhutan"                                      
 [34] "Bouvet Island"                               
 [35] "Botswana"                                    
 [36] "Belarus"                                     
 [37] "Belize"                                      
 [38] "Canada"                                      
 [39] "Cocos [Keeling] Islands"                     
 [40] "Democratic Republic of the Congo"            
 [41] "Central African Republic"                    
 [42] "Republic of the Congo"                       
 [43] "Switzerland"                                 
 [44] "Ivory Coast"                                 
 [45] "Cook Islands"                                
 [46] "Chile"                                       
 [47] "Cameroon"                                    
 [48] "China"                                       
 [49] "Colombia"                                    
 [50] "Costa Rica"                                  
 [51] "Cuba"                                        
 [52] "Cape Verde"                                  
 [53] "Curacao"                                     
 [54] "Christmas Island"                            
 [55] "Cyprus"                                      
 [56] "Czech Republic"                              
 [57] "Germany"                                     
 [58] "Djibouti"                                    
 [59] "Denmark"                                     
 [60] "Dominica"                                    
 [61] "Dominican Republic"                          
 [62] "Algeria"                                     
 [63] "Ecuador"                                     
 [64] "Estonia"                                     
 [65] "Egypt"                                       
 [66] "Western Sahara"                              
 [67] "Eritrea"                                     
 [68] "Spain"                                       
 [69] "Ethiopia"                                    
 [70] "Finland"                                     
 [71] "Fiji"                                        
 [72] "Falkland Islands"                            
 [73] "Micronesia"                                  
 [74] "Faroe Islands"                               
 [75] "France"                                      
 [76] "Gabon"                                       
 [77] "United Kingdom"                              
 [78] "Grenada"                                     
 [79] "Georgia"                                     
 [80] "French Guiana"                               
 [81] "Guernsey"                                    
 [82] "Ghana"                                       
 [83] "Gibraltar"                                   
 [84] "Greenland"                                   
 [85] "Gambia"                                      
 [86] "Guinea"                                      
 [87] "Guadeloupe"                                  
 [88] "Equatorial Guinea"                           
 [89] "Greece"                                      
 [90] "South Georgia and the South Sandwich Islands"
 [91] "Guatemala"                                   
 [92] "Guam"                                        
 [93] "Guinea-Bissau"                               
 [94] "Guyana"                                      
 [95] "Hong Kong"                                   
 [96] "Heard Island and McDonald Islands"           
 [97] "Honduras"                                    
 [98] "Croatia"                                     
 [99] "Haiti"                                       
[100] "Hungary"                                     
[101] "Indonesia"                                   
[102] "Ireland"                                     
[103] "Israel"                                      
[104] "Isle of Man"                                 
[105] "India"                                       
[106] "British Indian Ocean Territory"              
[107] "Iraq"                                        
[108] "Iran"                                        
[109] "Iceland"                                     
[110] "Italy"                                       
[111] "Jersey"                                      
[112] "Jamaica"                                     
[113] "Jordan"                                      
[114] "Japan"                                       
[115] "Kenya"                                       
[116] "Kyrgyzstan"                                  
[117] "Cambodia"                                    
[118] "Kiribati"                                    
[119] "Comoros"                                     
[120] "Saint Kitts and Nevis"                       
[121] "North Korea"                                 
[122] "South Korea"                                 
[123] "Kuwait"                                      
[124] "Cayman Islands"                              
[125] "Kazakhstan"                                  
[126] "Laos"                                        
[127] "Lebanon"                                     
[128] "Saint Lucia"                                 
[129] "Liechtenstein"                               
[130] "Sri Lanka"                                   
[131] "Liberia"                                     
[132] "Lesotho"                                     
[133] "Lithuania"                                   
[134] "Luxembourg"                                  
[135] "Latvia"                                      
[136] "Libya"                                       
[137] "Morocco"                                     
[138] "Monaco"                                      
[139] "Moldova"                                     
[140] "Montenegro"                                  
[141] "Saint Martin"                                
[142] "Madagascar"                                  
[143] "Marshall Islands"                            
[144] "Macedonia"                                   
[145] "Mali"                                        
[146] "Myanmar [Burma]"                             
[147] "Mongolia"                                    
[148] "Macao"                                       
[149] "Northern Mariana Islands"                    
[150] "Martinique"                                  
[151] "Mauritania"                                  
[152] "Montserrat"                                  
[153] "Malta"                                       
[154] "Mauritius"                                   
[155] "Maldives"                                    
[156] "Malawi"                                      
[157] "Mexico"                                      
[158] "Malaysia"                                    
[159] "Mozambique"                                  
[160] "Namibia"                                     
[161] "New Caledonia"                               
[162] "Niger"                                       
[163] "Norfolk Island"                              
[164] "Nigeria"                                     
[165] "Nicaragua"                                   
[166] "Netherlands"                                 
[167] "Norway"                                      
[168] "Nepal"                                       
[169] "Nauru"                                       
[170] "Niue"                                        
[171] "New Zealand"                                 
[172] "Oman"                                        
[173] "Panama"                                      
[174] "Peru"                                        
[175] "French Polynesia"                            
[176] "Papua New Guinea"                            
[177] "Philippines"                                 
[178] "Pakistan"                                    
[179] "Poland"                                      
[180] "Saint Pierre and Miquelon"                   
[181] "Pitcairn Islands"                            
[182] "Puerto Rico"                                 
[183] "Palestine"                                   
[184] "Portugal"                                    
[185] "Palau"                                       
[186] "Paraguay"                                    
[187] "Qatar"                                       
[188] "Réunion"                                     
[189] "Romania"                                     
[190] "Serbia"                                      
[191] "Russia"                                      
[192] "Rwanda"                                      
[193] "Saudi Arabia"                                
[194] "Solomon Islands"                             
[195] "Seychelles"                                  
[196] "Sudan"                                       
[197] "Sweden"                                      
[198] "Singapore"                                   
[199] "Saint Helena"                                
[200] "Slovenia"                                    
[201] "Svalbard and Jan Mayen"                      
[202] "Slovakia"                                    
[203] "Sierra Leone"                                
[204] "San Marino"                                  
[205] "Senegal"                                     
[206] "Somalia"                                     
[207] "Suriname"                                    
[208] "South Sudan"                                 
[209] "São Tomé and Príncipe"                       
[210] "El Salvador"                                 
[211] "Sint Maarten"                                
[212] "Syria"                                       
[213] "Swaziland"                                   
[214] "Turks and Caicos Islands"                    
[215] "Chad"                                        
[216] "French Southern Territories"                 
[217] "Togo"                                        
[218] "Thailand"                                    
[219] "Tajikistan"                                  
[220] "Tokelau"                                     
[221] "East Timor"                                  
[222] "Turkmenistan"                                
[223] "Tunisia"                                     
[224] "Tonga"                                       
[225] "Turkey"                                      
[226] "Trinidad and Tobago"                         
[227] "Tuvalu"                                      
[228] "Taiwan"                                      
[229] "Tanzania"                                    
[230] "Ukraine"                                     
[231] "Uganda"                                      
[232] "U.S. Minor Outlying Islands"                 
[233] "United States"                               
[234] "Uruguay"                                     
[235] "Uzbekistan"                                  
[236] "Vatican City"                                
[237] "Saint Vincent and the Grenadines"            
[238] "Venezuela"                                   
[239] "British Virgin Islands"                      
[240] "U.S. Virgin Islands"                         
[241] "Vietnam"                                     
[242] "Vanuatu"                                     
[243] "Wallis and Futuna"                           
[244] "Samoa"                                       
[245] "Kosovo"                                      
[246] "Yemen"                                       
[247] "Mayotte"                                     
[248] "South Africa"                                
[249] "Zambia"                                      
[250] "Zimbabwe"                                    </code></pre>
</div>
</div>
</section>
<section id="create-a-function-to-do-the-scraping" class="level2" data-number="34.11">
<h2 data-number="34.11" class="anchored" data-anchor-id="create-a-function-to-do-the-scraping"><span class="header-section-number">34.11</span> Create a function to do the scraping</h2>
<div class="cell">
<div class="sourceCode cell-code" id="cb73"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb73-1"><a href="#cb73-1" aria-hidden="true" tabindex="-1"></a><span class="do">#####################################################</span></span>
<span id="cb73-2"><a href="#cb73-2" aria-hidden="true" tabindex="-1"></a><span class="co">#</span></span>
<span id="cb73-3"><a href="#cb73-3" aria-hidden="true" tabindex="-1"></a><span class="co"># Package up the technique into a function</span></span>
<span id="cb73-4"><a href="#cb73-4" aria-hidden="true" tabindex="-1"></a><span class="co">#</span></span>
<span id="cb73-5"><a href="#cb73-5" aria-hidden="true" tabindex="-1"></a><span class="do">#####################################################</span></span>
<span id="cb73-6"><a href="#cb73-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb73-7"><a href="#cb73-7" aria-hidden="true" tabindex="-1"></a>getCountryData <span class="ot">&lt;-</span> <span class="cf">function</span>() {</span>
<span id="cb73-8"><a href="#cb73-8" aria-hidden="true" tabindex="-1"></a> </span>
<span id="cb73-9"><a href="#cb73-9" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb73-10"><a href="#cb73-10" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Get all of the country data and put it in a dataframe</span></span>
<span id="cb73-11"><a href="#cb73-11" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb73-12"><a href="#cb73-12" aria-hidden="true" tabindex="-1"></a>  url <span class="ot">=</span> <span class="st">"https://scrapethissite.com/pages/simple/"</span></span>
<span id="cb73-13"><a href="#cb73-13" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb73-14"><a href="#cb73-14" aria-hidden="true" tabindex="-1"></a>  the_full_html <span class="ot">=</span> <span class="fu">read_html</span>(url)</span>
<span id="cb73-15"><a href="#cb73-15" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb73-16"><a href="#cb73-16" aria-hidden="true" tabindex="-1"></a>  countries <span class="ot">=</span> the_full_html <span class="sc">%&gt;%</span></span>
<span id="cb73-17"><a href="#cb73-17" aria-hidden="true" tabindex="-1"></a>    <span class="fu">html_elements</span>( <span class="st">".country-name"</span> ) <span class="sc">%&gt;%</span></span>
<span id="cb73-18"><a href="#cb73-18" aria-hidden="true" tabindex="-1"></a>    <span class="fu">html_text</span>()</span>
<span id="cb73-19"><a href="#cb73-19" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb73-20"><a href="#cb73-20" aria-hidden="true" tabindex="-1"></a>  capitals <span class="ot">=</span> the_full_html <span class="sc">%&gt;%</span></span>
<span id="cb73-21"><a href="#cb73-21" aria-hidden="true" tabindex="-1"></a>    <span class="fu">html_elements</span>( <span class="st">".country-capital"</span> ) <span class="sc">%&gt;%</span></span>
<span id="cb73-22"><a href="#cb73-22" aria-hidden="true" tabindex="-1"></a>    <span class="fu">html_text</span>()</span>
<span id="cb73-23"><a href="#cb73-23" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb73-24"><a href="#cb73-24" aria-hidden="true" tabindex="-1"></a>  population <span class="ot">=</span> the_full_html <span class="sc">%&gt;%</span></span>
<span id="cb73-25"><a href="#cb73-25" aria-hidden="true" tabindex="-1"></a>    <span class="fu">html_elements</span>( <span class="st">".country-population"</span> ) <span class="sc">%&gt;%</span></span>
<span id="cb73-26"><a href="#cb73-26" aria-hidden="true" tabindex="-1"></a>    <span class="fu">html_text</span>()</span>
<span id="cb73-27"><a href="#cb73-27" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb73-28"><a href="#cb73-28" aria-hidden="true" tabindex="-1"></a>  area <span class="ot">=</span> the_full_html <span class="sc">%&gt;%</span></span>
<span id="cb73-29"><a href="#cb73-29" aria-hidden="true" tabindex="-1"></a>    <span class="fu">html_elements</span>( <span class="st">".country-area"</span> ) <span class="sc">%&gt;%</span></span>
<span id="cb73-30"><a href="#cb73-30" aria-hidden="true" tabindex="-1"></a>    <span class="fu">html_text</span>()</span>
<span id="cb73-31"><a href="#cb73-31" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb73-32"><a href="#cb73-32" aria-hidden="true" tabindex="-1"></a>  <span class="co"># remove the spaces and newline characters from countries</span></span>
<span id="cb73-33"><a href="#cb73-33" aria-hidden="true" tabindex="-1"></a>  countries<span class="ot">=</span> <span class="fu">gsub</span>(<span class="st">"</span><span class="sc">\\</span><span class="st">n"</span>, <span class="st">""</span>, countries)</span>
<span id="cb73-34"><a href="#cb73-34" aria-hidden="true" tabindex="-1"></a>  countries<span class="ot">=</span> <span class="fu">gsub</span>(<span class="st">" "</span>, <span class="st">""</span> , countries)</span>
<span id="cb73-35"><a href="#cb73-35" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb73-36"><a href="#cb73-36" aria-hidden="true" tabindex="-1"></a>  df <span class="ot">=</span> <span class="fu">data.frame</span> ( <span class="at">country=</span>countries,</span>
<span id="cb73-37"><a href="#cb73-37" aria-hidden="true" tabindex="-1"></a>                    <span class="at">capital =</span> capitals,</span>
<span id="cb73-38"><a href="#cb73-38" aria-hidden="true" tabindex="-1"></a>                    <span class="at">pop =</span> population,</span>
<span id="cb73-39"><a href="#cb73-39" aria-hidden="true" tabindex="-1"></a>                    <span class="at">area =</span> area,</span>
<span id="cb73-40"><a href="#cb73-40" aria-hidden="true" tabindex="-1"></a>                    <span class="at">stringsAsFactors =</span> <span class="cn">FALSE</span></span>
<span id="cb73-41"><a href="#cb73-41" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb73-42"><a href="#cb73-42" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb73-43"><a href="#cb73-43" aria-hidden="true" tabindex="-1"></a>  <span class="fu">return</span> (df)</span>
<span id="cb73-44"><a href="#cb73-44" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb73-45"><a href="#cb73-45" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb73-46"><a href="#cb73-46" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb73-47"><a href="#cb73-47" aria-hidden="true" tabindex="-1"></a><span class="co"># Data on websites can change. We can now call this function whenever</span></span>
<span id="cb73-48"><a href="#cb73-48" aria-hidden="true" tabindex="-1"></a><span class="co"># we want to get the latest versions of the data from the website.</span></span>
<span id="cb73-49"><a href="#cb73-49" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb73-50"><a href="#cb73-50" aria-hidden="true" tabindex="-1"></a>mydata <span class="ot">=</span> <span class="fu">getCountryData</span>()</span>
<span id="cb73-51"><a href="#cb73-51" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(mydata)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>             country          capital      pop     area
1            Andorra Andorra la Vella    84000    468.0
2 UnitedArabEmirates        Abu Dhabi  4975593  82880.0
3        Afghanistan            Kabul 29121286 647500.0
4  AntiguaandBarbuda       St. John's    86754    443.0
5           Anguilla       The Valley    13254    102.0
6            Albania           Tirana  2986952  28748.0</code></pre>
</div>
</div>
</section>
<section id="scraping-multiple-webpages-in-a-loop" class="level2" data-number="34.12">
<h2 data-number="34.12" class="anchored" data-anchor-id="scraping-multiple-webpages-in-a-loop"><span class="header-section-number">34.12</span> Scraping multiple webpages in a loop</h2>
<section id="figure-out-the-code" class="level3" data-number="34.12.1">
<h3 data-number="34.12.1" class="anchored" data-anchor-id="figure-out-the-code"><span class="header-section-number">34.12.1</span> Figure out the code</h3>
<div class="cell">
<div class="sourceCode cell-code" id="cb75"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb75-1"><a href="#cb75-1" aria-hidden="true" tabindex="-1"></a><span class="do">######################################################</span></span>
<span id="cb75-2"><a href="#cb75-2" aria-hidden="true" tabindex="-1"></a><span class="co">#</span></span>
<span id="cb75-3"><a href="#cb75-3" aria-hidden="true" tabindex="-1"></a><span class="co"># Getting data from multiple web pages in a loop.</span></span>
<span id="cb75-4"><a href="#cb75-4" aria-hidden="true" tabindex="-1"></a><span class="co">#</span></span>
<span id="cb75-5"><a href="#cb75-5" aria-hidden="true" tabindex="-1"></a><span class="do">######################################################</span></span>
<span id="cb75-6"><a href="#cb75-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb75-7"><a href="#cb75-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb75-8"><a href="#cb75-8" aria-hidden="true" tabindex="-1"></a><span class="co"># The data on the following page is only one page of multiple pages of similar</span></span>
<span id="cb75-9"><a href="#cb75-9" aria-hidden="true" tabindex="-1"></a><span class="co"># data. </span></span>
<span id="cb75-10"><a href="#cb75-10" aria-hidden="true" tabindex="-1"></a><span class="co">#</span></span>
<span id="cb75-11"><a href="#cb75-11" aria-hidden="true" tabindex="-1"></a><span class="co">#   https://scrapethissite.com/pages/forms/?page_num=1</span></span>
<span id="cb75-12"><a href="#cb75-12" aria-hidden="true" tabindex="-1"></a><span class="co">#</span></span>
<span id="cb75-13"><a href="#cb75-13" aria-hidden="true" tabindex="-1"></a><span class="co"># The links to the other pages appear on the bottom of the page. Clicking on </span></span>
<span id="cb75-14"><a href="#cb75-14" aria-hidden="true" tabindex="-1"></a><span class="co"># the the link for the 2nd page, reveals that the 2nd page of data is at </span></span>
<span id="cb75-15"><a href="#cb75-15" aria-hidden="true" tabindex="-1"></a><span class="co"># the following URL:</span></span>
<span id="cb75-16"><a href="#cb75-16" aria-hidden="true" tabindex="-1"></a><span class="co">#</span></span>
<span id="cb75-17"><a href="#cb75-17" aria-hidden="true" tabindex="-1"></a><span class="co">#   https://scrapethissite.com/pages/forms/?page_num=2</span></span>
<span id="cb75-18"><a href="#cb75-18" aria-hidden="true" tabindex="-1"></a><span class="co">#</span></span>
<span id="cb75-19"><a href="#cb75-19" aria-hidden="true" tabindex="-1"></a><span class="co"># These URLs differ ONLY in the page number. This allows us to scrape</span></span>
<span id="cb75-20"><a href="#cb75-20" aria-hidden="true" tabindex="-1"></a><span class="co"># ALL of the pages by reconstructing the URL for the page we want by</span></span>
<span id="cb75-21"><a href="#cb75-21" aria-hidden="true" tabindex="-1"></a><span class="co"># inserting the correct page number. </span></span>
<span id="cb75-22"><a href="#cb75-22" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb75-23"><a href="#cb75-23" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb75-24"><a href="#cb75-24" aria-hidden="true" tabindex="-1"></a><span class="co"># CSS FROM INSPECT</span></span>
<span id="cb75-25"><a href="#cb75-25" aria-hidden="true" tabindex="-1"></a>css <span class="ot">=</span> <span class="st">"#hockey &gt; div &gt; table &gt; tbody &gt; tr:nth-child(2) &gt; td.name"</span></span>
<span id="cb75-26"><a href="#cb75-26" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb75-27"><a href="#cb75-27" aria-hidden="true" tabindex="-1"></a><span class="co"># After looking at the full HTML code, we could see the the tbody</span></span>
<span id="cb75-28"><a href="#cb75-28" aria-hidden="true" tabindex="-1"></a><span class="co"># in the selector should not have been there? There could be several </span></span>
<span id="cb75-29"><a href="#cb75-29" aria-hidden="true" tabindex="-1"></a><span class="co"># reasons (beyond the scope of today's class) as to why the tbody was </span></span>
<span id="cb75-30"><a href="#cb75-30" aria-hidden="true" tabindex="-1"></a><span class="co"># in the css selector that we got back. By looking at the full HTML</span></span>
<span id="cb75-31"><a href="#cb75-31" aria-hidden="true" tabindex="-1"></a><span class="co"># and understanding a little about how HTML and css selectors work, we were</span></span>
<span id="cb75-32"><a href="#cb75-32" aria-hidden="true" tabindex="-1"></a><span class="co"># able to realize that "tbody" didn't belong and take it out.</span></span>
<span id="cb75-33"><a href="#cb75-33" aria-hidden="true" tabindex="-1"></a>css <span class="ot">=</span> <span class="st">"#hockey &gt; div &gt; table &gt; tr:nth-child(2) &gt; td.name"</span></span>
<span id="cb75-34"><a href="#cb75-34" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb75-35"><a href="#cb75-35" aria-hidden="true" tabindex="-1"></a><span class="co"># When we tried the above css selector we ONLY got back the "Colorado Avalance"</span></span>
<span id="cb75-36"><a href="#cb75-36" aria-hidden="true" tabindex="-1"></a><span class="co"># but no other team name. We quickly realized that was because of </span></span>
<span id="cb75-37"><a href="#cb75-37" aria-hidden="true" tabindex="-1"></a><span class="co"># :nth-child(2) that was limiting the results. We we took off :nth-child(2)</span></span>
<span id="cb75-38"><a href="#cb75-38" aria-hidden="true" tabindex="-1"></a><span class="co"># that got us all of the team names. </span></span>
<span id="cb75-39"><a href="#cb75-39" aria-hidden="true" tabindex="-1"></a>css <span class="ot">=</span> <span class="st">"#hockey &gt; div &gt; table &gt; tr &gt; td.name"</span></span>
<span id="cb75-40"><a href="#cb75-40" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb75-41"><a href="#cb75-41" aria-hidden="true" tabindex="-1"></a><span class="co"># The following is what we got from selector gadget</span></span>
<span id="cb75-42"><a href="#cb75-42" aria-hidden="true" tabindex="-1"></a>css <span class="ot">=</span> <span class="st">".name"</span></span>
<span id="cb75-43"><a href="#cb75-43" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb75-44"><a href="#cb75-44" aria-hidden="true" tabindex="-1"></a><span class="co"># according to selector gadget this will match all data in the table</span></span>
<span id="cb75-45"><a href="#cb75-45" aria-hidden="true" tabindex="-1"></a><span class="co"># and it does. However, the data comes back in a single vector </span></span>
<span id="cb75-46"><a href="#cb75-46" aria-hidden="true" tabindex="-1"></a><span class="co"># instead of a dataframe.</span></span>
<span id="cb75-47"><a href="#cb75-47" aria-hidden="true" tabindex="-1"></a>css <span class="ot">=</span> <span class="st">"td"</span></span>
<span id="cb75-48"><a href="#cb75-48" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb75-49"><a href="#cb75-49" aria-hidden="true" tabindex="-1"></a><span class="co"># Instead of getting all the data in a single vector it's probably better to</span></span>
<span id="cb75-50"><a href="#cb75-50" aria-hidden="true" tabindex="-1"></a><span class="co"># get the Name column in one vector and the Year column in another vector</span></span>
<span id="cb75-51"><a href="#cb75-51" aria-hidden="true" tabindex="-1"></a>cssName <span class="ot">=</span> <span class="st">".name"</span></span>
<span id="cb75-52"><a href="#cb75-52" aria-hidden="true" tabindex="-1"></a>cssYear <span class="ot">=</span> <span class="st">".year"</span></span>
<span id="cb75-53"><a href="#cb75-53" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb75-54"><a href="#cb75-54" aria-hidden="true" tabindex="-1"></a>url<span class="ot">=</span> <span class="st">"https://www.scrapethissite.com/pages/forms/?page_num=7"</span></span>
<span id="cb75-55"><a href="#cb75-55" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb75-56"><a href="#cb75-56" aria-hidden="true" tabindex="-1"></a>fullPage <span class="ot">=</span> <span class="fu">read_html</span>(url)</span>
<span id="cb75-57"><a href="#cb75-57" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb75-58"><a href="#cb75-58" aria-hidden="true" tabindex="-1"></a>fullPage <span class="sc">%&gt;%</span></span>
<span id="cb75-59"><a href="#cb75-59" aria-hidden="true" tabindex="-1"></a>  <span class="fu">html_elements</span>(css) <span class="sc">%&gt;%</span></span>
<span id="cb75-60"><a href="#cb75-60" aria-hidden="true" tabindex="-1"></a>  <span class="fu">html_text2</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>  [1] "Colorado Avalanche"      "1996"                   
  [3] "49"                      "24"                     
  [5] ""                        "0.598"                  
  [7] "277"                     "205"                    
  [9] "72"                      "Dallas Stars"           
 [11] "1996"                    "48"                     
 [13] "26"                      ""                       
 [15] "0.585"                   "252"                    
 [17] "198"                     "54"                     
 [19] "Detroit Red Wings"       "1996"                   
 [21] "38"                      "26"                     
 [23] ""                        "0.463"                  
 [25] "253"                     "197"                    
 [27] "56"                      "Edmonton Oilers"        
 [29] "1996"                    "36"                     
 [31] "37"                      ""                       
 [33] "0.439"                   "252"                    
 [35] "247"                     "5"                      
 [37] "Florida Panthers"        "1996"                   
 [39] "35"                      "28"                     
 [41] ""                        "0.427"                  
 [43] "221"                     "201"                    
 [45] "20"                      "Hartford Whalers"       
 [47] "1996"                    "32"                     
 [49] "39"                      ""                       
 [51] "0.39"                    "226"                    
 [53] "256"                     "-30"                    
 [55] "Los Angeles Kings"       "1996"                   
 [57] "28"                      "43"                     
 [59] ""                        "0.341"                  
 [61] "214"                     "268"                    
 [63] "-54"                     "Montreal Canadiens"     
 [65] "1996"                    "31"                     
 [67] "36"                      ""                       
 [69] "0.378"                   "249"                    
 [71] "276"                     "-27"                    
 [73] "New Jersey Devils"       "1996"                   
 [75] "45"                      "23"                     
 [77] ""                        "0.549"                  
 [79] "231"                     "182"                    
 [81] "49"                      "New York Islanders"     
 [83] "1996"                    "29"                     
 [85] "41"                      ""                       
 [87] "0.354"                   "240"                    
 [89] "250"                     "-10"                    
 [91] "New York Rangers"        "1996"                   
 [93] "38"                      "34"                     
 [95] ""                        "0.463"                  
 [97] "258"                     "231"                    
 [99] "27"                      "Ottawa Senators"        
[101] "1996"                    "31"                     
[103] "36"                      ""                       
[105] "0.378"                   "226"                    
[107] "234"                     "-8"                     
[109] "Philadelphia Flyers"     "1996"                   
[111] "45"                      "24"                     
[113] ""                        "0.549"                  
[115] "274"                     "217"                    
[117] "57"                      "Phoenix Coyotes"        
[119] "1996"                    "38"                     
[121] "37"                      ""                       
[123] "0.463"                   "240"                    
[125] "243"                     "-3"                     
[127] "Pittsburgh Penguins"     "1996"                   
[129] "38"                      "36"                     
[131] ""                        "0.463"                  
[133] "285"                     "280"                    
[135] "5"                       "San Jose Sharks"        
[137] "1996"                    "27"                     
[139] "47"                      ""                       
[141] "0.329"                   "211"                    
[143] "278"                     "-67"                    
[145] "St. Louis Blues"         "1996"                   
[147] "36"                      "35"                     
[149] ""                        "0.439"                  
[151] "236"                     "239"                    
[153] "-3"                      "Tampa Bay Lightning"    
[155] "1996"                    "32"                     
[157] "40"                      ""                       
[159] "0.39"                    "217"                    
[161] "247"                     "-30"                    
[163] "Toronto Maple Leafs"     "1996"                   
[165] "30"                      "44"                     
[167] ""                        "0.366"                  
[169] "230"                     "273"                    
[171] "-43"                     "Vancouver Canucks"      
[173] "1996"                    "35"                     
[175] "40"                      ""                       
[177] "0.427"                   "257"                    
[179] "273"                     "-16"                    
[181] "Washington Capitals"     "1996"                   
[183] "33"                      "40"                     
[185] ""                        "0.402"                  
[187] "214"                     "231"                    
[189] "-17"                     "Mighty Ducks of Anaheim"
[191] "1997"                    "26"                     
[193] "43"                      ""                       
[195] "0.317"                   "205"                    
[197] "261"                     "-56"                    
[199] "Boston Bruins"           "1997"                   
[201] "39"                      "30"                     
[203] ""                        "0.476"                  
[205] "221"                     "194"                    
[207] "27"                      "Buffalo Sabres"         
[209] "1997"                    "36"                     
[211] "29"                      ""                       
[213] "0.439"                   "211"                    
[215] "187"                     "24"                     
[217] "Calgary Flames"          "1997"                   
[219] "26"                      "41"                     
[221] ""                        "0.317"                  
[223] "217"                     "252"                    
[225] "-35"                    </code></pre>
</div>
<div class="sourceCode cell-code" id="cb77"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb77-1"><a href="#cb77-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Get the name data</span></span>
<span id="cb77-2"><a href="#cb77-2" aria-hidden="true" tabindex="-1"></a>teamNames <span class="ot">=</span> fullPage <span class="sc">%&gt;%</span></span>
<span id="cb77-3"><a href="#cb77-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">html_elements</span>(cssName) <span class="sc">%&gt;%</span></span>
<span id="cb77-4"><a href="#cb77-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">html_text2</span>()</span>
<span id="cb77-5"><a href="#cb77-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb77-6"><a href="#cb77-6" aria-hidden="true" tabindex="-1"></a><span class="co"># Reminder about the %&gt;% pipe symbold</span></span>
<span id="cb77-7"><a href="#cb77-7" aria-hidden="true" tabindex="-1"></a><span class="co"># Same as above without using the %&gt;% pipe symbol</span></span>
<span id="cb77-8"><a href="#cb77-8" aria-hidden="true" tabindex="-1"></a><span class="fu">html_text2</span>(<span class="fu">html_elements</span>(fullPage, cssName))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code> [1] "Colorado Avalanche"      "Dallas Stars"           
 [3] "Detroit Red Wings"       "Edmonton Oilers"        
 [5] "Florida Panthers"        "Hartford Whalers"       
 [7] "Los Angeles Kings"       "Montreal Canadiens"     
 [9] "New Jersey Devils"       "New York Islanders"     
[11] "New York Rangers"        "Ottawa Senators"        
[13] "Philadelphia Flyers"     "Phoenix Coyotes"        
[15] "Pittsburgh Penguins"     "San Jose Sharks"        
[17] "St. Louis Blues"         "Tampa Bay Lightning"    
[19] "Toronto Maple Leafs"     "Vancouver Canucks"      
[21] "Washington Capitals"     "Mighty Ducks of Anaheim"
[23] "Boston Bruins"           "Buffalo Sabres"         
[25] "Calgary Flames"         </code></pre>
</div>
<div class="sourceCode cell-code" id="cb79"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb79-1"><a href="#cb79-1" aria-hidden="true" tabindex="-1"></a><span class="co"># The %&gt;% symbol takes the ootput of the command on the left and </span></span>
<span id="cb79-2"><a href="#cb79-2" aria-hidden="true" tabindex="-1"></a><span class="co"># sends it into the first argument of the command on the right.</span></span>
<span id="cb79-3"><a href="#cb79-3" aria-hidden="true" tabindex="-1"></a><span class="fu">rep</span>(<span class="fu">c</span>(<span class="dv">100</span>,<span class="dv">200</span>), <span class="dv">3</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 100 200 100 200 100 200</code></pre>
</div>
<div class="sourceCode cell-code" id="cb81"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb81-1"><a href="#cb81-1" aria-hidden="true" tabindex="-1"></a><span class="fu">c</span>(<span class="dv">100</span>,<span class="dv">200</span>) <span class="sc">%&gt;%</span></span>
<span id="cb81-2"><a href="#cb81-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">rep</span>(<span class="dv">3</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 100 200 100 200 100 200</code></pre>
</div>
<div class="sourceCode cell-code" id="cb83"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb83-1"><a href="#cb83-1" aria-hidden="true" tabindex="-1"></a>teamNames</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code> [1] "Colorado Avalanche"      "Dallas Stars"           
 [3] "Detroit Red Wings"       "Edmonton Oilers"        
 [5] "Florida Panthers"        "Hartford Whalers"       
 [7] "Los Angeles Kings"       "Montreal Canadiens"     
 [9] "New Jersey Devils"       "New York Islanders"     
[11] "New York Rangers"        "Ottawa Senators"        
[13] "Philadelphia Flyers"     "Phoenix Coyotes"        
[15] "Pittsburgh Penguins"     "San Jose Sharks"        
[17] "St. Louis Blues"         "Tampa Bay Lightning"    
[19] "Toronto Maple Leafs"     "Vancouver Canucks"      
[21] "Washington Capitals"     "Mighty Ducks of Anaheim"
[23] "Boston Bruins"           "Buffalo Sabres"         
[25] "Calgary Flames"         </code></pre>
</div>
<div class="sourceCode cell-code" id="cb85"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb85-1"><a href="#cb85-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Get the year data</span></span>
<span id="cb85-2"><a href="#cb85-2" aria-hidden="true" tabindex="-1"></a>teamYears <span class="ot">=</span> fullPage <span class="sc">%&gt;%</span></span>
<span id="cb85-3"><a href="#cb85-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">html_elements</span>(cssYear) <span class="sc">%&gt;%</span></span>
<span id="cb85-4"><a href="#cb85-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">html_text2</span>()</span>
<span id="cb85-5"><a href="#cb85-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb85-6"><a href="#cb85-6" aria-hidden="true" tabindex="-1"></a>teamYears</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code> [1] "1996" "1996" "1996" "1996" "1996" "1996" "1996" "1996" "1996" "1996"
[11] "1996" "1996" "1996" "1996" "1996" "1996" "1996" "1996" "1996" "1996"
[21] "1996" "1997" "1997" "1997" "1997"</code></pre>
</div>
<div class="sourceCode cell-code" id="cb87"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb87-1"><a href="#cb87-1" aria-hidden="true" tabindex="-1"></a><span class="co"># now combine the values in a dataframe</span></span>
<span id="cb87-2"><a href="#cb87-2" aria-hidden="true" tabindex="-1"></a>dfTeamInfo <span class="ot">=</span> <span class="fu">data.frame</span> (<span class="at">name=</span>teamNames, <span class="at">year=</span>teamYears)</span>
<span id="cb87-3"><a href="#cb87-3" aria-hidden="true" tabindex="-1"></a>dfTeamInfo</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>                      name year
1       Colorado Avalanche 1996
2             Dallas Stars 1996
3        Detroit Red Wings 1996
4          Edmonton Oilers 1996
5         Florida Panthers 1996
6         Hartford Whalers 1996
7        Los Angeles Kings 1996
8       Montreal Canadiens 1996
9        New Jersey Devils 1996
10      New York Islanders 1996
11        New York Rangers 1996
12         Ottawa Senators 1996
13     Philadelphia Flyers 1996
14         Phoenix Coyotes 1996
15     Pittsburgh Penguins 1996
16         San Jose Sharks 1996
17         St. Louis Blues 1996
18     Tampa Bay Lightning 1996
19     Toronto Maple Leafs 1996
20       Vancouver Canucks 1996
21     Washington Capitals 1996
22 Mighty Ducks of Anaheim 1997
23           Boston Bruins 1997
24          Buffalo Sabres 1997
25          Calgary Flames 1997</code></pre>
</div>
</div>
</section>
</section>
<section id="put-it-into-a-function" class="level2" data-number="34.13">
<h2 data-number="34.13" class="anchored" data-anchor-id="put-it-into-a-function"><span class="header-section-number">34.13</span> Put it into a function</h2>
<div class="cell">
<div class="sourceCode cell-code" id="cb89"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb89-1"><a href="#cb89-1" aria-hidden="true" tabindex="-1"></a><span class="co">#-----------------------------------------------</span></span>
<span id="cb89-2"><a href="#cb89-2" aria-hidden="true" tabindex="-1"></a><span class="co"># Let's see if we can get the first page of data</span></span>
<span id="cb89-3"><a href="#cb89-3" aria-hidden="true" tabindex="-1"></a><span class="co">#-----------------------------------------------</span></span>
<span id="cb89-4"><a href="#cb89-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb89-5"><a href="#cb89-5" aria-hidden="true" tabindex="-1"></a><span class="co"># The following function will be useful to get rid of extra "whitespace"</span></span>
<span id="cb89-6"><a href="#cb89-6" aria-hidden="true" tabindex="-1"></a><span class="co"># if necessary.</span></span>
<span id="cb89-7"><a href="#cb89-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb89-8"><a href="#cb89-8" aria-hidden="true" tabindex="-1"></a>removeWhitespace <span class="ot">=</span> <span class="cf">function</span>(text){</span>
<span id="cb89-9"><a href="#cb89-9" aria-hidden="true" tabindex="-1"></a>  text <span class="ot">=</span> <span class="fu">gsub</span>(<span class="st">"</span><span class="sc">\\</span><span class="st">n"</span>,<span class="st">""</span>, text)</span>
<span id="cb89-10"><a href="#cb89-10" aria-hidden="true" tabindex="-1"></a>  text <span class="ot">=</span> <span class="fu">gsub</span>(<span class="st">"</span><span class="sc">\\</span><span class="st">t"</span>,<span class="st">""</span>, text )</span>
<span id="cb89-11"><a href="#cb89-11" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb89-12"><a href="#cb89-12" aria-hidden="true" tabindex="-1"></a>  <span class="fu">return</span> ( <span class="fu">gsub</span>(<span class="st">" "</span>, <span class="st">""</span>, text))</span>
<span id="cb89-13"><a href="#cb89-13" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb89-14"><a href="#cb89-14" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb89-15"><a href="#cb89-15" aria-hidden="true" tabindex="-1"></a>x <span class="ot">=</span> <span class="st">"    this is some info </span><span class="sc">\n\n</span><span class="st">another line</span><span class="sc">\n</span><span class="st">another line</span><span class="sc">\t</span><span class="st">after a tab"</span></span>
<span id="cb89-16"><a href="#cb89-16" aria-hidden="true" tabindex="-1"></a><span class="fu">cat</span>(x)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>    this is some info 

another line
another line    after a tab</code></pre>
</div>
<div class="sourceCode cell-code" id="cb91"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb91-1"><a href="#cb91-1" aria-hidden="true" tabindex="-1"></a><span class="fu">removeWhitespace</span>(x)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "thisissomeinfoanotherlineanotherlineafteratab"</code></pre>
</div>
<div class="sourceCode cell-code" id="cb93"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb93-1"><a href="#cb93-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Create a function to scrape the hocky data from one of the </span></span>
<span id="cb93-2"><a href="#cb93-2" aria-hidden="true" tabindex="-1"></a><span class="co"># pages as specified in the url argument.</span></span>
<span id="cb93-3"><a href="#cb93-3" aria-hidden="true" tabindex="-1"></a>getHockeyData <span class="ot">&lt;-</span> <span class="cf">function</span>(url) {</span>
<span id="cb93-4"><a href="#cb93-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb93-5"><a href="#cb93-5" aria-hidden="true" tabindex="-1"></a>  the_full_html <span class="ot">=</span> <span class="fu">read_html</span>(url)</span>
<span id="cb93-6"><a href="#cb93-6" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb93-7"><a href="#cb93-7" aria-hidden="true" tabindex="-1"></a>  teamNames <span class="ot">=</span> the_full_html <span class="sc">%&gt;%</span></span>
<span id="cb93-8"><a href="#cb93-8" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Analyze the HTML from one of the pages to figure out which CSS selector</span></span>
<span id="cb93-9"><a href="#cb93-9" aria-hidden="true" tabindex="-1"></a>    <span class="co"># is best to use. We did so and figured out that the hockey team names</span></span>
<span id="cb93-10"><a href="#cb93-10" aria-hidden="true" tabindex="-1"></a>    <span class="co"># were surrounded with an HTML that had class="name". Therefore the</span></span>
<span id="cb93-11"><a href="#cb93-11" aria-hidden="true" tabindex="-1"></a>    <span class="co"># best css slector to use was ".name"</span></span>
<span id="cb93-12"><a href="#cb93-12" aria-hidden="true" tabindex="-1"></a>    <span class="fu">html_elements</span>( <span class="st">".name"</span> ) <span class="sc">%&gt;%</span>     </span>
<span id="cb93-13"><a href="#cb93-13" aria-hidden="true" tabindex="-1"></a>    <span class="fu">html_text</span>()</span>
<span id="cb93-14"><a href="#cb93-14" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb93-15"><a href="#cb93-15" aria-hidden="true" tabindex="-1"></a>  teamNames <span class="ot">=</span> <span class="fu">removeWhitespace</span>(teamNames)   <span class="co"># the team names seem to be surrounded by whitespace</span></span>
<span id="cb93-16"><a href="#cb93-16" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb93-17"><a href="#cb93-17" aria-hidden="true" tabindex="-1"></a>  wins <span class="ot">=</span> the_full_html <span class="sc">%&gt;%</span></span>
<span id="cb93-18"><a href="#cb93-18" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Analyze the HTML from one of the pages to figure out which CSS selector</span></span>
<span id="cb93-19"><a href="#cb93-19" aria-hidden="true" tabindex="-1"></a>    <span class="co"># is best to use. We did so and figured out that the number of wins</span></span>
<span id="cb93-20"><a href="#cb93-20" aria-hidden="true" tabindex="-1"></a>    <span class="co"># were surrounded with an HTML that had class="wins". Therefore the</span></span>
<span id="cb93-21"><a href="#cb93-21" aria-hidden="true" tabindex="-1"></a>    <span class="co"># best css slector to use was ".wins"</span></span>
<span id="cb93-22"><a href="#cb93-22" aria-hidden="true" tabindex="-1"></a>    <span class="fu">html_elements</span>( <span class="st">".wins"</span> ) <span class="sc">%&gt;%</span>   <span class="co"># analyze the HTML to find the appropriate css selector</span></span>
<span id="cb93-23"><a href="#cb93-23" aria-hidden="true" tabindex="-1"></a>    <span class="fu">html_text</span>()</span>
<span id="cb93-24"><a href="#cb93-24" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb93-25"><a href="#cb93-25" aria-hidden="true" tabindex="-1"></a>  wins <span class="ot">=</span> <span class="fu">removeWhitespace</span>(wins)</span>
<span id="cb93-26"><a href="#cb93-26" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb93-27"><a href="#cb93-27" aria-hidden="true" tabindex="-1"></a>  <span class="co"># ... we can keep doing this to get all the other data on the page </span></span>
<span id="cb93-28"><a href="#cb93-28" aria-hidden="true" tabindex="-1"></a>  <span class="co"># for each team ... We didn't do that here but feel free to fill in </span></span>
<span id="cb93-29"><a href="#cb93-29" aria-hidden="true" tabindex="-1"></a>  <span class="co"># the missing code to scrape the rest of the data from the webpages.</span></span>
<span id="cb93-30"><a href="#cb93-30" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb93-31"><a href="#cb93-31" aria-hidden="true" tabindex="-1"></a>  <span class="fu">return</span>(<span class="fu">data.frame</span>(<span class="at">team=</span>teamNames, <span class="at">wins=</span>wins, <span class="at">stringsAsFactors=</span><span class="cn">FALSE</span>))  </span>
<span id="cb93-32"><a href="#cb93-32" aria-hidden="true" tabindex="-1"></a>}</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="some-urls-includes-info-about-the-page-number" class="level2" data-number="34.14">
<h2 data-number="34.14" class="anchored" data-anchor-id="some-urls-includes-info-about-the-page-number"><span class="header-section-number">34.14</span> Some URLs includes info about the page number</h2>
<div class="cell">
<div class="sourceCode cell-code" id="cb94"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb94-1"><a href="#cb94-1" aria-hidden="true" tabindex="-1"></a>page1Url <span class="ot">=</span> <span class="st">"https://scrapethissite.com/pages/forms/?page_num=20"</span></span>
<span id="cb94-2"><a href="#cb94-2" aria-hidden="true" tabindex="-1"></a><span class="fu">getHockeyData</span>(page1Url)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>                  team wins
1      LosAngelesKings   34
2        MinnesotaWild   40
3    MontrealCanadiens   41
4   NashvillePredators   40
5      NewJerseyDevils   51
6     NewYorkIslanders   26
7       NewYorkRangers   43
8       OttawaSenators   36
9   PhiladelphiaFlyers   44
10      PhoenixCoyotes   36
11  PittsburghPenguins   45
12       SanJoseSharks   53
13       St.LouisBlues   41
14   TampaBayLightning   24
15   TorontoMapleLeafs   34
16    VancouverCanucks   45
17  WashingtonCapitals   50
18        AnaheimDucks   39
19    AtlantaThrashers   35
20        BostonBruins   39
21       BuffaloSabres   45
22       CalgaryFlames   40
23  CarolinaHurricanes   35
24 ColumbusBlueJackets   32
25   ChicagoBlackhawks   52</code></pre>
</div>
<div class="sourceCode cell-code" id="cb96"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb96-1"><a href="#cb96-1" aria-hidden="true" tabindex="-1"></a><span class="co">#--------------------------------------------------------------------</span></span>
<span id="cb96-2"><a href="#cb96-2" aria-hidden="true" tabindex="-1"></a><span class="co"># Let's figure out how to write a loop to get multiple pages of data</span></span>
<span id="cb96-3"><a href="#cb96-3" aria-hidden="true" tabindex="-1"></a><span class="co">#--------------------------------------------------------------------</span></span>
<span id="cb96-4"><a href="#cb96-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb96-5"><a href="#cb96-5" aria-hidden="true" tabindex="-1"></a><span class="co"># The following is the url without the page number</span></span>
<span id="cb96-6"><a href="#cb96-6" aria-hidden="true" tabindex="-1"></a>baseurl <span class="ot">=</span> <span class="st">"https://scrapethissite.com/pages/forms/?page_num="</span></span>
<span id="cb96-7"><a href="#cb96-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb96-8"><a href="#cb96-8" aria-hidden="true" tabindex="-1"></a><span class="co"># get data for the first page</span></span>
<span id="cb96-9"><a href="#cb96-9" aria-hidden="true" tabindex="-1"></a>pageNum <span class="ot">=</span> <span class="st">"1"</span></span>
<span id="cb96-10"><a href="#cb96-10" aria-hidden="true" tabindex="-1"></a>url <span class="ot">=</span> <span class="fu">paste0</span>(baseurl, pageNum)</span>
<span id="cb96-11"><a href="#cb96-11" aria-hidden="true" tabindex="-1"></a><span class="fu">getHockeyData</span> (url)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>                  team wins
1         BostonBruins   44
2        BuffaloSabres   31
3        CalgaryFlames   46
4    ChicagoBlackhawks   49
5      DetroitRedWings   34
6       EdmontonOilers   37
7      HartfordWhalers   31
8      LosAngelesKings   46
9  MinnesotaNorthStars   27
10   MontrealCanadiens   39
11     NewJerseyDevils   32
12    NewYorkIslanders   25
13      NewYorkRangers   36
14  PhiladelphiaFlyers   33
15  PittsburghPenguins   41
16     QuebecNordiques   16
17       St.LouisBlues   47
18   TorontoMapleLeafs   23
19    VancouverCanucks   28
20  WashingtonCapitals   37
21        WinnipegJets   26
22        BostonBruins   36
23       BuffaloSabres   31
24       CalgaryFlames   31
25   ChicagoBlackhawks   36</code></pre>
</div>
<div class="sourceCode cell-code" id="cb98"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb98-1"><a href="#cb98-1" aria-hidden="true" tabindex="-1"></a><span class="co"># get data for the 2nd page</span></span>
<span id="cb98-2"><a href="#cb98-2" aria-hidden="true" tabindex="-1"></a>url<span class="ot">=</span><span class="fu">paste0</span>(baseurl, <span class="st">"2"</span>)</span>
<span id="cb98-3"><a href="#cb98-3" aria-hidden="true" tabindex="-1"></a><span class="fu">getHockeyData</span>(url)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>                  team wins
1      DetroitRedWings   43
2       EdmontonOilers   36
3      HartfordWhalers   26
4      LosAngelesKings   35
5  MinnesotaNorthStars   32
6    MontrealCanadiens   41
7      NewJerseyDevils   38
8     NewYorkIslanders   34
9       NewYorkRangers   50
10  PhiladelphiaFlyers   32
11  PittsburghPenguins   39
12     QuebecNordiques   20
13       SanJoseSharks   17
14       St.LouisBlues   36
15   TorontoMapleLeafs   30
16    VancouverCanucks   42
17  WashingtonCapitals   45
18        WinnipegJets   33
19        BostonBruins   51
20       BuffaloSabres   38
21       CalgaryFlames   43
22   ChicagoBlackhawks   47
23     DetroitRedWings   47
24      EdmontonOilers   26
25     HartfordWhalers   26</code></pre>
</div>
</div>
</section>
<section id="function-to-get-multiple-pages" class="level2" data-number="34.15">
<h2 data-number="34.15" class="anchored" data-anchor-id="function-to-get-multiple-pages"><span class="header-section-number">34.15</span> Function to get multiple pages</h2>
<div class="cell">
<div class="sourceCode cell-code" id="cb100"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb100-1"><a href="#cb100-1" aria-hidden="true" tabindex="-1"></a><span class="co"># We can now write a function to get the data from multiple pages of the hockey data.</span></span>
<span id="cb100-2"><a href="#cb100-2" aria-hidden="true" tabindex="-1"></a><span class="co"># The pages argument is expected to be a vector with the numbers of </span></span>
<span id="cb100-3"><a href="#cb100-3" aria-hidden="true" tabindex="-1"></a><span class="co"># the pages you want to retrieve.</span></span>
<span id="cb100-4"><a href="#cb100-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb100-5"><a href="#cb100-5" aria-hidden="true" tabindex="-1"></a>getMultiplePages <span class="ot">&lt;-</span> <span class="cf">function</span>(<span class="at">pages =</span> <span class="dv">1</span><span class="sc">:</span><span class="dv">10</span>){</span>
<span id="cb100-6"><a href="#cb100-6" aria-hidden="true" tabindex="-1"></a>  <span class="co"># This is the URL without the page number</span></span>
<span id="cb100-7"><a href="#cb100-7" aria-hidden="true" tabindex="-1"></a>  baseurl <span class="ot">=</span> <span class="st">"https://scrapethissite.com/pages/forms/?page_num="</span></span>
<span id="cb100-8"><a href="#cb100-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb100-9"><a href="#cb100-9" aria-hidden="true" tabindex="-1"></a>  <span class="co">#   baseurl = "https://scrapethissite.com/pages/forms/?page_num=THE_PAGE_NUMBER&amp;league=american</span></span>
<span id="cb100-10"><a href="#cb100-10" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb100-11"><a href="#cb100-11" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb100-12"><a href="#cb100-12" aria-hidden="true" tabindex="-1"></a>  <span class="co"># baseurl = "https://finance.yahoo.com/quote/&lt;&lt;&lt;TICKER&gt;&gt;&gt;?p=&lt;&lt;&lt;TICKER&gt;&gt;&gt;&amp;.tsrc=fin-srch"</span></span>
<span id="cb100-13"><a href="#cb100-13" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb100-14"><a href="#cb100-14" aria-hidden="true" tabindex="-1"></a>  allData <span class="ot">=</span> <span class="cn">NA</span></span>
<span id="cb100-15"><a href="#cb100-15" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb100-16"><a href="#cb100-16" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Loop through all the pages</span></span>
<span id="cb100-17"><a href="#cb100-17" aria-hidden="true" tabindex="-1"></a>  <span class="cf">for</span> ( page <span class="cf">in</span> pages ){</span>
<span id="cb100-18"><a href="#cb100-18" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Create the URL for the current page</span></span>
<span id="cb100-19"><a href="#cb100-19" aria-hidden="true" tabindex="-1"></a>    url <span class="ot">=</span> <span class="fu">paste0</span>(baseurl, page)</span>
<span id="cb100-20"><a href="#cb100-20" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb100-21"><a href="#cb100-21" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Get the data for the current page</span></span>
<span id="cb100-22"><a href="#cb100-22" aria-hidden="true" tabindex="-1"></a>    hd <span class="ot">=</span> <span class="fu">getHockeyData</span>(url)</span>
<span id="cb100-23"><a href="#cb100-23" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb100-24"><a href="#cb100-24" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Combine the data for the current page with all of the data</span></span>
<span id="cb100-25"><a href="#cb100-25" aria-hidden="true" tabindex="-1"></a>    <span class="co"># from the pages we have already retreived.</span></span>
<span id="cb100-26"><a href="#cb100-26" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb100-27"><a href="#cb100-27" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> (<span class="sc">!</span><span class="fu">is.data.frame</span>(allData)){</span>
<span id="cb100-28"><a href="#cb100-28" aria-hidden="true" tabindex="-1"></a>      <span class="co"># This will only happen for the first page of retrieved data.</span></span>
<span id="cb100-29"><a href="#cb100-29" aria-hidden="true" tabindex="-1"></a>      allData <span class="ot">=</span> hd</span>
<span id="cb100-30"><a href="#cb100-30" aria-hidden="true" tabindex="-1"></a>    } <span class="cf">else</span> {</span>
<span id="cb100-31"><a href="#cb100-31" aria-hidden="true" tabindex="-1"></a>      <span class="co"># This will happen for all pages other than the first page retrieved.</span></span>
<span id="cb100-32"><a href="#cb100-32" aria-hidden="true" tabindex="-1"></a>      <span class="co"># rbind will only work if allData is already a dataframe. Therefore</span></span>
<span id="cb100-33"><a href="#cb100-33" aria-hidden="true" tabindex="-1"></a>      <span class="co"># we cannot use rbind for the first page of retrieved data. </span></span>
<span id="cb100-34"><a href="#cb100-34" aria-hidden="true" tabindex="-1"></a>      allData <span class="ot">=</span> <span class="fu">rbind</span>(allData, hd)</span>
<span id="cb100-35"><a href="#cb100-35" aria-hidden="true" tabindex="-1"></a>    }</span>
<span id="cb100-36"><a href="#cb100-36" aria-hidden="true" tabindex="-1"></a>    <span class="co"># We don't want to overwhelm the web server with too many requests</span></span>
<span id="cb100-37"><a href="#cb100-37" aria-hidden="true" tabindex="-1"></a>    <span class="co"># so we will pause (i.e. sleep) for 1 second after every time we</span></span>
<span id="cb100-38"><a href="#cb100-38" aria-hidden="true" tabindex="-1"></a>    <span class="co"># retrieve a page before getting the next page of data.</span></span>
<span id="cb100-39"><a href="#cb100-39" aria-hidden="true" tabindex="-1"></a>    <span class="fu">Sys.sleep</span>(<span class="dv">1</span>)</span>
<span id="cb100-40"><a href="#cb100-40" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb100-41"><a href="#cb100-41" aria-hidden="true" tabindex="-1"></a>  <span class="fu">return</span>(allData)</span>
<span id="cb100-42"><a href="#cb100-42" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb100-43"><a href="#cb100-43" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb100-44"><a href="#cb100-44" aria-hidden="true" tabindex="-1"></a><span class="fu">getMultiplePages</span>(<span class="dv">4</span><span class="sc">:</span><span class="dv">6</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>                   team wins
1       FloridaPanthers   33
2       HartfordWhalers   27
3       LosAngelesKings   27
4     MontrealCanadiens   41
5       NewJerseyDevils   47
6      NewYorkIslanders   36
7        NewYorkRangers   52
8        OttawaSenators   14
9    PhiladelphiaFlyers   35
10   PittsburghPenguins   44
11      QuebecNordiques   34
12        SanJoseSharks   33
13        St.LouisBlues   40
14    TampaBayLightning   30
15    TorontoMapleLeafs   43
16     VancouverCanucks   41
17   WashingtonCapitals   39
18         WinnipegJets   24
19 MightyDucksofAnaheim   16
20         BostonBruins   27
21        BuffaloSabres   22
22        CalgaryFlames   24
23    ChicagoBlackhawks   24
24          DallasStars   17
25      DetroitRedWings   33
26       EdmontonOilers   17
27      FloridaPanthers   20
28      HartfordWhalers   19
29      LosAngelesKings   16
30    MontrealCanadiens   18
31      NewJerseyDevils   22
32     NewYorkIslanders   15
33       NewYorkRangers   22
34       OttawaSenators    9
35   PhiladelphiaFlyers   28
36   PittsburghPenguins   29
37      QuebecNordiques   30
38        SanJoseSharks   19
39        St.LouisBlues   28
40    TampaBayLightning   17
41    TorontoMapleLeafs   21
42     VancouverCanucks   18
43   WashingtonCapitals   22
44         WinnipegJets   16
45 MightyDucksofAnaheim   35
46         BostonBruins   40
47        BuffaloSabres   33
48        CalgaryFlames   34
49    ChicagoBlackhawks   40
50    ColoradoAvalanche   47
51          DallasStars   26
52      DetroitRedWings   62
53       EdmontonOilers   30
54      FloridaPanthers   41
55      HartfordWhalers   34
56      LosAngelesKings   24
57    MontrealCanadiens   40
58      NewJerseyDevils   37
59     NewYorkIslanders   22
60       NewYorkRangers   41
61       OttawaSenators   18
62   PhiladelphiaFlyers   45
63   PittsburghPenguins   49
64        SanJoseSharks   20
65        St.LouisBlues   32
66    TampaBayLightning   38
67    TorontoMapleLeafs   34
68     VancouverCanucks   32
69   WashingtonCapitals   39
70         WinnipegJets   36
71 MightyDucksofAnaheim   36
72         BostonBruins   26
73        BuffaloSabres   40
74        CalgaryFlames   32
75    ChicagoBlackhawks   34</code></pre>
</div>
<div class="sourceCode cell-code" id="cb102"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb102-1"><a href="#cb102-1" aria-hidden="true" tabindex="-1"></a><span class="co"># BE CAREFUL - the next line may take a little time to run</span></span>
<span id="cb102-2"><a href="#cb102-2" aria-hidden="true" tabindex="-1"></a><span class="co"># allPages = getMultiplePages(1:24)</span></span>
<span id="cb102-3"><a href="#cb102-3" aria-hidden="true" tabindex="-1"></a><span class="co">#</span></span>
<span id="cb102-4"><a href="#cb102-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Let's try it with just 2 pages for now ...</span></span>
<span id="cb102-5"><a href="#cb102-5" aria-hidden="true" tabindex="-1"></a>allPages <span class="ot">=</span> <span class="fu">getMultiplePages</span>(<span class="dv">1</span><span class="sc">:</span><span class="dv">2</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="scrape-the-number-of-pages-to-get" class="level2" data-number="34.16">
<h2 data-number="34.16" class="anchored" data-anchor-id="scrape-the-number-of-pages-to-get"><span class="header-section-number">34.16</span> Scrape the number of pages to get</h2>
<div class="cell">
<div class="sourceCode cell-code" id="cb103"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb103-1"><a href="#cb103-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Figure out automatically how many pages of data there are on the website</span></span>
<span id="cb103-2"><a href="#cb103-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb103-3"><a href="#cb103-3" aria-hidden="true" tabindex="-1"></a>url<span class="ot">=</span> <span class="st">"https://www.scrapethissite.com/pages/forms/?page_num=1"</span></span>
<span id="cb103-4"><a href="#cb103-4" aria-hidden="true" tabindex="-1"></a>fullPage <span class="ot">=</span> <span class="fu">read_html</span>(url)</span>
<span id="cb103-5"><a href="#cb103-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb103-6"><a href="#cb103-6" aria-hidden="true" tabindex="-1"></a><span class="co"># css that targets the 24 that represents the 24th page of data</span></span>
<span id="cb103-7"><a href="#cb103-7" aria-hidden="true" tabindex="-1"></a>css <span class="ot">=</span> <span class="st">"li:nth-child(24) a"</span></span>
<span id="cb103-8"><a href="#cb103-8" aria-hidden="true" tabindex="-1"></a>css <span class="ot">=</span> <span class="st">"li:last-child a"</span></span>
<span id="cb103-9"><a href="#cb103-9" aria-hidden="true" tabindex="-1"></a>css <span class="ot">=</span> <span class="st">".pagination-area li:nth-last-child(2) a"</span></span>
<span id="cb103-10"><a href="#cb103-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb103-11"><a href="#cb103-11" aria-hidden="true" tabindex="-1"></a>fullPage <span class="sc">%&gt;%</span></span>
<span id="cb103-12"><a href="#cb103-12" aria-hidden="true" tabindex="-1"></a>  <span class="fu">html_elements</span>(css) <span class="sc">%&gt;%</span></span>
<span id="cb103-13"><a href="#cb103-13" aria-hidden="true" tabindex="-1"></a>  <span class="fu">html_text2</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "24"</code></pre>
</div>
</div>
</section>
<section id="robots.txt-file" class="level2" data-number="34.17">
<h2 data-number="34.17" class="anchored" data-anchor-id="robots.txt-file"><span class="header-section-number">34.17</span> robots.txt file</h2>
<div class="cell">
<div class="sourceCode cell-code" id="cb105"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb105-1"><a href="#cb105-1" aria-hidden="true" tabindex="-1"></a><span class="co">#@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@</span></span>
<span id="cb105-2"><a href="#cb105-2" aria-hidden="true" tabindex="-1"></a><span class="co"># DEFINITION: root directory (or root folder) ####</span></span>
<span id="cb105-3"><a href="#cb105-3" aria-hidden="true" tabindex="-1"></a><span class="co"># </span></span>
<span id="cb105-4"><a href="#cb105-4" aria-hidden="true" tabindex="-1"></a><span class="co"># The "root" folder is the top level folder</span></span>
<span id="cb105-5"><a href="#cb105-5" aria-hidden="true" tabindex="-1"></a><span class="co"># on a computer harddrive or on a website.</span></span>
<span id="cb105-6"><a href="#cb105-6" aria-hidden="true" tabindex="-1"></a><span class="co"># It is named "/" on Mac and "\" on Windows.</span></span>
<span id="cb105-7"><a href="#cb105-7" aria-hidden="true" tabindex="-1"></a><span class="co">#@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@</span></span>
<span id="cb105-8"><a href="#cb105-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb105-9"><a href="#cb105-9" aria-hidden="true" tabindex="-1"></a><span class="co"># EXAMPLE</span></span>
<span id="cb105-10"><a href="#cb105-10" aria-hidden="true" tabindex="-1"></a><span class="fu">dir</span>(<span class="st">"/"</span>)   <span class="co"># show the files and folders in the root of the harddrive</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code> [1] "$Recycle.Bin"              "$SysReset"                
 [3] "BGInfo"                    "Brother"                  
 [5] "Documents and Settings"    "DumpStack.log.tmp"        
 [7] "hiberfil.sys"              "Intel"                    
 [9] "OneDriveTemp"              "pagefile.sys"             
[11] "PerfLogs"                  "Program Files"            
[13] "Program Files (x86)"       "ProgramData"              
[15] "Recovery"                  "swapfile.sys"             
[17] "System Volume Information" "Users"                    
[19] "Windows"                   "Windows.old"              </code></pre>
</div>
<div class="sourceCode cell-code" id="cb107"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb107-1"><a href="#cb107-1" aria-hidden="true" tabindex="-1"></a><span class="co"># robots.txt ####</span></span>
<span id="cb107-2"><a href="#cb107-2" aria-hidden="true" tabindex="-1"></a><span class="co"># </span></span>
<span id="cb107-3"><a href="#cb107-3" aria-hidden="true" tabindex="-1"></a><span class="co"># Websites may place a file named robots.txt</span></span>
<span id="cb107-4"><a href="#cb107-4" aria-hidden="true" tabindex="-1"></a><span class="co"># at the very top of their website.</span></span>
<span id="cb107-5"><a href="#cb107-5" aria-hidden="true" tabindex="-1"></a><span class="co">#</span></span>
<span id="cb107-6"><a href="#cb107-6" aria-hidden="true" tabindex="-1"></a><span class="co"># Examples</span></span>
<span id="cb107-7"><a href="#cb107-7" aria-hidden="true" tabindex="-1"></a><span class="co">#   https://finance.yahoo.com/robots.txt    # pretty simple</span></span>
<span id="cb107-8"><a href="#cb107-8" aria-hidden="true" tabindex="-1"></a><span class="co">#   https://www.amazon.com/robots.txt       # very complex</span></span>
<span id="cb107-9"><a href="#cb107-9" aria-hidden="true" tabindex="-1"></a><span class="co">#   https://www.gutenberg.org/robots.txt    # pretty typical</span></span>
<span id="cb107-10"><a href="#cb107-10" aria-hidden="true" tabindex="-1"></a><span class="co">#</span></span>
<span id="cb107-11"><a href="#cb107-11" aria-hidden="true" tabindex="-1"></a><span class="co">#</span></span>
<span id="cb107-12"><a href="#cb107-12" aria-hidden="true" tabindex="-1"></a><span class="co"># Example entries in robots.txt</span></span>
<span id="cb107-13"><a href="#cb107-13" aria-hidden="true" tabindex="-1"></a><span class="co">#     Disallow all robots to scrape the entire site</span></span>
<span id="cb107-14"><a href="#cb107-14" aria-hidden="true" tabindex="-1"></a><span class="co">#     Since Disallow specifies the "root" or top level folder</span></span>
<span id="cb107-15"><a href="#cb107-15" aria-hidden="true" tabindex="-1"></a><span class="co">#</span></span>
<span id="cb107-16"><a href="#cb107-16" aria-hidden="true" tabindex="-1"></a><span class="co">#        User-agent: *</span></span>
<span id="cb107-17"><a href="#cb107-17" aria-hidden="true" tabindex="-1"></a><span class="co">#        Disallow: /</span></span>
<span id="cb107-18"><a href="#cb107-18" aria-hidden="true" tabindex="-1"></a><span class="co">#</span></span>
<span id="cb107-19"><a href="#cb107-19" aria-hidden="true" tabindex="-1"></a><span class="co">#     Allow all robots to scrape the entire site</span></span>
<span id="cb107-20"><a href="#cb107-20" aria-hidden="true" tabindex="-1"></a><span class="co">#     since "Disallow: " specifies no path</span></span>
<span id="cb107-21"><a href="#cb107-21" aria-hidden="true" tabindex="-1"></a><span class="co">#</span></span>
<span id="cb107-22"><a href="#cb107-22" aria-hidden="true" tabindex="-1"></a><span class="co">#        User-agent: *</span></span>
<span id="cb107-23"><a href="#cb107-23" aria-hidden="true" tabindex="-1"></a><span class="co">#        Disallow: </span></span>
<span id="cb107-24"><a href="#cb107-24" aria-hidden="true" tabindex="-1"></a><span class="co">#</span></span>
<span id="cb107-25"><a href="#cb107-25" aria-hidden="true" tabindex="-1"></a><span class="co">#     Sleep 10 seconds between each page request</span></span>
<span id="cb107-26"><a href="#cb107-26" aria-hidden="true" tabindex="-1"></a><span class="co">#</span></span>
<span id="cb107-27"><a href="#cb107-27" aria-hidden="true" tabindex="-1"></a><span class="co">#        crawl-delay: 10</span></span>
<span id="cb107-28"><a href="#cb107-28" aria-hidden="true" tabindex="-1"></a><span class="co">#</span></span>
<span id="cb107-29"><a href="#cb107-29" aria-hidden="true" tabindex="-1"></a><span class="co"># More info about robots.txt</span></span>
<span id="cb107-30"><a href="#cb107-30" aria-hidden="true" tabindex="-1"></a><span class="co">#</span></span>
<span id="cb107-31"><a href="#cb107-31" aria-hidden="true" tabindex="-1"></a><span class="co">#    Quick overview and a "test tool"</span></span>
<span id="cb107-32"><a href="#cb107-32" aria-hidden="true" tabindex="-1"></a><span class="co">#      https://en.ryte.com/free-tools/robots-txt/</span></span>
<span id="cb107-33"><a href="#cb107-33" aria-hidden="true" tabindex="-1"></a><span class="co">#</span></span>
<span id="cb107-34"><a href="#cb107-34" aria-hidden="true" tabindex="-1"></a><span class="co">#    Ultimate robots.txt guide</span></span>
<span id="cb107-35"><a href="#cb107-35" aria-hidden="true" tabindex="-1"></a><span class="co">#      https://yoast.com/ultimate-guide-robots-txt/</span></span>
<span id="cb107-36"><a href="#cb107-36" aria-hidden="true" tabindex="-1"></a><span class="co">#</span></span>
<span id="cb107-37"><a href="#cb107-37" aria-hidden="true" tabindex="-1"></a><span class="co">#    Another test tool</span></span>
<span id="cb107-38"><a href="#cb107-38" aria-hidden="true" tabindex="-1"></a><span class="co">#      https://technicalseo.com/tools/robots-txt/</span></span>
<span id="cb107-39"><a href="#cb107-39" aria-hidden="true" tabindex="-1"></a><span class="co">#@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="techniques-for-finding-css-selectors" class="level2" data-number="34.18">
<h2 data-number="34.18" class="anchored" data-anchor-id="techniques-for-finding-css-selectors"><span class="header-section-number">34.18</span> Techniques for finding CSS selectors</h2>
<div class="cell">
<div class="sourceCode cell-code" id="cb108"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb108-1"><a href="#cb108-1" aria-hidden="true" tabindex="-1"></a><span class="do">############################################################################.</span></span>
<span id="cb108-2"><a href="#cb108-2" aria-hidden="true" tabindex="-1"></a><span class="co"># Techniques for finding CSS selectors</span></span>
<span id="cb108-3"><a href="#cb108-3" aria-hidden="true" tabindex="-1"></a><span class="co">#</span></span>
<span id="cb108-4"><a href="#cb108-4" aria-hidden="true" tabindex="-1"></a><span class="co"># 1. Analyze the entire HTML code.</span></span>
<span id="cb108-5"><a href="#cb108-5" aria-hidden="true" tabindex="-1"></a><span class="co">#    Right-click on blank area of page and choose "view page source"</span></span>
<span id="cb108-6"><a href="#cb108-6" aria-hidden="true" tabindex="-1"></a><span class="co">#    (or something similar)</span></span>
<span id="cb108-7"><a href="#cb108-7" aria-hidden="true" tabindex="-1"></a><span class="co">#</span></span>
<span id="cb108-8"><a href="#cb108-8" aria-hidden="true" tabindex="-1"></a><span class="co"># 2. Use the built in developer tools in most browsers.</span></span>
<span id="cb108-9"><a href="#cb108-9" aria-hidden="true" tabindex="-1"></a><span class="co">#    Right click on the data you want to scrape and choose "inspect".</span></span>
<span id="cb108-10"><a href="#cb108-10" aria-hidden="true" tabindex="-1"></a><span class="co">#    That brings you to the browser's developers tools. </span></span>
<span id="cb108-11"><a href="#cb108-11" aria-hidden="true" tabindex="-1"></a><span class="co">#    Right click on the HTML Tag you want to get a CSS selector for</span></span>
<span id="cb108-12"><a href="#cb108-12" aria-hidden="true" tabindex="-1"></a><span class="co">#    and choose "Copy selector". Then paste the selector into </span></span>
<span id="cb108-13"><a href="#cb108-13" aria-hidden="true" tabindex="-1"></a><span class="co">#    a text editor (e.g. VSCode or RStudio's editor).</span></span>
<span id="cb108-14"><a href="#cb108-14" aria-hidden="true" tabindex="-1"></a><span class="co">#    </span></span>
<span id="cb108-15"><a href="#cb108-15" aria-hidden="true" tabindex="-1"></a><span class="co">#    Warning that these selectors will be too overly specific and</span></span>
<span id="cb108-16"><a href="#cb108-16" aria-hidden="true" tabindex="-1"></a><span class="co">#    do not generalize well to scrape the same type of data from</span></span>
<span id="cb108-17"><a href="#cb108-17" aria-hidden="true" tabindex="-1"></a><span class="co">#    the entire webpage.</span></span>
<span id="cb108-18"><a href="#cb108-18" aria-hidden="true" tabindex="-1"></a><span class="co">#</span></span>
<span id="cb108-19"><a href="#cb108-19" aria-hidden="true" tabindex="-1"></a><span class="co">#    For example the following css selector was retrieved in this way.</span></span>
<span id="cb108-20"><a href="#cb108-20" aria-hidden="true" tabindex="-1"></a><span class="co">#    It gets a very specific position on the page. However, if the page</span></span>
<span id="cb108-21"><a href="#cb108-21" aria-hidden="true" tabindex="-1"></a><span class="co">#    code changes in the future, this selector may stop to work. </span></span>
<span id="cb108-22"><a href="#cb108-22" aria-hidden="true" tabindex="-1"></a><span class="co">#    This selector is very "fragile":</span></span>
<span id="cb108-23"><a href="#cb108-23" aria-hidden="true" tabindex="-1"></a><span class="co">#</span></span>
<span id="cb108-24"><a href="#cb108-24" aria-hidden="true" tabindex="-1"></a><span class="co">#        css selector to find the last page </span></span>
<span id="cb108-25"><a href="#cb108-25" aria-hidden="true" tabindex="-1"></a><span class="co">#        #hockey &gt; div &gt; div.row.pagination-area &gt; div.col-md-10.text-center &gt; ul &gt; li:nth-child(24) &gt; a</span></span>
<span id="cb108-26"><a href="#cb108-26" aria-hidden="true" tabindex="-1"></a><span class="co">#</span></span>
<span id="cb108-27"><a href="#cb108-27" aria-hidden="true" tabindex="-1"></a><span class="co"># 3. Use the "selector gadget" Chrome extension. </span></span>
<span id="cb108-28"><a href="#cb108-28" aria-hidden="true" tabindex="-1"></a><span class="co">#    This is very helpful but is also not 100% guaranteed to work </span></span>
<span id="cb108-29"><a href="#cb108-29" aria-hidden="true" tabindex="-1"></a><span class="co">#    correctly.</span></span>
<span id="cb108-30"><a href="#cb108-30" aria-hidden="true" tabindex="-1"></a><span class="do">############################################################################.</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="scrape-the-total-number-of-pages." class="level2" data-number="34.19">
<h2 data-number="34.19" class="anchored" data-anchor-id="scrape-the-total-number-of-pages."><span class="header-section-number">34.19</span> “scrape” the total number of pages.</h2>
<div class="cell">
<div class="sourceCode cell-code" id="cb109"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb109-1"><a href="#cb109-1" aria-hidden="true" tabindex="-1"></a><span class="do">############################################################################</span></span>
<span id="cb109-2"><a href="#cb109-2" aria-hidden="true" tabindex="-1"></a><span class="co">#</span></span>
<span id="cb109-3"><a href="#cb109-3" aria-hidden="true" tabindex="-1"></a><span class="co"># Write code to "scrape" the total number of pages.</span></span>
<span id="cb109-4"><a href="#cb109-4" aria-hidden="true" tabindex="-1"></a><span class="co">#</span></span>
<span id="cb109-5"><a href="#cb109-5" aria-hidden="true" tabindex="-1"></a><span class="co"># Find out how many pages there are (since the website may change, </span></span>
<span id="cb109-6"><a href="#cb109-6" aria-hidden="true" tabindex="-1"></a><span class="co"># we can't assume that there will always be the same number of pages)</span></span>
<span id="cb109-7"><a href="#cb109-7" aria-hidden="true" tabindex="-1"></a><span class="co">#</span></span>
<span id="cb109-8"><a href="#cb109-8" aria-hidden="true" tabindex="-1"></a><span class="do">###########################################################################</span></span>
<span id="cb109-9"><a href="#cb109-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb109-10"><a href="#cb109-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb109-11"><a href="#cb109-11" aria-hidden="true" tabindex="-1"></a><span class="co">#..................................................................</span></span>
<span id="cb109-12"><a href="#cb109-12" aria-hidden="true" tabindex="-1"></a><span class="co"># Find the CSS selector that pinpoints the number of the last page</span></span>
<span id="cb109-13"><a href="#cb109-13" aria-hidden="true" tabindex="-1"></a><span class="co">#..................................................................</span></span>
<span id="cb109-14"><a href="#cb109-14" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb109-15"><a href="#cb109-15" aria-hidden="true" tabindex="-1"></a><span class="co"># Modern browsers have "web developer tools" built into them.</span></span>
<span id="cb109-16"><a href="#cb109-16" aria-hidden="true" tabindex="-1"></a><span class="co"># These tools can help you to find the css selector that you need.</span></span>
<span id="cb109-17"><a href="#cb109-17" aria-hidden="true" tabindex="-1"></a><span class="co"># Different browsers have slightly different tools. </span></span>
<span id="cb109-18"><a href="#cb109-18" aria-hidden="true" tabindex="-1"></a><span class="co"># For the following we will be using Chrome.</span></span>
<span id="cb109-19"><a href="#cb109-19" aria-hidden="true" tabindex="-1"></a><span class="co">#</span></span>
<span id="cb109-20"><a href="#cb109-20" aria-hidden="true" tabindex="-1"></a><span class="co"># Navigate to the first page ( https://scrapethissite.com/pages/forms/?page_num=1 )</span></span>
<span id="cb109-21"><a href="#cb109-21" aria-hidden="true" tabindex="-1"></a><span class="co">#</span></span>
<span id="cb109-22"><a href="#cb109-22" aria-hidden="true" tabindex="-1"></a><span class="co"># Right click on the last page number and choose "inspect". This will</span></span>
<span id="cb109-23"><a href="#cb109-23" aria-hidden="true" tabindex="-1"></a><span class="co"># reveal a new window that shows the HTML for the page. The part of the HTML</span></span>
<span id="cb109-24"><a href="#cb109-24" aria-hidden="true" tabindex="-1"></a><span class="co"># that corresponds to the page number is revealed. Make sure the page number</span></span>
<span id="cb109-25"><a href="#cb109-25" aria-hidden="true" tabindex="-1"></a><span class="co"># is there ...</span></span>
<span id="cb109-26"><a href="#cb109-26" aria-hidden="true" tabindex="-1"></a><span class="co">#</span></span>
<span id="cb109-27"><a href="#cb109-27" aria-hidden="true" tabindex="-1"></a><span class="co"># Right click on the highlighted HTML and choose the menu choices :</span></span>
<span id="cb109-28"><a href="#cb109-28" aria-hidden="true" tabindex="-1"></a><span class="co"># "Copy | copy selector". This will copy into the computer's clipboard </span></span>
<span id="cb109-29"><a href="#cb109-29" aria-hidden="true" tabindex="-1"></a><span class="co"># a CSS selector that will pinpoint that piece of info.</span></span>
<span id="cb109-30"><a href="#cb109-30" aria-hidden="true" tabindex="-1"></a><span class="co"># </span></span>
<span id="cb109-31"><a href="#cb109-31" aria-hidden="true" tabindex="-1"></a><span class="co"># Paste the CSS selector into your R code. The following is the </span></span>
<span id="cb109-32"><a href="#cb109-32" aria-hidden="true" tabindex="-1"></a><span class="co"># css selector that I got when I did this:</span></span>
<span id="cb109-33"><a href="#cb109-33" aria-hidden="true" tabindex="-1"></a><span class="co">#</span></span>
<span id="cb109-34"><a href="#cb109-34" aria-hidden="true" tabindex="-1"></a><span class="co">#   #hockey &gt; div &gt; div.row.pagination-area &gt; div.col-md-10.text-center &gt; ul &gt; li:nth-child(24) &gt; a</span></span>
<span id="cb109-35"><a href="#cb109-35" aria-hidden="true" tabindex="-1"></a><span class="co">#</span></span>
<span id="cb109-36"><a href="#cb109-36" aria-hidden="true" tabindex="-1"></a><span class="co"># Note that this css selector is "fragile" - i.e. it is likely not to work</span></span>
<span id="cb109-37"><a href="#cb109-37" aria-hidden="true" tabindex="-1"></a><span class="co"># in the future if more data is added to the stie. Therefore it is NOT a very </span></span>
<span id="cb109-38"><a href="#cb109-38" aria-hidden="true" tabindex="-1"></a><span class="co"># good CSS selector to use. We will examine this issue below. For now, let's </span></span>
<span id="cb109-39"><a href="#cb109-39" aria-hidden="true" tabindex="-1"></a><span class="co"># just use this selector and revisit this issue later.</span></span>
<span id="cb109-40"><a href="#cb109-40" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb109-41"><a href="#cb109-41" aria-hidden="true" tabindex="-1"></a>url <span class="ot">=</span> <span class="st">"https://scrapethissite.com/pages/forms/?page_num=1"</span></span>
<span id="cb109-42"><a href="#cb109-42" aria-hidden="true" tabindex="-1"></a>cssSelector <span class="ot">=</span> <span class="st">"#hockey &gt; div &gt; div.row.pagination-area &gt; div.col-md-10.text-center &gt; ul &gt; li:nth-child(24) &gt; a"</span></span>
<span id="cb109-43"><a href="#cb109-43" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb109-44"><a href="#cb109-44" aria-hidden="true" tabindex="-1"></a><span class="co"># save the html for the page in a variable so we can use it </span></span>
<span id="cb109-45"><a href="#cb109-45" aria-hidden="true" tabindex="-1"></a><span class="co"># again later without needing to pull it down again from the website.</span></span>
<span id="cb109-46"><a href="#cb109-46" aria-hidden="true" tabindex="-1"></a>full_page <span class="ot">=</span> <span class="fu">read_html</span>(url)          </span>
<span id="cb109-47"><a href="#cb109-47" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb109-48"><a href="#cb109-48" aria-hidden="true" tabindex="-1"></a><span class="co"># Get last page number by searching the full_page html for the tags</span></span>
<span id="cb109-49"><a href="#cb109-49" aria-hidden="true" tabindex="-1"></a><span class="co"># identified by the cssSelector and stripping out the tags</span></span>
<span id="cb109-50"><a href="#cb109-50" aria-hidden="true" tabindex="-1"></a>last_page_number <span class="ot">&lt;-</span> full_page <span class="sc">%&gt;%</span></span>
<span id="cb109-51"><a href="#cb109-51" aria-hidden="true" tabindex="-1"></a>  <span class="fu">html_elements</span>( cssSelector ) <span class="sc">%&gt;%</span></span>
<span id="cb109-52"><a href="#cb109-52" aria-hidden="true" tabindex="-1"></a>  <span class="fu">html_text</span>()</span>
<span id="cb109-53"><a href="#cb109-53" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb109-54"><a href="#cb109-54" aria-hidden="true" tabindex="-1"></a>last_page_number</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "\n                                    \n                                    24\n                                    \n                                "</code></pre>
</div>
<div class="sourceCode cell-code" id="cb111"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb111-1"><a href="#cb111-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Strip out the whitespace </span></span>
<span id="cb111-2"><a href="#cb111-2" aria-hidden="true" tabindex="-1"></a>last_page_number <span class="ot">=</span> <span class="fu">removeWhitespace</span>(last_page_number)</span>
<span id="cb111-3"><a href="#cb111-3" aria-hidden="true" tabindex="-1"></a>last_page_number</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "24"</code></pre>
</div>
<div class="sourceCode cell-code" id="cb113"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb113-1"><a href="#cb113-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Convert the page nubmer to a numeric value</span></span>
<span id="cb113-2"><a href="#cb113-2" aria-hidden="true" tabindex="-1"></a>last_page_number <span class="ot">=</span> <span class="fu">as.numeric</span>(last_page_number)</span>
<span id="cb113-3"><a href="#cb113-3" aria-hidden="true" tabindex="-1"></a>last_page_number</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 24</code></pre>
</div>
<div class="sourceCode cell-code" id="cb115"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb115-1"><a href="#cb115-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Now that it works, let's create a function that packages up this functionality.</span></span>
<span id="cb115-2"><a href="#cb115-2" aria-hidden="true" tabindex="-1"></a><span class="co"># It's always a good idea to create a function that neatly packages up your</span></span>
<span id="cb115-3"><a href="#cb115-3" aria-hidden="true" tabindex="-1"></a><span class="co"># working functionality.</span></span>
<span id="cb115-4"><a href="#cb115-4" aria-hidden="true" tabindex="-1"></a><span class="co">#</span></span>
<span id="cb115-5"><a href="#cb115-5" aria-hidden="true" tabindex="-1"></a><span class="co"># The function will take the "parsed" html code as an argument.</span></span>
<span id="cb115-6"><a href="#cb115-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb115-7"><a href="#cb115-7" aria-hidden="true" tabindex="-1"></a>getLastPageNumber <span class="ot">&lt;-</span> <span class="cf">function</span>(theFullHtml) {</span>
<span id="cb115-8"><a href="#cb115-8" aria-hidden="true" tabindex="-1"></a>  cssSelector <span class="ot">=</span> </span>
<span id="cb115-9"><a href="#cb115-9" aria-hidden="true" tabindex="-1"></a>    <span class="st">"#hockey &gt; div &gt; div.row.pagination-area &gt; div.col-md-10.text-center &gt; ul &gt; li:nth-child(24) &gt; a"</span></span>
<span id="cb115-10"><a href="#cb115-10" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb115-11"><a href="#cb115-11" aria-hidden="true" tabindex="-1"></a>  <span class="co"># remember that a function that does not have a return statement</span></span>
<span id="cb115-12"><a href="#cb115-12" aria-hidden="true" tabindex="-1"></a>  <span class="co"># will return the last value that is calculated.</span></span>
<span id="cb115-13"><a href="#cb115-13" aria-hidden="true" tabindex="-1"></a>  theFullHtml <span class="sc">%&gt;%</span></span>
<span id="cb115-14"><a href="#cb115-14" aria-hidden="true" tabindex="-1"></a>    <span class="fu">html_elements</span>( cssSelector ) <span class="sc">%&gt;%</span></span>
<span id="cb115-15"><a href="#cb115-15" aria-hidden="true" tabindex="-1"></a>    <span class="fu">html_text</span>() <span class="sc">%&gt;%</span></span>
<span id="cb115-16"><a href="#cb115-16" aria-hidden="true" tabindex="-1"></a>    <span class="fu">removeWhitespace</span>() <span class="sc">%&gt;%</span></span>
<span id="cb115-17"><a href="#cb115-17" aria-hidden="true" tabindex="-1"></a>    <span class="fu">as.numeric</span>()</span>
<span id="cb115-18"><a href="#cb115-18" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb115-19"><a href="#cb115-19" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb115-20"><a href="#cb115-20" aria-hidden="true" tabindex="-1"></a>last_page_number <span class="ot">=</span> <span class="fu">getLastPageNumber</span>(full_page)</span>
<span id="cb115-21"><a href="#cb115-21" aria-hidden="true" tabindex="-1"></a>last_page_number</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 24</code></pre>
</div>
</div>
</section>
<section id="timing-r-code-with-sys.time" class="level2" data-number="34.20">
<h2 data-number="34.20" class="anchored" data-anchor-id="timing-r-code-with-sys.time"><span class="header-section-number">34.20</span> Timing R code with Sys.time()</h2>
<div class="cell">
<div class="sourceCode cell-code" id="cb117"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb117-1"><a href="#cb117-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Now that we have the total nubmer of pages, we can get ALL of the data</span></span>
<span id="cb117-2"><a href="#cb117-2" aria-hidden="true" tabindex="-1"></a><span class="co"># for all the pages as follows.</span></span>
<span id="cb117-3"><a href="#cb117-3" aria-hidden="true" tabindex="-1"></a><span class="co">#</span></span>
<span id="cb117-4"><a href="#cb117-4" aria-hidden="true" tabindex="-1"></a><span class="co"># </span><span class="al">NOTE</span><span class="co"> that this may take a while to run.</span></span>
<span id="cb117-5"><a href="#cb117-5" aria-hidden="true" tabindex="-1"></a><span class="co"># We can figure out how much time by running all of the following commands</span></span>
<span id="cb117-6"><a href="#cb117-6" aria-hidden="true" tabindex="-1"></a><span class="co"># together. </span></span>
<span id="cb117-7"><a href="#cb117-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb117-8"><a href="#cb117-8" aria-hidden="true" tabindex="-1"></a><span class="fu">Sys.time</span>()    <span class="co"># shows the time on your computer</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "2025-01-22 13:00:32 EST"</code></pre>
</div>
<div class="sourceCode cell-code" id="cb119"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb119-1"><a href="#cb119-1" aria-hidden="true" tabindex="-1"></a>start <span class="ot">=</span> <span class="fu">Sys.time</span>()</span>
<span id="cb119-2"><a href="#cb119-2" aria-hidden="true" tabindex="-1"></a><span class="co"># put some r code here</span></span>
<span id="cb119-3"><a href="#cb119-3" aria-hidden="true" tabindex="-1"></a>end <span class="ot">=</span> <span class="fu">Sys.time</span>()</span>
<span id="cb119-4"><a href="#cb119-4" aria-hidden="true" tabindex="-1"></a>end <span class="sc">-</span> start</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>Time difference of 0.0005810261 secs</code></pre>
</div>
<div class="sourceCode cell-code" id="cb121"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb121-1"><a href="#cb121-1" aria-hidden="true" tabindex="-1"></a>start_time <span class="ot">=</span> <span class="fu">Sys.time</span>() <span class="co"># get the time before we start</span></span>
<span id="cb121-2"><a href="#cb121-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb121-3"><a href="#cb121-3" aria-hidden="true" tabindex="-1"></a>dataFromAllPages <span class="ot">=</span> <span class="fu">getMultiplePages</span>(<span class="dv">1</span><span class="sc">:</span>last_page_number)   <span class="co"># get all the pages</span></span>
<span id="cb121-4"><a href="#cb121-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb121-5"><a href="#cb121-5" aria-hidden="true" tabindex="-1"></a>end_time <span class="ot">=</span> <span class="fu">Sys.time</span>()   <span class="co"># get the time when it ended</span></span>
<span id="cb121-6"><a href="#cb121-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb121-7"><a href="#cb121-7" aria-hidden="true" tabindex="-1"></a>end_time <span class="sc">-</span> start_time   <span class="co"># show how long it took</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>Time difference of 30.37911 secs</code></pre>
</div>
<div class="sourceCode cell-code" id="cb123"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb123-1"><a href="#cb123-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Let's examine the results ...</span></span>
<span id="cb123-2"><a href="#cb123-2" aria-hidden="true" tabindex="-1"></a><span class="fu">nrow</span>(dataFromAllPages)  <span class="co"># how many rows?</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 582</code></pre>
</div>
<div class="sourceCode cell-code" id="cb125"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb125-1"><a href="#cb125-1" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(dataFromAllPages, <span class="dv">4</span>)  <span class="co"># first few rows ...</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>               team wins
1      BostonBruins   44
2     BuffaloSabres   31
3     CalgaryFlames   46
4 ChicagoBlackhawks   49</code></pre>
</div>
<div class="sourceCode cell-code" id="cb127"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb127-1"><a href="#cb127-1" aria-hidden="true" tabindex="-1"></a><span class="fu">tail</span>(dataFromAllPages, <span class="dv">4</span>)  <span class="co"># last few rows ...</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>                  team wins
579  TorontoMapleLeafs   35
580   VancouverCanucks   51
581 WashingtonCapitals   42
582       WinnipegJets   37</code></pre>
</div>
</div>
<section id="finding-a-css-selector-that-isnt-fragile" class="level3" data-number="34.20.1">
<h3 data-number="34.20.1" class="anchored" data-anchor-id="finding-a-css-selector-that-isnt-fragile"><span class="header-section-number">34.20.1</span> Finding a css selector that isn’t “fragile”</h3>
<div class="cell">
<div class="sourceCode cell-code" id="cb129"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb129-1"><a href="#cb129-1" aria-hidden="true" tabindex="-1"></a><span class="do">#######################################################################</span></span>
<span id="cb129-2"><a href="#cb129-2" aria-hidden="true" tabindex="-1"></a><span class="co">#</span></span>
<span id="cb129-3"><a href="#cb129-3" aria-hidden="true" tabindex="-1"></a><span class="co"># Finding css selectors that aren't "fragile"</span></span>
<span id="cb129-4"><a href="#cb129-4" aria-hidden="true" tabindex="-1"></a><span class="co">#</span></span>
<span id="cb129-5"><a href="#cb129-5" aria-hidden="true" tabindex="-1"></a><span class="do">#######################################################################</span></span>
<span id="cb129-6"><a href="#cb129-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb129-7"><a href="#cb129-7" aria-hidden="true" tabindex="-1"></a><span class="co">#--------------------------------------------</span></span>
<span id="cb129-8"><a href="#cb129-8" aria-hidden="true" tabindex="-1"></a><span class="co"># Quick review of CSS selector rules. </span></span>
<span id="cb129-9"><a href="#cb129-9" aria-hidden="true" tabindex="-1"></a><span class="co">#--------------------------------------------</span></span>
<span id="cb129-10"><a href="#cb129-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb129-11"><a href="#cb129-11" aria-hidden="true" tabindex="-1"></a><span class="co"># To review the CSS selector rules see the website </span></span>
<span id="cb129-12"><a href="#cb129-12" aria-hidden="true" tabindex="-1"></a><span class="co">#   https://flukeout.github.io/ </span></span>
<span id="cb129-13"><a href="#cb129-13" aria-hidden="true" tabindex="-1"></a><span class="co">#</span></span>
<span id="cb129-14"><a href="#cb129-14" aria-hidden="true" tabindex="-1"></a><span class="co"># Read the tutorial information as well as try to solve the different </span></span>
<span id="cb129-15"><a href="#cb129-15" aria-hidden="true" tabindex="-1"></a><span class="co"># levels of the game. </span></span>
<span id="cb129-16"><a href="#cb129-16" aria-hidden="true" tabindex="-1"></a><span class="co"># The answers to the "game" on the above website can be found here:</span></span>
<span id="cb129-17"><a href="#cb129-17" aria-hidden="true" tabindex="-1"></a><span class="co">#   https://gist.github.com/humbertodias/b878772e823fd9863a1e4c2415a3f7b6</span></span>
<span id="cb129-18"><a href="#cb129-18" aria-hidden="true" tabindex="-1"></a><span class="co">#</span></span>
<span id="cb129-19"><a href="#cb129-19" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb129-20"><a href="#cb129-20" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb129-21"><a href="#cb129-21" aria-hidden="true" tabindex="-1"></a><span class="co">#-----------------------------------------------</span></span>
<span id="cb129-22"><a href="#cb129-22" aria-hidden="true" tabindex="-1"></a><span class="co"># Analyzing the CSS Selector we got from Chrome</span></span>
<span id="cb129-23"><a href="#cb129-23" aria-hidden="true" tabindex="-1"></a><span class="co"># (There is an issue with it. </span></span>
<span id="cb129-24"><a href="#cb129-24" aria-hidden="true" tabindex="-1"></a><span class="co">#  We will address the issue and fix it.) </span></span>
<span id="cb129-25"><a href="#cb129-25" aria-hidden="true" tabindex="-1"></a><span class="co">#------------------------------------------------</span></span>
<span id="cb129-26"><a href="#cb129-26" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb129-27"><a href="#cb129-27" aria-hidden="true" tabindex="-1"></a><span class="co"># The following was the selector that we got from Chrome </span></span>
<span id="cb129-28"><a href="#cb129-28" aria-hidden="true" tabindex="-1"></a><span class="co"># to find the last page number:</span></span>
<span id="cb129-29"><a href="#cb129-29" aria-hidden="true" tabindex="-1"></a><span class="co">#</span></span>
<span id="cb129-30"><a href="#cb129-30" aria-hidden="true" tabindex="-1"></a><span class="co">#   #hockey &gt; div &gt; div.row.pagination-area &gt; div.col-md-10.text-center &gt; ul &gt; li:nth-child(24) &gt; a</span></span>
<span id="cb129-31"><a href="#cb129-31" aria-hidden="true" tabindex="-1"></a><span class="co">#</span></span>
<span id="cb129-32"><a href="#cb129-32" aria-hidden="true" tabindex="-1"></a><span class="co"># This selector is "fragile". It will work for now but might not work in the future. </span></span>
<span id="cb129-33"><a href="#cb129-33" aria-hidden="true" tabindex="-1"></a><span class="co"># This website has data for several years up until the present time. We </span></span>
<span id="cb129-34"><a href="#cb129-34" aria-hidden="true" tabindex="-1"></a><span class="co"># anticipate that in the future there will be additional pages of data.</span></span>
<span id="cb129-35"><a href="#cb129-35" aria-hidden="true" tabindex="-1"></a><span class="co"># The CSS selector that we found will work to find the 24th page number</span></span>
<span id="cb129-36"><a href="#cb129-36" aria-hidden="true" tabindex="-1"></a><span class="co"># (which is currently the last page). However, in the future if there are </span></span>
<span id="cb129-37"><a href="#cb129-37" aria-hidden="true" tabindex="-1"></a><span class="co"># more pages, the selector will continue to return the number 24. </span></span>
<span id="cb129-38"><a href="#cb129-38" aria-hidden="true" tabindex="-1"></a><span class="co"># To understand exactly why, let's analyze this selector:</span></span>
<span id="cb129-39"><a href="#cb129-39" aria-hidden="true" tabindex="-1"></a><span class="co"># For a review of the rules for how selectors are built see the following </span></span>
<span id="cb129-40"><a href="#cb129-40" aria-hidden="true" tabindex="-1"></a><span class="co"># page: https://flukeout.github.io/</span></span>
<span id="cb129-41"><a href="#cb129-41" aria-hidden="true" tabindex="-1"></a><span class="co">#</span></span>
<span id="cb129-42"><a href="#cb129-42" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb129-43"><a href="#cb129-43" aria-hidden="true" tabindex="-1"></a><span class="co"># &lt;div&gt;                # div is the parent of h1 and ul</span></span>
<span id="cb129-44"><a href="#cb129-44" aria-hidden="true" tabindex="-1"></a><span class="co">#   &lt;h1&gt;My stuff&lt;/h1&gt;  # h1 is the child of div and the sibling of ul</span></span>
<span id="cb129-45"><a href="#cb129-45" aria-hidden="true" tabindex="-1"></a><span class="co">#   &lt;ul&gt;               # ul is the parent of 3 &lt;li&gt;s, the 2nd child of div and a sibling of h1</span></span>
<span id="cb129-46"><a href="#cb129-46" aria-hidden="true" tabindex="-1"></a><span class="co">#     &lt;li&gt;             # </span></span>
<span id="cb129-47"><a href="#cb129-47" aria-hidden="true" tabindex="-1"></a><span class="co">#       &lt;strong&gt;       </span></span>
<span id="cb129-48"><a href="#cb129-48" aria-hidden="true" tabindex="-1"></a><span class="co">#         Table</span></span>
<span id="cb129-49"><a href="#cb129-49" aria-hidden="true" tabindex="-1"></a><span class="co">#       &lt;/strong&gt;&lt;/li&gt;</span></span>
<span id="cb129-50"><a href="#cb129-50" aria-hidden="true" tabindex="-1"></a><span class="co">#     &lt;li&gt;Chairs&lt;/li&gt;</span></span>
<span id="cb129-51"><a href="#cb129-51" aria-hidden="true" tabindex="-1"></a><span class="co">#     &lt;li&gt;Fork&lt;/li&gt;</span></span>
<span id="cb129-52"><a href="#cb129-52" aria-hidden="true" tabindex="-1"></a><span class="co">#   &lt;/ul&gt;</span></span>
<span id="cb129-53"><a href="#cb129-53" aria-hidden="true" tabindex="-1"></a><span class="co"># &lt;/div&gt;</span></span>
<span id="cb129-54"><a href="#cb129-54" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb129-55"><a href="#cb129-55" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb129-56"><a href="#cb129-56" aria-hidden="true" tabindex="-1"></a><span class="co"># The following breaks down the selector that Chrome figured out into its </span></span>
<span id="cb129-57"><a href="#cb129-57" aria-hidden="true" tabindex="-1"></a><span class="co"># different parts:</span></span>
<span id="cb129-58"><a href="#cb129-58" aria-hidden="true" tabindex="-1"></a><span class="co">#</span></span>
<span id="cb129-59"><a href="#cb129-59" aria-hidden="true" tabindex="-1"></a><span class="co">#   #hockey                   # find the HTML start tag whose id has a value id="hockey" </span></span>
<span id="cb129-60"><a href="#cb129-60" aria-hidden="true" tabindex="-1"></a><span class="co">#   &gt;                         # directly inside of that element</span></span>
<span id="cb129-61"><a href="#cb129-61" aria-hidden="true" tabindex="-1"></a><span class="co">#   div                       # there is a &lt;div&gt; tag</span></span>
<span id="cb129-62"><a href="#cb129-62" aria-hidden="true" tabindex="-1"></a><span class="co">#   &gt;                         # directly inside of that div tag</span></span>
<span id="cb129-63"><a href="#cb129-63" aria-hidden="true" tabindex="-1"></a><span class="co">#   div.row.pagination-area   # there is a &lt;div&gt; tag that has row and pagination-area classes, i.e. &lt;div class="row pagination-area"&gt;</span></span>
<span id="cb129-64"><a href="#cb129-64" aria-hidden="true" tabindex="-1"></a><span class="co">#   &gt;                         # directly inside of that</span></span>
<span id="cb129-65"><a href="#cb129-65" aria-hidden="true" tabindex="-1"></a><span class="co">#   div.col-md-10.text-center # there is div tag with classes "col-md-10" and "text-center", i.e. &lt;div class="col-md-10 text-center"&gt;</span></span>
<span id="cb129-66"><a href="#cb129-66" aria-hidden="true" tabindex="-1"></a><span class="co">#   &gt;                         # directly inside of that </span></span>
<span id="cb129-67"><a href="#cb129-67" aria-hidden="true" tabindex="-1"></a><span class="co">#   ul                        # there is a ul tag</span></span>
<span id="cb129-68"><a href="#cb129-68" aria-hidden="true" tabindex="-1"></a><span class="co">#   &gt;                         # directly inside that there is</span></span>
<span id="cb129-69"><a href="#cb129-69" aria-hidden="true" tabindex="-1"></a><span class="co">#   li:nth-child(24)          # an &lt;li&gt; tag that is the 24th tag inside of the enclosing &lt;ul&gt; tag</span></span>
<span id="cb129-70"><a href="#cb129-70" aria-hidden="true" tabindex="-1"></a><span class="co">#   &gt;                         # directly inside that there is </span></span>
<span id="cb129-71"><a href="#cb129-71" aria-hidden="true" tabindex="-1"></a><span class="co">#   a                         # an "a" tag</span></span>
<span id="cb129-72"><a href="#cb129-72" aria-hidden="true" tabindex="-1"></a><span class="co">#</span></span>
<span id="cb129-73"><a href="#cb129-73" aria-hidden="true" tabindex="-1"></a><span class="co"># You should take the time to convince yourself that the css selector is </span></span>
<span id="cb129-74"><a href="#cb129-74" aria-hidden="true" tabindex="-1"></a><span class="co"># accurate today by looking carefully at the HTML code and noting exactly where the </span></span>
<span id="cb129-75"><a href="#cb129-75" aria-hidden="true" tabindex="-1"></a><span class="co"># last page number is in the context of the other tags and attributes on the page. </span></span>
<span id="cb129-76"><a href="#cb129-76" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb129-77"><a href="#cb129-77" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb129-78"><a href="#cb129-78" aria-hidden="true" tabindex="-1"></a><span class="co">#................................................</span></span>
<span id="cb129-79"><a href="#cb129-79" aria-hidden="true" tabindex="-1"></a><span class="co"># Using VSCode (or another text ediotr) to analyze the HTML</span></span>
<span id="cb129-80"><a href="#cb129-80" aria-hidden="true" tabindex="-1"></a><span class="co">#................................................</span></span>
<span id="cb129-81"><a href="#cb129-81" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb129-82"><a href="#cb129-82" aria-hidden="true" tabindex="-1"></a><span class="co"># It's much easier to navigate around the HTML code by analyzing the HTML in an HTML editor. </span></span>
<span id="cb129-83"><a href="#cb129-83" aria-hidden="true" tabindex="-1"></a><span class="co"># VSCode works well for this. To get the full HTML, right click on the page</span></span>
<span id="cb129-84"><a href="#cb129-84" aria-hidden="true" tabindex="-1"></a><span class="co"># and choose "View page source" (in Chrome or a similar link in other browsers).</span></span>
<span id="cb129-85"><a href="#cb129-85" aria-hidden="true" tabindex="-1"></a><span class="co"># Then copy all the code (ctrl-a on windows or cmd-a on Mac) and paste</span></span>
<span id="cb129-86"><a href="#cb129-86" aria-hidden="true" tabindex="-1"></a><span class="co"># it into a new VSCode file. Then save the file with a .html extension</span></span>
<span id="cb129-87"><a href="#cb129-87" aria-hidden="true" tabindex="-1"></a><span class="co"># to ensure that VSCode knows how to navigate around the file. </span></span>
<span id="cb129-88"><a href="#cb129-88" aria-hidden="true" tabindex="-1"></a><span class="co"># In VSCode you can now point to the left margin and press the arrows that appear</span></span>
<span id="cb129-89"><a href="#cb129-89" aria-hidden="true" tabindex="-1"></a><span class="co"># to "collapse" or "expand" the HTML tags. Doing so helps a lot in trying to </span></span>
<span id="cb129-90"><a href="#cb129-90" aria-hidden="true" tabindex="-1"></a><span class="co"># understand how the HTML file is organized.</span></span>
<span id="cb129-91"><a href="#cb129-91" aria-hidden="true" tabindex="-1"></a><span class="co">#</span></span>
<span id="cb129-92"><a href="#cb129-92" aria-hidden="true" tabindex="-1"></a><span class="co"># Other useful features in VSCode to help with editing HTML:</span></span>
<span id="cb129-93"><a href="#cb129-93" aria-hidden="true" tabindex="-1"></a><span class="co">#</span></span>
<span id="cb129-94"><a href="#cb129-94" aria-hidden="true" tabindex="-1"></a><span class="co"># - alt-shift-F   </span></span>
<span id="cb129-95"><a href="#cb129-95" aria-hidden="true" tabindex="-1"></a><span class="co">#    </span></span>
<span id="cb129-96"><a href="#cb129-96" aria-hidden="true" tabindex="-1"></a><span class="co">#     Remember that HTML does not require proper indentation to work in the webpage.</span></span>
<span id="cb129-97"><a href="#cb129-97" aria-hidden="true" tabindex="-1"></a><span class="co">#     However, without proper indentation, it is hard to read the HTML. Pressing</span></span>
<span id="cb129-98"><a href="#cb129-98" aria-hidden="true" tabindex="-1"></a><span class="co">#     shift-alt-F will automatically "format" the entire HTML file so that it </span></span>
<span id="cb129-99"><a href="#cb129-99" aria-hidden="true" tabindex="-1"></a><span class="co">#     is indented properly and is easier to read.</span></span>
<span id="cb129-100"><a href="#cb129-100" aria-hidden="true" tabindex="-1"></a><span class="co">#</span></span>
<span id="cb129-101"><a href="#cb129-101" aria-hidden="true" tabindex="-1"></a><span class="co"># - As noted above - point to left margin to see arrows to </span></span>
<span id="cb129-102"><a href="#cb129-102" aria-hidden="true" tabindex="-1"></a><span class="co">#   collapse or expand HTML elements.</span></span>
<span id="cb129-103"><a href="#cb129-103" aria-hidden="true" tabindex="-1"></a><span class="co">#</span></span>
<span id="cb129-104"><a href="#cb129-104" aria-hidden="true" tabindex="-1"></a><span class="co"># - ctrl-shift-P</span></span>
<span id="cb129-105"><a href="#cb129-105" aria-hidden="true" tabindex="-1"></a><span class="co">#</span></span>
<span id="cb129-106"><a href="#cb129-106" aria-hidden="true" tabindex="-1"></a><span class="co">#     VSCode has many features that are not directly available through the</span></span>
<span id="cb129-107"><a href="#cb129-107" aria-hidden="true" tabindex="-1"></a><span class="co">#     menus. ctrl-shift-P (Windows) or cmd-shift-P (mac) reveals the</span></span>
<span id="cb129-108"><a href="#cb129-108" aria-hidden="true" tabindex="-1"></a><span class="co">#     "command palette". This is a quick way to search for commands</span></span>
<span id="cb129-109"><a href="#cb129-109" aria-hidden="true" tabindex="-1"></a><span class="co">#     in VSCode which you might not otherwise know about. Try it. </span></span>
<span id="cb129-110"><a href="#cb129-110" aria-hidden="true" tabindex="-1"></a><span class="co">#     For example,</span></span>
<span id="cb129-111"><a href="#cb129-111" aria-hidden="true" tabindex="-1"></a><span class="co">#</span></span>
<span id="cb129-112"><a href="#cb129-112" aria-hidden="true" tabindex="-1"></a><span class="co">#     * press ctrl-shift-P and type "comment" (without the quotes). Then choose</span></span>
<span id="cb129-113"><a href="#cb129-113" aria-hidden="true" tabindex="-1"></a><span class="co">#       "Add line comment" to automatically insert &lt;!--   --&gt; into your HTML file.</span></span>
<span id="cb129-114"><a href="#cb129-114" aria-hidden="true" tabindex="-1"></a><span class="co">#       You can add comments to the HTML file as you are examining it. This may</span></span>
<span id="cb129-115"><a href="#cb129-115" aria-hidden="true" tabindex="-1"></a><span class="co">#       help you when you are trying to figure out the structure of a </span></span>
<span id="cb129-116"><a href="#cb129-116" aria-hidden="true" tabindex="-1"></a><span class="co">#       complex HTML file and how to </span></span>
<span id="cb129-117"><a href="#cb129-117" aria-hidden="true" tabindex="-1"></a><span class="co">#    </span></span>
<span id="cb129-118"><a href="#cb129-118" aria-hidden="true" tabindex="-1"></a><span class="co">#</span></span>
<span id="cb129-119"><a href="#cb129-119" aria-hidden="true" tabindex="-1"></a><span class="co">#     * Highlight some text, press ctrl-shift-P. </span></span>
<span id="cb129-120"><a href="#cb129-120" aria-hidden="true" tabindex="-1"></a><span class="co">#       Then type "case" (without the quotes). You will see options to transform </span></span>
<span id="cb129-121"><a href="#cb129-121" aria-hidden="true" tabindex="-1"></a><span class="co">#       the selected text upper or lowercase. </span></span>
<span id="cb129-122"><a href="#cb129-122" aria-hidden="true" tabindex="-1"></a><span class="co">#</span></span>
<span id="cb129-123"><a href="#cb129-123" aria-hidden="true" tabindex="-1"></a><span class="co"># - For more tips on how to use VSCode to edit HTML files: </span></span>
<span id="cb129-124"><a href="#cb129-124" aria-hidden="true" tabindex="-1"></a><span class="co">#   https://code.visualstudio.com/docs/languages/html</span></span>
<span id="cb129-125"><a href="#cb129-125" aria-hidden="true" tabindex="-1"></a><span class="co">#</span></span>
<span id="cb129-126"><a href="#cb129-126" aria-hidden="true" tabindex="-1"></a><span class="co"># - For more tips on how to use VSCode in general:</span></span>
<span id="cb129-127"><a href="#cb129-127" aria-hidden="true" tabindex="-1"></a><span class="co">#   https://code.visualstudio.com/docs/getstarted/tips-and-tricks</span></span>
<span id="cb129-128"><a href="#cb129-128" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb129-129"><a href="#cb129-129" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb129-130"><a href="#cb129-130" aria-hidden="true" tabindex="-1"></a><span class="co">#................................................</span></span>
<span id="cb129-131"><a href="#cb129-131" aria-hidden="true" tabindex="-1"></a><span class="co"># ... back to analyzing the CSS selector</span></span>
<span id="cb129-132"><a href="#cb129-132" aria-hidden="true" tabindex="-1"></a><span class="co">#................................................</span></span>
<span id="cb129-133"><a href="#cb129-133" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb129-134"><a href="#cb129-134" aria-hidden="true" tabindex="-1"></a><span class="co"># From analyzing this HTML, we determine that each page number is in an &lt;li&gt;</span></span>
<span id="cb129-135"><a href="#cb129-135" aria-hidden="true" tabindex="-1"></a><span class="co"># element. Since there are 24 pages of data there are 24 &lt;li&gt; tags (each contains</span></span>
<span id="cb129-136"><a href="#cb129-136" aria-hidden="true" tabindex="-1"></a><span class="co"># a link to one of the page numbers). There is also one more &lt;li&gt; tag that</span></span>
<span id="cb129-137"><a href="#cb129-137" aria-hidden="true" tabindex="-1"></a><span class="co"># contains the "next page" button.     </span></span>
<span id="cb129-138"><a href="#cb129-138" aria-hidden="true" tabindex="-1"></a><span class="co">#</span></span>
<span id="cb129-139"><a href="#cb129-139" aria-hidden="true" tabindex="-1"></a><span class="co"># In the CSS Selector tha we got from Chrome "li:nth-child(24)" is specifically</span></span>
<span id="cb129-140"><a href="#cb129-140" aria-hidden="true" tabindex="-1"></a><span class="co"># targeting the 24th &lt;li&gt; tag. That is the last tag today. However, </span></span>
<span id="cb129-141"><a href="#cb129-141" aria-hidden="true" tabindex="-1"></a><span class="co"># if in the future more pages of data are added to the website, this selector</span></span>
<span id="cb129-142"><a href="#cb129-142" aria-hidden="true" tabindex="-1"></a><span class="co"># will still retrieve the 24th &lt;li&gt; tag and not the 2nd to last &lt;li&gt; tag</span></span>
<span id="cb129-143"><a href="#cb129-143" aria-hidden="true" tabindex="-1"></a><span class="co"># (remember, the last &lt;li&gt; tag is for the "next page" button).</span></span>
<span id="cb129-144"><a href="#cb129-144" aria-hidden="true" tabindex="-1"></a><span class="co">#</span></span>
<span id="cb129-145"><a href="#cb129-145" aria-hidden="true" tabindex="-1"></a><span class="co"># (</span><span class="al">NOTE</span><span class="co">: the "next page" link appears in the HTML code</span></span>
<span id="cb129-146"><a href="#cb129-146" aria-hidden="true" tabindex="-1"></a><span class="co"># as "next page" but is rendered in the browser as "&gt;&gt;". Replacing the</span></span>
<span id="cb129-147"><a href="#cb129-147" aria-hidden="true" tabindex="-1"></a><span class="co"># words "next page" in the HTML with "&gt;&gt;" on the rendered page</span></span>
<span id="cb129-148"><a href="#cb129-148" aria-hidden="true" tabindex="-1"></a><span class="co"># is accomplished through CSS rules - but this has no effect on  </span></span>
<span id="cb129-149"><a href="#cb129-149" aria-hidden="true" tabindex="-1"></a><span class="co"># what we're trying to accomplish. When scraping a page, you work with what's </span></span>
<span id="cb129-150"><a href="#cb129-150" aria-hidden="true" tabindex="-1"></a><span class="co"># in the HTML file, not what is rendered in the browser.)</span></span>
<span id="cb129-151"><a href="#cb129-151" aria-hidden="true" tabindex="-1"></a><span class="co">#</span></span>
<span id="cb129-152"><a href="#cb129-152" aria-hidden="true" tabindex="-1"></a><span class="co"># Therefore it is important to analyze the HTML and try </span></span>
<span id="cb129-153"><a href="#cb129-153" aria-hidden="true" tabindex="-1"></a><span class="co"># to find a "less fragile" css selector the LAST page number the same information.</span></span>
<span id="cb129-154"><a href="#cb129-154" aria-hidden="true" tabindex="-1"></a><span class="co"># After looking at the HTML code carefully, it seems like the &lt;ul&gt; tag</span></span>
<span id="cb129-155"><a href="#cb129-155" aria-hidden="true" tabindex="-1"></a><span class="co"># referenced in the CSS selector that we found has a class="pagination" attribute, </span></span>
<span id="cb129-156"><a href="#cb129-156" aria-hidden="true" tabindex="-1"></a><span class="co"># ie. &lt;ul class="pagination"&gt;. We can target that directly with ".pagination".</span></span>
<span id="cb129-157"><a href="#cb129-157" aria-hidden="true" tabindex="-1"></a><span class="co">#</span></span>
<span id="cb129-158"><a href="#cb129-158" aria-hidden="true" tabindex="-1"></a><span class="co"># The li that points to the last page happens to be the 2nd to last </span></span>
<span id="cb129-159"><a href="#cb129-159" aria-hidden="true" tabindex="-1"></a><span class="co"># &lt;li&gt; tag that is directly inside this ul tag, i.e. </span></span>
<span id="cb129-160"><a href="#cb129-160" aria-hidden="true" tabindex="-1"></a><span class="co">#</span></span>
<span id="cb129-161"><a href="#cb129-161" aria-hidden="true" tabindex="-1"></a><span class="co">#    &lt;ul class="pagination"&gt;</span></span>
<span id="cb129-162"><a href="#cb129-162" aria-hidden="true" tabindex="-1"></a><span class="co">#       &lt;li&gt; info about page 1 &lt;/li&gt;</span></span>
<span id="cb129-163"><a href="#cb129-163" aria-hidden="true" tabindex="-1"></a><span class="co">#       &lt;li&gt; info about page 2 &lt;/li&gt;</span></span>
<span id="cb129-164"><a href="#cb129-164" aria-hidden="true" tabindex="-1"></a><span class="co">#         etc ...</span></span>
<span id="cb129-165"><a href="#cb129-165" aria-hidden="true" tabindex="-1"></a><span class="co">#       &lt;li&gt; info about the last page &lt;/li&gt;         # THIS IS THE &lt;li&gt; WE WANT</span></span>
<span id="cb129-166"><a href="#cb129-166" aria-hidden="true" tabindex="-1"></a><span class="co">#       &lt;li&gt; info about the "next" button &lt;/li&gt;</span></span>
<span id="cb129-167"><a href="#cb129-167" aria-hidden="true" tabindex="-1"></a><span class="co">#    &lt;/ul&gt;</span></span>
<span id="cb129-168"><a href="#cb129-168" aria-hidden="true" tabindex="-1"></a><span class="co">#</span></span>
<span id="cb129-169"><a href="#cb129-169" aria-hidden="true" tabindex="-1"></a><span class="co"># Our css selector therefore becomes :    ".pagination &gt; li:nth-last-child(2)"</span></span>
<span id="cb129-170"><a href="#cb129-170" aria-hidden="true" tabindex="-1"></a><span class="co"># Let's see if our code works with the new CSS selector</span></span>
<span id="cb129-171"><a href="#cb129-171" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb129-172"><a href="#cb129-172" aria-hidden="true" tabindex="-1"></a>getLastPageNumber <span class="ot">&lt;-</span> <span class="cf">function</span>(theFullHtml) {</span>
<span id="cb129-173"><a href="#cb129-173" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb129-174"><a href="#cb129-174" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Selector specfies the </span></span>
<span id="cb129-175"><a href="#cb129-175" aria-hidden="true" tabindex="-1"></a>  <span class="co"># 2nd to last li inside the a tag that contains class="pagination"</span></span>
<span id="cb129-176"><a href="#cb129-176" aria-hidden="true" tabindex="-1"></a>  selector <span class="ot">=</span> <span class="st">".pagination &gt; li:nth-last-child(2)"</span>    </span>
<span id="cb129-177"><a href="#cb129-177" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb129-178"><a href="#cb129-178" aria-hidden="true" tabindex="-1"></a>  <span class="co"># remember that a function that does not have a return statement</span></span>
<span id="cb129-179"><a href="#cb129-179" aria-hidden="true" tabindex="-1"></a>  <span class="co"># will return the last value that is calculated.</span></span>
<span id="cb129-180"><a href="#cb129-180" aria-hidden="true" tabindex="-1"></a>  theFullHtml <span class="sc">%&gt;%</span></span>
<span id="cb129-181"><a href="#cb129-181" aria-hidden="true" tabindex="-1"></a>    <span class="fu">html_elements</span>( selector ) <span class="sc">%&gt;%</span></span>
<span id="cb129-182"><a href="#cb129-182" aria-hidden="true" tabindex="-1"></a>    <span class="fu">html_text</span>() <span class="sc">%&gt;%</span></span>
<span id="cb129-183"><a href="#cb129-183" aria-hidden="true" tabindex="-1"></a>    <span class="fu">removeWhitespace</span>() <span class="sc">%&gt;%</span></span>
<span id="cb129-184"><a href="#cb129-184" aria-hidden="true" tabindex="-1"></a>    <span class="fu">as.numeric</span>()</span>
<span id="cb129-185"><a href="#cb129-185" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb129-186"><a href="#cb129-186" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb129-187"><a href="#cb129-187" aria-hidden="true" tabindex="-1"></a>full_page <span class="ot">=</span> <span class="fu">read_html</span>(<span class="st">"https://scrapethissite.com/pages/forms/?page_num=1"</span>)</span>
<span id="cb129-188"><a href="#cb129-188" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb129-189"><a href="#cb129-189" aria-hidden="true" tabindex="-1"></a><span class="fu">getLastPageNumber</span>(full_page)  <span class="co"># test the new version</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 24</code></pre>
</div>
</div>


</section>
</section>

</main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const onCopySuccess = function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  }
  const getTextToCopy = function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button:not([data-in-quarto-modal])', {
    text: getTextToCopy
  });
  clipboard.on('success', onCopySuccess);
  if (window.document.getElementById('quarto-embedded-source-code-modal')) {
    // For code content inside modals, clipBoardJS needs to be initialized with a container option
    // TODO: Check when it could be a function (https://github.com/zenorocha/clipboard.js/issues/860)
    const clipboardModal = new window.ClipboardJS('.code-copy-button[data-in-quarto-modal]', {
      text: getTextToCopy,
      container: window.document.getElementById('quarto-embedded-source-code-modal')
    });
    clipboardModal.on('success', onCopySuccess);
  }
    var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
    var mailtoRegex = new RegExp(/^mailto:/);
      var filterRegex = new RegExp('/' + window.location.host + '/');
    var isInternal = (href) => {
        return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
    }
    // Inspect non-navigation links and adorn them if external
 	var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool):not(.about-link)');
    for (var i=0; i<links.length; i++) {
      const link = links[i];
      if (!isInternal(link.href)) {
        // undo the damage that might have been done by quarto-nav.js in the case of
        // links that we want to consider external
        if (link.dataset.originalHref !== undefined) {
          link.href = link.dataset.originalHref;
        }
          // target, if specified
          link.setAttribute("target", "_blank");
          if (link.getAttribute("rel") === null) {
            link.setAttribute("rel", "noopener");
          }
      }
    }
  function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
    const config = {
      allowHTML: true,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start',
    };
    if (contentFn) {
      config.content = contentFn;
    }
    if (onTriggerFn) {
      config.onTrigger = onTriggerFn;
    }
    if (onUntriggerFn) {
      config.onUntrigger = onUntriggerFn;
    }
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      if (note) {
        return note.innerHTML;
      } else {
        return "";
      }
    });
  }
  const xrefs = window.document.querySelectorAll('a.quarto-xref');
  const processXRef = (id, note) => {
    // Strip column container classes
    const stripColumnClz = (el) => {
      el.classList.remove("page-full", "page-columns");
      if (el.children) {
        for (const child of el.children) {
          stripColumnClz(child);
        }
      }
    }
    stripColumnClz(note)
    if (id === null || id.startsWith('sec-')) {
      // Special case sections, only their first couple elements
      const container = document.createElement("div");
      if (note.children && note.children.length > 2) {
        container.appendChild(note.children[0].cloneNode(true));
        for (let i = 1; i < note.children.length; i++) {
          const child = note.children[i];
          if (child.tagName === "P" && child.innerText === "") {
            continue;
          } else {
            container.appendChild(child.cloneNode(true));
            break;
          }
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(container);
        }
        return container.innerHTML
      } else {
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        return note.innerHTML;
      }
    } else {
      // Remove any anchor links if they are present
      const anchorLink = note.querySelector('a.anchorjs-link');
      if (anchorLink) {
        anchorLink.remove();
      }
      if (window.Quarto?.typesetMath) {
        window.Quarto.typesetMath(note);
      }
      // TODO in 1.5, we should make sure this works without a callout special case
      if (note.classList.contains("callout")) {
        return note.outerHTML;
      } else {
        return note.innerHTML;
      }
    }
  }
  for (var i=0; i<xrefs.length; i++) {
    const xref = xrefs[i];
    tippyHover(xref, undefined, function(instance) {
      instance.disable();
      let url = xref.getAttribute('href');
      let hash = undefined; 
      if (url.startsWith('#')) {
        hash = url;
      } else {
        try { hash = new URL(url).hash; } catch {}
      }
      if (hash) {
        const id = hash.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note !== null) {
          try {
            const html = processXRef(id, note.cloneNode(true));
            instance.setContent(html);
          } finally {
            instance.enable();
            instance.show();
          }
        } else {
          // See if we can fetch this
          fetch(url.split('#')[0])
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.getElementById(id);
            if (note !== null) {
              const html = processXRef(id, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      } else {
        // See if we can fetch a full url (with no hash to target)
        // This is a special case and we should probably do some content thinning / targeting
        fetch(url)
        .then(res => res.text())
        .then(html => {
          const parser = new DOMParser();
          const htmlDoc = parser.parseFromString(html, "text/html");
          const note = htmlDoc.querySelector('main.content');
          if (note !== null) {
            // This should only happen for chapter cross references
            // (since there is no id in the URL)
            // remove the first header
            if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
              note.children[0].remove();
            }
            const html = processXRef(null, note);
            instance.setContent(html);
          } 
        }).finally(() => {
          instance.enable();
          instance.show();
        });
      }
    }, function(instance) {
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            div.style.left = 0;
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
        // Handle positioning of the toggle
    window.addEventListener(
      "resize",
      throttle(() => {
        elRect = undefined;
        if (selectedAnnoteEl) {
          selectCodeLines(selectedAnnoteEl);
        }
      }, 10)
    );
    function throttle(fn, ms) {
    let throttle = false;
    let timer;
      return (...args) => {
        if(!throttle) { // first call gets through
            fn.apply(this, args);
            throttle = true;
        } else { // all the others get throttled
            if(timer) clearTimeout(timer); // cancel #2
            timer = setTimeout(() => {
              fn.apply(this, args);
              timer = throttle = false;
            }, ms);
        }
      };
    }
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
<nav class="page-navigation">
  <div class="nav-page nav-page-previous">
      <a href="./web-000300-internetArchitecture-v001.html" class="pagination-link" aria-label="How a webpage gets to your browser">
        <i class="bi bi-arrow-left-short"></i> <span class="nav-page-text"><span class="chapter-number">33</span>&nbsp; <span class="chapter-title">How a webpage gets to your browser</span></span>
      </a>          
  </div>
  <div class="nav-page nav-page-next">
      <a href="./web-000130-WebscrapingJavascriptSites-v003.html" class="pagination-link" aria-label="Scraping Dynamic (JavaScript) Websites">
        <span class="nav-page-text"><span class="chapter-number">35</span>&nbsp; <span class="chapter-title">Scraping Dynamic (JavaScript) Websites</span></span> <i class="bi bi-arrow-right-short"></i>
      </a>
  </div>
</nav>
</div> <!-- /content -->




</body></html>